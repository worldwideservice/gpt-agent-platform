# üìã –î–∞–ª—å–Ω–µ–π—à–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è Worker

## ‚úÖ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–ø—É—à–µ–Ω—ã (commit: `9abef9eb`):
- –ò—Å–ø–æ–ª—å–∑—É–µ–º `tsImport` –∏–∑ `tsx/esm/api` –¥–ª—è —Ä–µ–∑–æ–ª–≤–∞ path aliases
- –£–ø—Ä–æ—â–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∏–º–ø–æ—Ä—Ç—ã
- –°–±–æ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ (48.95 KB)

Railway –¥–æ–ª–∂–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤—ã–π –¥–µ–ø–ª–æ–π.

## üéØ –ü–ª–∞–Ω –¥–∞–ª—å–Ω–µ–π—à–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π

### 1. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–µ–ø–ª–æ—è (–°–µ–π—á–∞—Å)

**–î–µ–π—Å—Ç–≤–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –¥–µ–ø–ª–æ—è —á–µ—Ä–µ–∑ Railway API –∏–ª–∏ Dashboard

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –°—Ç–∞—Ç—É—Å: SUCCESS
- ‚úÖ Worker –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Health check –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ `/health`

**–ï—Å–ª–∏ –¥–µ–ø–ª–æ–π –ø—Ä–æ–≤–∞–ª–∏–ª—Å—è:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –¥–µ–ø–ª–æ—è —á–µ—Ä–µ–∑ Railway Dashboard
- –ù–∞–π—Ç–∏ –ø—Ä–∏—á–∏–Ω—É –æ—à–∏–±–∫–∏
- –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å —Å–Ω–æ–≤–∞

---

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** HIGH

**–î–µ–π—Å—Ç–≤–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è Worker —á–µ—Ä–µ–∑ Railway Dashboard –∏–ª–∏ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä–Ω—É—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é

**–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:**

1. **REDIS_URL**
   ```
   redis://default:AYcUASQgZjI2MTM5NzYtYzU2ZS00YjFkLTk3MmQtMWIyODAzYjY3ODg5OGE3ODAzNDUwMzQ5NGE0Yjk5NzEwZDFiNWE4ZTg0MDU=@usw1-merry-term-40416.upstash.io:6379
   ```

2. **SUPABASE_URL**
   ```
   https://rpzchsgutabxeabbnwas.supabase.co
   ```

3. **SUPABASE_SERVICE_ROLE_KEY**
   ```
   eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJwemNoc2d1dGFieGVhYmJud2FzIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1OTU2MzMzOCwiZXhwIjoyMDc1MTM5MzM4fQ.UIkX-rUGGTbMGfd5YoF41Dx3QBuLH13nO-R3BXdbx2I
   ```

4. **ENCRYPTION_KEY**
   ```
   HxXQ5WCMJ3TrFZehEHJUyMVgVX5fdGsSWy/2rixkVwE=
   ```

5. **OPENROUTER_API_KEY**
   ```
   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
   ```

6. **JOB_QUEUE_NAME**
   ```
   agent-jobs
   ```

7. **JOB_CONCURRENCY**
   ```
   5
   ```

**–ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å:**
- –ß–µ—Ä–µ–∑ Railway Dashboard: Settings ‚Üí Variables ‚Üí "+ New Variable"
- –ò–ª–∏ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä–Ω—É—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

---

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ (–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö)

**–î–µ–π—Å—Ç–≤–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Worker —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–®–∞–≥–∏:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å health check: `curl https://[worker-url]/health`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Worker –≤ Railway Dashboard
3. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ Health check –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 200 OK
- ‚úÖ –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç: `[worker] Started processing jobs from queue: agent-jobs`
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –∏–º–ø–æ—Ä—Ç–∞ –∏–ª–∏ —Ä–µ–∑–æ–ª–≤–∞ –ø—É—Ç–µ–π

---

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ jobs (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–î–µ–π—Å—Ç–≤–∏–µ:** –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É —Ä–µ–∞–ª—å–Ω–æ–≥–æ job —á–µ—Ä–µ–∑ Worker

**–®–∞–≥–∏:**
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π job –≤ –æ—á–µ—Ä–µ–¥—å (—á–µ—Ä–µ–∑ API –∏–ª–∏ —á–µ—Ä–µ–∑ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å)
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Worker - job –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞–Ω
3. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏ DevOps

### URGENT

1. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã –ë–î –≤ Supabase**
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å daily backups
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å restore –ø—Ä–æ—Ü–µ–¥—É—Ä—É

2. **Security audit**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Git –∏—Å—Ç–æ—Ä–∏—é –Ω–∞ —Å–µ–∫—Ä–µ—Ç—ã
   - –†–æ—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á–∏ (–µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω—ã —Å–µ–∫—Ä–µ—Ç—ã –≤ –∏—Å—Ç–æ—Ä–∏–∏)
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### HIGH

3. **–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å SLO/SLA –∏ —Å–æ–∑–¥–∞—Ç—å Sentry Dashboard**
   - –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ (uptime, response time, error rate)
   - –°–æ–∑–¥–∞—Ç—å Dashboard –≤ Sentry
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

4. **–°–æ–∑–¥–∞—Ç—å Disaster Recovery –ø–ª–∞–Ω**
   - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—é
   - –ü—Ä–æ—Ü–µ–¥—É—Ä—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ë–î
   - –ü—Ä–æ—Ü–µ–¥—É—Ä—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤

5. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ Worker**
   - –ú–µ—Ç—Ä–∏–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ jobs
   - –ê–ª–µ—Ä—Ç—ã –Ω–∞ –æ—à–∏–±–∫–∏
   - Dashboard –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

---

## üìù –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å Worker

- ‚úÖ Dockerfile –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç tsx –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è TypeScript
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç tsImport –¥–ª—è —Ä–µ–∑–æ–ª–≤–∞ path aliases
- ‚úÖ –ö–æ–ø–∏—Ä—É–µ—Ç lib/, types/ –∏ tsconfig.json
- ‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è
- ‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

---

**–î–∞—Ç–∞:** 2025-01-26  
**–ü–æ—Å–ª–µ–¥–Ω–∏–π commit:** `9abef9eb`


