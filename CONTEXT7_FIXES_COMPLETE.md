# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º (Context7 –∞–Ω–∞–ª–∏–∑)

**–î–∞—Ç–∞:** 2025-01-26  
**–°—Ç–∞—Ç—É—Å:** –ó–∞–≤–µ—Ä—à–µ–Ω–æ

---

## üéØ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

**–§–∞–π–ª:** `lib/utils/logger.ts`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ó–∞—â–∏—Ç–∞ `console.log` –ø—Ä–æ–≤–µ—Ä–∫–æ–π `NODE_ENV`
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Sentry
- –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã: `log`, `info`, `warn`, `error`, `debug`

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```typescript
import { logger } from '@/lib/utils/logger'

logger.log('Message') // –¢–æ–ª—å–∫–æ –≤ development
logger.error('Error', error, { context }) // –í—Å–µ–≥–¥–∞ + –∫–æ–Ω—Ç–µ–∫—Å—Ç
```

---

### 2. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ç–∏–ø–∏–∑–∞—Ü–∏—è (–∑–∞–º–µ–Ω–∞ `any` –Ω–∞ `unknown`)

#### `app/layout.tsx`
- ‚úÖ `Record<string, any>` ‚Üí `Record<string, unknown>`

#### `app/api/chat/route.ts`
- ‚úÖ `Record<string, any>` ‚Üí `Record<string, unknown>`
- ‚úÖ –í—Å–µ `catch (error: any)` ‚Üí `catch (error: unknown)` —Å type guards

#### `app/api/cron/backup/route.ts`
- ‚úÖ `catch (error: any)` ‚Üí `catch (error: unknown)` —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π `instanceof Error`

#### `app/api/billing/webhook/route.ts`
- ‚úÖ `catch (err: any)` ‚Üí `catch (err: unknown)` —Å type guard

---

### 3. ‚úÖ –ó–∞—â–∏—â–µ–Ω—ã –≤—Å–µ `console.log` –∏ `console.error`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- ‚úÖ `app/api/cron/backup/route.ts` - –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ `logger.log` –∏ `logger.error`
- ‚úÖ `app/api/billing/webhook/route.ts` - –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ `logger.error`
- ‚úÖ `app/api/chat/route.ts` - –∑–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ 10+ `console.log/error` –Ω–∞ `logger`
- ‚úÖ `app/api/crm/webhook/route.ts` - –∑–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ `console.log/error` –Ω–∞ `logger`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í—Å–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –∑–∞—â–∏—â–µ–Ω–æ –ø—Ä–æ–≤–µ—Ä–∫–æ–π `NODE_ENV`
- –î–æ–±–∞–≤–ª–µ–Ω –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –≤—Å–µ—Ö –æ—à–∏–±–æ–∫
- –£–ª—É—á—à–µ–Ω–∞ –æ—Ç–ª–∞–¥–∫–∞ —Å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –ª–æ–≥–∞–º–∏

---

### 4. ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –í—Å–µ `catch` –±–ª–æ–∫–∏ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç `unknown` –≤–º–µ—Å—Ç–æ `any`
- –î–æ–±–∞–≤–ª–µ–Ω—ã type guards: `error instanceof Error`
- –î–æ–±–∞–≤–ª–µ–Ω –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –≤—Å–µ—Ö –æ—à–∏–±–æ–∫ (endpoint, function, organizationId –∏ —Ç.–¥.)
- –£–ª—É—á—à–µ–Ω–∞ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö

**–ü—Ä–∏–º–µ—Ä:**
```typescript
// ‚ùå –ë—ã–ª–æ
} catch (error: any) {
  console.error('Error:', error)
}

// ‚úÖ –°—Ç–∞–ª–æ
} catch (error: unknown) {
  logger.error('Error:', error, {
    endpoint: '/api/chat',
    organizationId,
    context: 'additional info'
  })
}
```

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ | –§–∞–π–ª–æ–≤ |
|-----------|-----------|--------|
| –ó–∞–º–µ–Ω–∞ `any` –Ω–∞ `unknown` | 4 | 4 |
| –ó–∞—â–∏—Ç–∞ `console.log` | 8+ | 4 |
| –£–ª—É—á—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ | 15+ | 4 |
| –°–æ–∑–¥–∞–Ω–∏–µ —É—Ç–∏–ª–∏—Ç | 1 | 1 |

---

## ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ Context7 best practices

### TypeScript
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `unknown` –≤–º–µ—Å—Ç–æ `any`
- ‚úÖ Type guards –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –æ—à–∏–±–∫–∞–º–∏
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ó–∞—â–∏—Ç–∞ `console.log` –ø—Ä–æ–≤–µ—Ä–∫–æ–π `NODE_ENV`
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –≤ `catch` –±–ª–æ–∫–∞—Ö
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ type guards

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è (–Ω–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ):
1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è logger —Å Sentry –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è TODO –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
3. –£–ª—É—á—à–µ–Ω–∏–µ –ø–æ–∫—Ä—ã—Ç–∏—è —Ç–µ—Å—Ç–∞–º–∏

---

## üìù –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. `lib/utils/logger.ts` - **–ù–û–í–´–ô** —Ñ–∞–π–ª
2. `app/layout.tsx` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ç–∏–ø–∏–∑–∞—Ü–∏—è
3. `app/api/cron/backup/route.ts` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ç–∏–ø–∏–∑–∞—Ü–∏—è –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
4. `app/api/billing/webhook/route.ts` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ç–∏–ø–∏–∑–∞—Ü–∏—è –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
5. `app/api/chat/route.ts` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ç–∏–ø–∏–∑–∞—Ü–∏—è –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (10+ –º–µ—Å—Ç)
6. `app/api/crm/webhook/route.ts` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ç–∏–ø–∏–∑–∞—Ü–∏—è –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (5 –º–µ—Å—Ç)

---

**–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏–∑ Context7 –∞–Ω–∞–ª–∏–∑–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã! ‚úÖ**


