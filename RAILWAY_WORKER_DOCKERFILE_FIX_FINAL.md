# ‚úÖ Railway Worker - –§–∏–Ω–∞–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Dockerfile

## üîß –ü—Ä–æ–±–ª–µ–º—ã

–î–µ–ø–ª–æ–π –ø—Ä–æ–¥–æ–ª–∂–∞–ª –ø—Ä–æ–≤–∞–ª–∏–≤–∞—Ç—å—Å—è –∏–∑-–∑–∞:
1. –ü–æ–ø—ã—Ç–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `/app/services/worker/lib` –≤ production stage
2. –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å —É—Å–ª–æ–≤–∏—è–º–∏ –≤ Dockerfile
3. package.json –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª tsup.config.ts

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –£–ø—Ä–æ—â–µ–Ω–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ lib/ –≤ production stage

**–î–æ:**
```dockerfile
COPY --from=base /app/services/worker/lib ./services/worker/lib
```

**–ü–æ—Å–ª–µ:**
```dockerfile
# –°–æ–∑–¥–∞–µ–º services/worker/lib/ –∏ –∫–æ–ø–∏—Ä—É–µ–º —Ç—É–¥–∞ lib/ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø—É—Ç–µ–π –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
RUN mkdir -p ./services/worker/lib && cp -r ./lib/* ./services/worker/lib/
```

–¢–µ–ø–µ—Ä—å –º—ã –∫–æ–ø–∏—Ä—É–µ–º –∏–∑ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ `lib/`, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –Ω–∞ —Å—Ç—Ä–æ–∫–µ 37.

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω package.json

**–î–æ:**
```json
"build": "tsup src/index.ts --format esm --splitting --dts --out-dir dist --clean"
```

**–ü–æ—Å–ª–µ:**
```json
"build": "tsup"
```

–¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `tsup.config.ts` –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

### 3. –†–µ–∑—É–ª—å—Ç–∞—Ç –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–±–æ—Ä–∫–∏

```
ESM dist/index.js 47.02 KB
ESM ‚ö°Ô∏è Build success in 22ms
DTS ‚ö°Ô∏è Build success in 1151ms
```

## üìã –ò–∑–º–µ–Ω–µ–Ω–∏—è

1. ‚úÖ **services/worker/Dockerfile:**
   - –£–ø—Ä–æ—â–µ–Ω–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ lib/ –≤ production stage
   - –£–±—Ä–∞–Ω–∞ –ø–æ–ø—ã—Ç–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑ base stage

2. ‚úÖ **services/worker/package.json:**
   - –¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `tsup.config.ts`

## üöÄ –°—Ç–∞—Ç—É—Å

- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–ø—É—à–µ–Ω—ã –≤ GitHub (commit: `e90805dd`)
- ‚úÖ –°–±–æ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ
- ‚è≥ Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç –Ω–æ–≤—ã–π –¥–µ–ø–ª–æ–π

---

**–í—Ä–µ–º—è:** 2025-01-26  
**Commit:** `e90805dd`  
**–°—Ç–∞—Ç—É—Å:** ‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –¥–µ–ø–ª–æ—è


