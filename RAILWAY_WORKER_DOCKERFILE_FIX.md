# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Dockerfile Worker

## üîß –ü—Ä–æ–±–ª–µ–º–∞

Worker –¥–µ–ø–ª–æ–π –ø—Ä–æ–≤–∞–ª–∏–ª—Å—è (FAILED) –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã Dockerfile:
- Dockerfile –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–ª –∑–∞–ø—É—Å–∫ –∏–∑ `services/worker`, –Ω–æ Railway –∑–∞–ø—É—Å–∫–∞–µ—Ç –µ–≥–æ –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞ (`Root Directory = /`)
- Dockerfile –∫–æ–ø–∏—Ä–æ–≤–∞–ª `package.json` –∏–∑ –∫–æ—Ä–Ω—è –≤–º–µ—Å—Ç–æ `services/worker/package.json`
- Worker –Ω–µ –º–æ–≥ –Ω–∞–π—Ç–∏ –∏–º–ø–æ—Ä—Ç—ã –∏–∑ `../../../lib/` –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–ò—Å–ø—Ä–∞–≤–ª–µ–Ω Dockerfile –¥–ª—è —Ä–∞–±–æ—Ç—ã –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞:

1. **–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ package.json:**
   - –ö–æ–ø–∏—Ä—É–µ—Ç `services/worker/package.json` –≤–º–µ—Å—Ç–æ –∫–æ—Ä–Ω–µ–≤–æ–≥–æ

2. **–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:**
   - –ö–æ–ø–∏—Ä—É–µ—Ç –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç (`COPY . .`) –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ `lib/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
   - –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç Worker –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –∏–∑ –∫–æ—Ä–Ω—è —á–µ—Ä–µ–∑ `../../../lib/`

3. **–°–±–æ—Ä–∫–∞ –∏–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:**
   - –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ `/app/services/worker` –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ —Å–±–æ—Ä–∫–∏
   - –°–æ–±–∏—Ä–∞–µ—Ç Worker —á–µ—Ä–µ–∑ `npm ci` –∏ `npm run build`

4. **Production stage:**
   - –ö–æ–ø–∏—Ä—É–µ—Ç —Å–æ–±—Ä–∞–Ω–Ω—ã–π Worker (`services/worker/dist`)
   - –ö–æ–ø–∏—Ä—É–µ—Ç `lib/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –∏–∑ –∫–æ—Ä–Ω—è (–Ω—É–∂–Ω–∞ –¥–ª—è –∏–º–ø–æ—Ä—Ç–æ–≤)
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ production –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
   - –ó–∞–ø—É—Å–∫–∞–µ—Ç Worker –∏–∑ –∫–æ—Ä–Ω—è —á–µ—Ä–µ–∑ `node services/worker/dist/index.js`

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ Dockerfile –∏—Å–ø—Ä–∞–≤–ª–µ–Ω
2. ‚è≥ –ù—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤—ã–π –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ Railway
3. ‚è≥ –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è –¥–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è Worker

---

**–û–±–Ω–æ–≤–ª–µ–Ω–æ:** 2025-01-26


