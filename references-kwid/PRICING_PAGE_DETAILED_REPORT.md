# Детальный отчет по странице "Тарифные планы"

## URL
`https://aai.widgets.wearekwid.com/manage/1000373-worldwideservices/pricing`

## Title (Заголовок страницы)
"Тарифные планы - GPT Агент"

---

## Содержание отчета

1. [Общая структура страницы](#общая-структура-страницы)
2. [Основной контент](#основной-контент)
3. [Блок "Ваш текущий план"](#блок-ваш-текущий-план)
4. [Блок выбора количества ответов и периода оплаты](#блок-выбора-количества-ответов-и-периода-оплаты)
5. [Тарифные планы](#тарифные-планы)
6. [Блок "30-дневная гарантия возврата денег"](#блок-30-дневная-гарантия-возврата-денег)
7. [Блок "Часто задаваемые вопросы"](#блок-часто-задаваемые-вопросы)
8. [Страница "Управление подпиской"](#страница-управление-подпиской-lemon-squeezy)
9. [Зафиксированные изменения интерфейса](#зафиксированные-изменения-интерфейса)
10. [Layout и Spacing](#layout-и-spacing)
11. [Компонентная карта страницы](#компонентная-карта-страницы)
12. [Визуальное разделение секций](#визуальное-разделение-секций)
13. [Цветовая палитра](#цветовая-палитра)
14. [Типографика](#типографика)
15. [Иконки и их расположение](#иконки-и-их-расположение)
16. [Grid система и Layout](#grid-система-и-layout)
17. [Анимации и переходы](#анимации-и-переходы)
18. [Пустые состояния и Edge Cases](#пустые-состояния-и-edge-cases)
19. [Список всех компонентов для реализации](#список-всех-компонентов-для-реализации)
20. [API спецификации](#api-спецификации-детальные)
21. [Детальные состояния загрузки](#детальные-состояния-загрузки)
22. [Responsive Design (точные breakpoints)](#responsive-design-точные-breakpoints)
23. [Z-index слои](#z-index-слои)
24. [Focus states (детальные)](#focus-states-детальные)
25. [Hover/Active/Pressed states](#hoveractivepressed-states)
26. [Тени и эффекты (точные значения)](#тени-и-эффекты-точные-значения)
27. [Скругления (точные значения)](#скругления-точные-значения)
28. [Шрифты](#шрифты)
29. [Иконки (детальные требования)](#иконки-детальные-требования)
30. [Бизнес-логика](#бизнес-логика)
31. [Обработка ошибок (детальная)](#обработка-ошибок-детальная)
32. [Производительность](#производительность)
33. [Безопасность](#безопасность)
34. [Тестирование](#тестирование)
35. [Примеры кода](#примеры-кода)
36. [Логирование и мониторинг](#логирование-и-мониторинг)
37. [Доступность (расширенная)](#доступность-расширенная)
38. [Интернационализация (i18n)](#интернационализация-i18n)
39. [Деплой и окружения](#деплой-и-окружения)
40. [Версионирование API](#версионирование-api)
41. [Документация для пользователей](#документация-для-пользователей)

---

## Общая структура страницы

### Верхняя панель (Header)
**Примечание:** Полная детализация Header находится в отдельном файле `HEADER_DETAILED_REPORT.md`

1. **Глобальный поиск** (searchbox)
   - Тип: searchbox
   - Ref: e16
   - Placeholder: "Глобальный поиск"
   - Иконка: img (ref=e13)
   - Функция: Поиск по платформе

2. **Ссылка "30.10.2025"** (красная кнопка с предупреждением)
   - Тип: link
   - Ref: e18
   - URL: `/manage/1000373-worldwideservices/pricing`
   - Текст: "30.10.2025"
   - Иконка: img (ref=e19)
   - Функция: Уведомление об истечении лицензии, редирект на страницу тарифов
   - Визуально: Красная кнопка/ссылка с предупреждением

3. **Кнопка "Открыть уведомления"**
   - Тип: button
   - Ref: e448 (может меняться)
   - Содержимое:
     - Текст: "Открыть уведомления"
     - Иконка: img (ref=e450)
     - Бейдж с количеством: "1" (generic, ref=e455)
   - Функция: Открывает диалог с уведомлениями
   - Поведение: При клике открывается панель уведомлений справа

4. **Кнопка "Меню пользователя"**
   - Тип: button
   - Ref: e24
   - Содержимое:
     - Аватар пользователя (img, ref=e25)
       - Alt text: "Аватар Admin"
   - Функция: Открывает меню пользователя с опциями профиля

---

## Основной контент

### Заголовок страницы
- **Тип:** heading (level=1)
- **Ref:** e31
- **Текст:** "Тарифные планы"

---

### Блок "Ваш текущий план"

#### Структура блока:
- **Контейнер:** generic (ref=e37)
  - **Внутренний контейнер:** generic (ref=e38)

#### Элементы:

1. **Заголовок "Ваш текущий план:"**
   - Тип: heading (level=2)
   - Ref: e40
   - Текст: "Ваш текущий план:"

2. **Текст плана:**
   - Тип: generic
   - Ref: e41
   - Текст: "Scale (15,000 ответов ИИ в месяц)"
   - **Функция:** Отображает название текущего плана и количество ответов

3. **Информация о лицензии:**
   - **Контейнер:** generic (ref=e42)
     - **Внутренний контейнер:** generic (ref=e43)
       - Иконка: img (ref=e44)
       - Текст: generic (ref=e46)
         - Содержимое: "Лицензия истекла: 30.10.2025"
   - **Функция:** Отображает дату истечения лицензии с предупреждением
   - **Визуально:** Иконка предупреждения + красный текст

4. **Информация о платежном цикле:**
   - **Контейнер:** generic (ref=e47)
     - Иконка: img (ref=e48)
     - Текст: generic (ref=e51)
       - Содержимое: "Платежный цикл: Ежемесячно"
     - **Кнопка "Перейти на годовой"**
       - Тип: button
       - Ref: e52
       - Содержимое:
         - Иконка: img (ref=e53)
         - Текст: "Перейти на годовой"
       - **Функция:** Переключает переключатель периода оплаты на "Ежегодно" и обновляет цены
       - **Поведение:** При клике автоматически переключает на годовую оплату

5. **Прогресс использования:**
   - **Контейнер:** generic (ref=e55)
     - Иконка: img (ref=e56)
     - **Внутренний контейнер:** generic (ref=e59)
       - **Текст использования:** generic (ref=e60)
         - Содержимое: "Использовано: 1,574 из 15,000"
       - **Процент:** generic (ref=e61)
         - Содержимое: "10% использовано"
   - **Функция:** Отображает прогресс использования ответов ИИ
   - **Визуально:** Прогресс-бар с процентами

6. **Кнопка "Управление подпиской"**
   - Тип: button
   - Ref: e65
   - Содержимое:
     - Текст: generic (ref=e66)
       - Содержимое: "Управление подпиской"
   - **Функция:** Редиректит на внешний сервис управления подпиской (Lemon Squeezy)
   - **URL редиректа:** `https://subscriptions.wearekwid.com/billing?expires={timestamp}&test_mode=0&user={user_id}&signature={signature}`
   - **Поведение:** Открывается в новой вкладке/окне, переход на страницу управления подпиской Lemon Squeezy

---

### Блок выбора количества ответов и периода оплаты

#### Структура блока:
- **Контейнер:** generic (ref=e67)
  - **Блок выбора ответов:** generic (ref=e68)
  - **Блок переключателя периода:** generic (ref=e71)

#### 1. Выпадающий список "Ответов ИИ:"

- **Тип:** combobox
- **Ref:** e70
- **Состояние:** active (когда открыт)
- **Структура:**
  - **Label:** generic (ref=e69)
    - Текст: "Ответов ИИ:"
  - **Поле выбора:** combobox (ref=e70)
    - **Опции:**
      - option "1,000"
      - option "2,500"
      - option "5,000"
      - option "10,000"
      - option "15,000" [selected] (по умолчанию)
      - option "20,000"
      - option "20,000+"
- **Функция:** Изменяет цены и доступность тарифов для всех планов
- **Поведение:** 
  - При открытии показывает список опций
  - При выборе опции обновляет цены всех тарифов
  - Синхронизируется с выпадающими списками внутри каждого тарифа

#### 2. Переключатель периода оплаты:

- **Контейнер:** generic (ref=e71)
  - **Кнопка "Ежемесячно"**
    - Тип: button
    - Ref: e72
    - **Состояние:** active (когда выбрано ежемесячно)
    - **Функция:** Переключение на ежемесячную оплату
    - **Поведение:** 
      - При клике устанавливает состояние [active]
      - Обновляет цены всех планов на ежемесячные
      - Обновляет текст кнопок ("Выбрать план" вместо "Запросить счёт")
      - Обновляет текст "Оплачивается ежемесячно" / "Оплачивается ежегодно"
  
  - **Кнопка "Ежегодно"**
    - Тип: button
    - Ref: e73
    - **Состояние:** active (когда выбрано ежегодно)
    - **Функция:** Переключение на годовую оплату
    - **Поведение:** 
      - При клике устанавливает состояние [active]
      - Обновляет цены всех планов на годовые (скидка ~17%)
      - Обновляет текст кнопок ("Запросить счёт" для планов 15,000+ ответов)
      - Обновляет текст "Оплачивается ежегодно"

---

## Тарифные планы

### Структура блока тарифов:
- **Контейнер:** generic (ref=e74)
  - **Внутренний контейнер:** generic (ref=e75)
    - **План Launch:** generic (ref=e76)
    - **План Scale:** generic (ref=e135)
    - **План Max:** generic (ref=e209)

---

### План "Launch"

#### Структура карточки:
- **Контейнер:** generic (ref=e76)
  - **Верхняя часть:** generic (ref=e77)
    - Иконка: img (ref=e79)
    - Заголовок: heading "Launch" (level=2, ref=e81)
  - **Блок цены:** generic (ref=e82)
    - Цена: generic (ref=e83)
      - Содержимое: "$18" (ежемесячно) или "$15" (ежегодно)
    - Период: generic (ref=e84)
      - Содержимое: "/месяц"
  - **Статус:** paragraph (ref=e85)
    - Содержимое: "Недоступно для этого количества ответов" (когда недоступен)
    - ИЛИ: "Оплачивается ежемесячно" / "Оплачивается ежегодно" (когда доступен)
  - **Блок "Что включено":** generic (ref=e86)
  - **Кнопка действия:** generic (ref=e134)

#### Что включено:
- **Заголовок:** heading "Что включено" (level=3, ref=e87)
- **Список:** list (ref=e88)
  - **listitem (ref=e89):**
    - Иконка: img (ref=e90)
    - Текст: generic (ref=e92)
      - Содержимое: "1 агентов"
  
  - **listitem (ref=e93):**
    - Иконка: img (ref=e94)
    - Текст: generic (ref=e96)
      - Содержимое: "500 статей базы знаний"
  
  - **listitem (ref=e97):**
    - Иконка: img (ref=e98)
    - **Контейнер:** generic (ref=e101)
      - **Выпадающий список:** combobox (ref=e102)
        - Опции: "1,000", "2,500", "5,000", "10,000", "15,000" [selected], "20,000", "20,000+"
      - Текст: generic (ref=e103)
        - Содержимое: "Ответов / месяц"
    - **Функция:** Изменяет количество ответов для этого конкретного тарифа (синхронизируется с основным списком)
  
  - **listitem (ref=e104):**
    - Иконка: img (ref=e105)
    - Текст: generic (ref=e107)
      - Содержимое: "Начальные инструкции агента:"
      - Значение: generic (ref=e108)
        - Содержимое: "До 20,000 символов"
  
  - **listitem (ref=e109):**
    - Иконка: img (ref=e110)
    - Текст: generic (ref=e112)
      - Содержимое: "Отправка изображений, аудио, видео и документов"
  
  - **listitem (ref=e113):**
    - Иконка: img (ref=e114)
    - Текст: generic (ref=e116)
      - Содержимое: "Входящие голосовые сообщения"
  
  - **listitem (ref=e117):**
    - Иконка: img (ref=e118)
    - Текст: generic (ref=e120)
      - Содержимое: "Входящие сообщения с изображениями"
  
  - **listitem (ref=e121):**
    - Иконка: img (ref=e122)
    - Текст: generic (ref=e124)
      - Содержимое: "Обновление полей сделок и контактов"
  
  - **listitem (ref=e125):**
    - Иконка: img (ref=e126)
    - **Контейнер:** generic (ref=e128)
      - Текст: "Доступные модели ИИ:"
      - **Список моделей:** list (ref=e129)
        - **listitem (ref=e130):** "OpenAI GPT-4.1"
        - **listitem (ref=e132):** "OpenAI GPT-5"

#### Кнопка действия:
- **Контейнер:** generic (ref=e134)
  - **Кнопка "Недоступно"** (когда план недоступен)
    - Тип: button
    - Состояние: disabled
    - Содержимое:
      - Текст: generic
        - Содержимое: "Недоступно"
    - **Функция:** Неактивна, план недоступен для выбранного количества ответов
  
  - **Кнопка "Выбрать план"** (когда план доступен)
    - Тип: button
    - Содержимое:
      - Текст: "Выбрать план"
      - Иконка: img
    - **Функция:** Инициирует процесс выбора/покупки плана
    - **Поведение:** Открывает модальное окно или редиректит на страницу оплаты

#### Изменения при разных настройках:

**При выборе 1,000 ответов (ежегодно):**
- Цена: "$15" /месяц
- Статус: "Оплачивается ежегодно" (вместо "Недоступно для этого количества ответов")
- Цена за разговор: Появляется "Около $0.05 за разговор"
- Кнопка: "Выбрать план" (активна, вместо "Недоступно" disabled)

**При выборе 15,000+ ответов:**
- Статус: "Недоступно для этого количества ответов"
- Кнопка: "Недоступно" (disabled)

---

### План "Scale" (Текущий план)

#### Структура карточки:
- **Контейнер:** generic (ref=e135)
  - **Верхняя часть:** generic (ref=e136)
    - **Бейдж:** generic (ref=e137)
      - Содержимое: "Текущий план" (когда это текущий план пользователя)
      - ИЛИ: "Самый популярный" (когда выбран 1,000 ответов ежегодно)
    - **Заголовок:** generic (ref=e138)
      - Иконка: img (ref=e140)
      - Заголовок: heading "Scale" (level=2, ref=e142)
  - **Блок цены:** generic (ref=e143)
    - Цена: generic (ref=e144)
      - Содержимое: "$578" (ежемесячно) или "$482" (ежегодно) или "$38" (при 1,000 ответов ежегодно)
    - Период: generic (ref=e145)
      - Содержимое: "/месяц"
  - **Статус:** paragraph (ref=e146)
    - Содержимое: "Оплачивается ежемесячно" или "Оплачивается ежегодно"
  - **Цена за разговор:** generic (ref=e147)
    - Иконка: img (ref=e148)
    - Текст: "Около $0.13 за разговор" (ежемесячно, 15,000 ответов)
    - ИЛИ: "Около $0.11 за разговор" (ежегодно, 15,000 ответов)
    - ИЛИ: "Около $0.13 за разговор" (ежегодно, 1,000 ответов)
    - Иконка: img (ref=e151)
  - **Блок "Что включено":** generic (ref=e153)
  - **Кнопка действия:** button (ref=e204 или e456)

#### Что включено:
- **Заголовок:** heading "Что включено" (level=3, ref=e154)
- **Список:** list (ref=e155)
  - **listitem (ref=e156):**
    - Иконка: img (ref=e157)
    - Текст: generic (ref=e159)
      - Содержимое: "10 агентов"
  
  - **listitem (ref=e160):**
    - Иконка: img (ref=e161)
    - Текст: generic (ref=e163)
      - Содержимое: "100,000 статей базы знаний"
  
  - **listitem (ref=e164):**
    - Иконка: img (ref=e165)
    - **Контейнер:** generic (ref=e168)
      - **Выпадающий список:** combobox (ref=e169)
        - Опции: "1,000", "2,500", "5,000", "10,000", "15,000" [selected], "20,000", "20,000+"
      - Текст: generic (ref=e170)
        - Содержимое: "Ответов / месяц"
  
  - **listitem (ref=e171):**
    - Иконка: img (ref=e172)
    - Текст: generic (ref=e174)
      - Содержимое: "Начальные инструкции агента:"
      - Значение: generic (ref=e175)
        - Содержимое: "До 20,000 символов"
  
  - **listitem (ref=e176):**
    - Иконка: img (ref=e177)
    - Текст: generic (ref=e179)
      - Содержимое: "Отправка изображений, аудио, видео и документов"
  
  - **listitem (ref=e180):**
    - Иконка: img (ref=e181)
    - Текст: generic (ref=e183)
      - Содержимое: "Входящие голосовые сообщения"
  
  - **listitem (ref=e184):**
    - Иконка: img (ref=e185)
    - Текст: generic (ref=e187)
      - Содержимое: "Входящие сообщения с изображениями"
  
  - **listitem (ref=e188):**
    - Иконка: img (ref=e189)
    - Текст: generic (ref=e191)
      - Содержимое: "Обновление полей сделок и контактов"
  
  - **listitem (ref=e192):**
    - Иконка: img (ref=e193)
    - **Контейнер:** generic (ref=e195)
      - Текст: "Доступные модели ИИ:"
      - **Список моделей:** list (ref=e196)
        - **listitem (ref=e197):** "OpenAI GPT-4.1"
        - **listitem (ref=e199):** "OpenAI GPT-5"
        - **listitem (ref=e201):** "Google Gemini 2.5 Flash"

#### Кнопка действия:
- **Кнопка "Выбрать план"** (ежемесячно или ежегодно при 1,000 ответов)
  - Тип: button
  - Ref: e204 (ежемесячно) или e458 (может меняться)
  - Содержимое:
    - Текст: generic (ref=e206)
      - Содержимое: "Выбрать план"
    - Иконка: img (ref=e207)
  - **Функция:** Инициирует процесс выбора/покупки плана
  
- **Кнопка "Запросить счёт"** (ежегодно при 15,000+ ответов)
  - Тип: button
  - Ref: e456 (может меняться)
  - Содержимое:
    - Текст: generic (ref=e206)
      - Содержимое: "Запросить счёт"
    - Иконка: img (ref=e207)
  - **Функция:** Открывает форму запроса счета для годовой оплаты больших объемов

#### Изменения при разных настройках:

**При переключении "Ежемесячно" → "Ежегодно" (15,000 ответов):**
- Цена: "$578" → "$482" /месяц
- Текст: "Оплачивается ежемесячно" → "Оплачивается ежегодно"
- Цена за разговор: "$0.13" → "$0.11 за разговор"
- Кнопка: "Выбрать план" → "Запросить счёт"

**При выборе 1,000 ответов (ежегодно):**
- Бейдж: "Текущий план" → "Самый популярный"
- Цена: "$482" → "$38" /месяц
- Цена за разговор: "$0.11" → "$0.13 за разговор"
- Кнопка: "Запросить счёт" → "Выбрать план"

**При выборе 20,000+ ответов (ежегодно):**
- Цена: Исчезает, заменяется на "Связаться с нами"
- Кнопка: "Запросить счёт" → "Связаться с нами"

---

### План "Max"

#### Структура карточки:
- **Контейнер:** generic (ref=e209)
  - **Верхняя часть:** generic (ref=e210)
    - **Заголовок:** generic (ref=e211)
      - Иконка: img (ref=e213)
      - Заголовок: heading "Max" (level=2, ref=e215)
  - **Блок цены:** generic (ref=e216)
    - Цена: generic (ref=e217)
      - Содержимое: "$973" (ежемесячно) или "$811" (ежегодно) или "$75" (при 1,000 ответов ежегодно)
    - Период: generic (ref=e218)
      - Содержимое: "/месяц"
  - **Статус:** paragraph (ref=e219)
    - Содержимое: "Оплачивается ежемесячно" или "Оплачивается ежегодно"
  - **Цена за разговор:** generic (ref=e220)
    - Иконка: img (ref=e221)
    - Текст: "Около $0.23 за разговор" (ежемесячно, 15,000 ответов)
    - ИЛИ: "Около $0.19 за разговор" (ежегодно, 15,000 ответов)
    - ИЛИ: "Около $0.26 за разговор" (ежегодно, 1,000 ответов)
    - Иконка: img (ref=e224)
  - **Блок "Что включено":** generic (ref=e226)
  - **Кнопка действия:** button (ref=e280 или e459)

#### Что включено:
- **Заголовок:** heading "Что включено" (level=3, ref=e227)
- **Список:** list (ref=e228)
  - **listitem (ref=e229):**
    - Иконка: img (ref=e230)
    - Текст: generic (ref=e232)
      - Содержимое: "Неограниченное количество агентов"
  
  - **listitem (ref=e233):**
    - Иконка: img (ref=e234)
    - Текст: generic (ref=e236)
      - Содержимое: "Неограниченное количество статей базы знаний"
  
  - **listitem (ref=e237):**
    - Иконка: img (ref=e238)
    - **Контейнер:** generic (ref=e241)
      - **Выпадающий список:** combobox (ref=e242)
        - Опции: "1,000", "2,500", "5,000", "10,000", "15,000" [selected], "20,000", "20,000+"
      - Текст: generic (ref=e243)
        - Содержимое: "Ответов / месяц"
  
  - **listitem (ref=e244):**
    - Иконка: img (ref=e245)
    - Текст: generic (ref=e247)
      - Содержимое: "Начальные инструкции агента:"
      - Значение: generic (ref=e248)
        - Содержимое: "До 40,000 символов"
        - Примечание: generic (ref=e249)
          - Содержимое: "(20k для моделей Claude)"
  
  - **listitem (ref=e250):**
    - Иконка: img (ref=e251)
    - Текст: generic (ref=e253)
      - Содержимое: "Отправка изображений, аудио, видео и документов"
  
  - **listitem (ref=e254):**
    - Иконка: img (ref=e255)
    - Текст: generic (ref=e257)
      - Содержимое: "Входящие голосовые сообщения"
  
  - **listitem (ref=e258):**
    - Иконка: img (ref=e259)
    - Текст: generic (ref=e261)
      - Содержимое: "Входящие сообщения с изображениями"
  
  - **listitem (ref=e262):**
    - Иконка: img (ref=e263)
    - Текст: generic (ref=e265)
      - Содержимое: "Обновление полей сделок и контактов"
  
  - **listitem (ref=e266):**
    - Иконка: img (ref=e267)
    - **Контейнер:** generic (ref=e269)
      - Текст: "Доступные модели ИИ:"
      - **Список моделей:** list (ref=e270)
        - **listitem (ref=e271):** "OpenAI GPT-4.1"
        - **listitem (ref=e273):** "OpenAI GPT-5"
        - **listitem (ref=e275):** "Google Gemini 2.5 Flash"
        - **listitem (ref=e277):** "Claude Sonnet 4"

#### Кнопка действия:
- **Кнопка "Выбрать план"** (ежемесячно или ежегодно при 1,000 ответов)
  - Тип: button
  - Ref: e280 (ежемесячно) или e459 (может меняться)
  - Содержимое:
    - Текст: generic (ref=e282)
      - Содержимое: "Выбрать план"
    - Иконка: img (ref=e283)
  - **Функция:** Инициирует процесс выбора/покупки плана
  
- **Кнопка "Запросить счёт"** (ежегодно при 15,000+ ответов)
  - Тип: button
  - Ref: e457 (может меняться)
  - Содержимое:
    - Текст: generic (ref=e282)
      - Содержимое: "Запросить счёт"
    - Иконка: img (ref=e283)
  - **Функция:** Открывает форму запроса счета для годовой оплаты больших объемов

#### Изменения при разных настройках:

**При переключении "Ежемесячно" → "Ежегодно" (15,000 ответов):**
- Цена: "$973" → "$811" /месяц
- Текст: "Оплачивается ежемесячно" → "Оплачивается ежегодно"
- Цена за разговор: "$0.23" → "$0.19 за разговор"
- Кнопка: "Выбрать план" → "Запросить счёт"

**При выборе 1,000 ответов (ежегодно):**
- Цена: "$811" → "$75" /месяц
- Цена за разговор: "$0.19" → "$0.26 за разговор"
- Кнопка: "Запросить счёт" → "Выбрать план"

**При выборе 20,000+ ответов (ежегодно):**
- Цена: Исчезает, заменяется на "Связаться с нами"
- Кнопка: "Запросить счёт" → "Связаться с нами"

---

## Блок "30-дневная гарантия возврата денег"

#### Структура блока:
- **Контейнер:** generic (ref=e286)
  - Иконка: img (ref=e288)
  - **Внутренний контейнер:** generic (ref=e290)
    - **Заголовок:** heading "30-дневная гарантия возврата денег" (level=3, ref=e291)
    - **Текст:** paragraph (ref=e292)
      - Содержимое: "Попробуйте любой план без риска. Если вас что-то не устроит в течение первых 30 дней, мы вернём деньги."
    - **Дополнительный текст:** paragraph (ref=e293)
      - Содержимое: "Наша служба поддержки готова помочь вам сменить план или отменить подписку в любое время."

---

## Блок "Часто задаваемые вопросы"

#### Структура блока:
- **Контейнер:** generic (ref=e294)
  - **Заголовок и описание:** generic (ref=e295)
    - **Заголовок:** heading "Часто задаваемые вопросы" (level=2, ref=e296)
    - **Описание:** paragraph (ref=e297)
      - Содержимое: "Найдите ответы на распространенные вопросы о наших тарифах и планах"
  - **Список вопросов:** generic (ref=e299)

### Вопросы (кнопки-аккордеоны):

#### 1. "Могу ли я изменить свой план позже?"

- **Тип:** button
- **Ref:** e301
- **Состояние:** active (когда раскрыт)
- **Структура:**
  - **Контейнер вопроса:** generic (ref=e300)
    - **Кнопка:** button (ref=e301)
      - Текст: generic (ref=e302)
        - Содержимое: "Могу ли я изменить свой план позже?"
      - Иконка: img (ref=e305 или e461, меняется при раскрытии)
    - **Ответ (при раскрытии):** generic (ref=e462)
      - Содержимое: "Да, вы можете изменить план в любой момент. Чтобы повысить тариф, нажмите "Обновить план" — разница будет списана сразу. Чтобы понизить тариф, оформите более низкий план через "Купить" или свяжитесь с поддержкой, чтобы применить изменение со следующего платежного периода."
- **Функция:** Раскрывает/скрывает ответ
- **Поведение:** 
  - При клике раскрывается, показывая ответ
  - При повторном клике скрывается
  - Иконка меняется при раскрытии/скрытии

#### 2. "Предоставляете ли вы возврат средств?"

- **Тип:** button
- **Ref:** e308
- **Структура:**
  - **Кнопка:** button (ref=e308)
    - Текст: generic (ref=e309)
      - Содержимое: "Предоставляете ли вы возврат средств?"
    - Иконка: img (ref=e312)
  - **Ответ (при раскрытии):** "Мы предлагаем 30-дневную гарантию возврата денег на все новые тарифные планы. Если вы не удовлетворены нашим сервисом, свяжитесь с нашей службой поддержки в течение 30 дней с момента покупки."
- **Функция:** Раскрывает/скрывает ответ
- **Поведение:** При клике раскрывается, показывая ответ. При повторном клике скрывается.

#### 3. "Что произойдет, если я превышу лимиты моего плана?"

- **Тип:** button
- **Ref:** e315
- **Структура:**
  - **Кнопка:** button (ref=e315)
    - Текст: generic (ref=e316)
      - Содержимое: "Что произойдет, если я превышу лимиты моего плана?"
    - Иконка: img (ref=e319)
  - **Ответ (при раскрытии):** "Если вы достигли лимитов плана, вы можете подождать их сброса в следующем месяце, перейти на план выше или оформить новую подписку, чтобы продолжить пользоваться сервисом сразу."
- **Функция:** Раскрывает/скрывает ответ
- **Поведение:** При клике раскрывается, показывая ответ. При повторном клике скрывается.

#### 4. "Нужны ли мне собственные API‑ключи OpenAI?"

- **Тип:** button
- **Ref:** e322
- **Структура:**
  - **Кнопка:** button (ref=e322)
    - Текст: generic (ref=e323)
      - Содержимое: "Нужны ли мне собственные API‑ключи OpenAI?"
    - Иконка: img (ref=e326)
  - **Ответ (при раскрытии):** "Нет, собственные ключи OpenAI не нужны. Все токены ИИ включены в стоимость вашей подписки, поэтому вы можете начать пользоваться сервисом сразу, без дополнительной настройки и расходов."
- **Функция:** Раскрывает/скрывает ответ
- **Поведение:** При клике раскрывается, показывая ответ. При повторном клике скрывается.

#### 5. "Есть ли дополнительные платежи за разговоры?"

- **Тип:** button
- **Ref:** e329
- **Структура:**
  - **Кнопка:** button (ref=e329)
    - Текст: generic (ref=e330)
      - Содержимое: "Есть ли дополнительные платежи за разговоры?"
    - Иконка: img (ref=e333)
  - **Ответ (при раскрытии):** "Нет, дополнительных платежей за разговоры нет. Всё включено в стоимость вашей подписки."
- **Функция:** Раскрывает/скрывает ответ
- **Поведение:** При клике раскрывается, показывая ответ. При повторном клике скрывается.

---

## Страница "Управление подпиской" (Lemon Squeezy)

### URL редиректа:
`https://subscriptions.wearekwid.com/billing?expires={timestamp}&test_mode=0&user={user_id}&signature={signature}`

### Title:
"Lemon Squeezy"

### Структура страницы:

#### Боковая панель (Sidebar):
- **Контейнер:** complementary (ref=e3)
  - **Логотип и название:**
    - Контейнер: generic (ref=e4)
      - Логотип: img "KWID" (ref=e7)
      - Название: generic (ref=e8)
        - Содержимое: "KWID"
  
  - **Заголовок:**
    - heading "Manage your subscription and billing settings" (level=2, ref=e9)
      - paragraph (ref=e10)
        - Содержимое: "Manage your subscription and billing settings"
  
  - **Описание:**
    - paragraph (ref=e12)
      - Содержимое: "View payment history, download invoices, and manage subscriptions and payment methods."
  
  - **Ссылка на поддержку:**
    - paragraph (ref=e13)
      - Текст: "Need help with your subscription?"
      - Ссылка: link "Visit Lemon Squeezy Support" (ref=e14)
        - URL: `https://www.lemonsqueezy.com/help`
  
  - **Кнопка "Назад":**
    - paragraph (ref=e15)
      - Ссылка: link "← Back" (ref=e16)
        - URL: `https://subscriptions.wearekwid.com`
  
  - **Футер:**
    - Контейнер: generic (ref=e17)
      - Ссылка на Lemon Squeezy: link (ref=e18)
        - URL: `https://www.lemonsqueezy.com/`
        - Логотип: img (ref=e19)
      - Контейнер: generic (ref=e21)
        - Текст: paragraph (ref=e22)
          - Содержимое: "Merchant of Record services provided to KWID by Lemon Squeezy"
        - Ссылки: paragraph (ref=e23)
          - Ссылка "Terms" (ref=e24)
            - URL: `https://www.lemonsqueezy.com/buyer-terms`
          - Текст: "·"
          - Ссылка "Privacy" (ref=e25)
            - URL: `https://www.lemonsqueezy.com/privacy`
          - Текст: "·"
          - Ссылка "Help" (ref=e26)
            - URL: `https://www.lemonsqueezy.com/help`

#### Основной контент:

##### 1. Раздел "Subscriptions" (Подписки):
- **Контейнер:** generic (ref=e29)
  - **Заголовок:** heading "Subscriptions" (level=3, ref=e30)
  - **Кнопка "Show expired subscriptions":**
    - Тип: button
    - Ref: e33
    - Содержимое:
      - Иконка: img (ref=e35)
      - Текст: generic (ref=e37)
        - Содержимое: "Show expired subscriptions"
      - Количество: generic (ref=e38)
        - Содержимое: "(5)"
    - **Функция:** Показывает/скрывает истекшие подписки

##### 2. Раздел "Billing information" (Платежная информация):
- **Контейнер:** generic (ref=e39)
  - **Заголовок и кнопка редактирования:**
    - Контейнер: generic (ref=e40)
      - **Заголовок:** heading "Billing information" (level=3, ref=e41)
      - **Кнопка редактирования:** button (ref=e42)
        - Иконка: img (ref=e44)
        - **Функция:** Открывает форму редактирования платежной информации
  
  - **Поля информации:**
    - Контейнер: generic (ref=e46)
      - **Company:** generic (ref=e48)
      - **Email:** generic (ref=e50)
      - **Address:** generic (ref=e52)
      - **Tax ID:** generic (ref=e54)

##### 3. Раздел "Payment methods" (Способы оплаты):
- **Контейнер:** generic (ref=e55)
  - **Заголовок и кнопка добавления:**
    - Контейнер: generic (ref=e56)
      - **Заголовок:** heading "Payment methods" (level=3, ref=e57)
      - **Кнопка добавления:** button (ref=e58)
        - Иконка: img (ref=e60)
        - **Функция:** Открывает форму добавления способа оплаты
  
  - **Сообщение (если нет способов оплаты):**
    - paragraph (ref=e63)
      - Содержимое: "No payment methods"

##### 4. Раздел "Billing history" (История платежей):
- **Контейнер:** generic (ref=e64)
  - **Заголовок:** heading "Billing history" (level=3, ref=e65)
  - **Таблица платежей:**
    - Контейнер: generic (ref=e68)
      - **Таблица:** table (ref=e70)
        - **Заголовок таблицы:** rowgroup (ref=e71)
          - **Строка заголовка:** row (ref=e72)
            - **Ячейка "Date":** cell (ref=e73)
              - heading "Date" (level=4, ref=e74)
                - button "Date" (ref=e75)
                  - **Функция:** Сортировка по дате
            - **Ячейка "Method":** cell (ref=e77)
              - heading "Method" (level=4, ref=e78)
            - **Ячейка "Status":** cell (ref=e79)
              - heading "Status" (level=4, ref=e80)
            - **Ячейка "Product":** cell (ref=e81)
              - heading "Product" (level=4, ref=e82)
            - **Ячейка "Amount":** cell (ref=e83)
              - heading "Amount" (level=4, ref=e84)
            - **Ячейка действий:** cell (ref=e85)
              - heading (level=4)
        
        - **Тело таблицы:** rowgroup (ref=e86)
          - **Примеры строк:**
            - **Строка 1:** row (ref=e87)
              - Дата: "30 Sep, 2025"
              - Метод: "6392" (с иконкой карты, img ref=e92)
              - Статус: "Paid" (с иконкой, img ref=e99)
              - Продукт: "AAI Scale (Monthly 15000)"
              - Сумма: "$433.50"
              - Кнопка действий: button (ref=e107)
                - Иконка: img (ref=e108)
                - **Функция:** Открывает детали платежа/скачивание счета
            
            - **Строка 2:** row (ref=e110)
              - Дата: "18 Aug, 2025"
              - Метод: "2281" (с иконкой карты)
              - Статус: "Paid"
              - Продукт: "AAI Scale (Monthly 15000)"
              - Сумма: "$433.50"
            
            - **Строка 3:** row (ref=e135)
              - Дата: "18 Aug, 2025"
              - Метод: "1898" (с иконкой карты)
              - Статус: "Void" (с иконкой, img ref=e147)
              - Продукт: "AAI Scale (Monthly 5000)"
              - Сумма: "$107.88"
            
            - **Строка 4:** row (ref=e158)
              - Дата: "30 Jul, 2025"
              - Метод: "1898" (с иконкой карты)
              - Статус: "Paid"
              - Продукт: "AAI Scale (Monthly 5000)"
              - Сумма: "$153.75"
            
            - **Строка 5:** row (ref=e181)
              - Дата: "22 Jul, 2025"
              - Метод: "2281" (с иконкой карты)
              - Статус: "Paid"
              - Продукт: "AAI Scale (Monthly 2500)"
              - Сумма: "$105.00"
            
            - **Строка 6:** row (ref=e206)
              - Дата: "22 Jul, 2025"
              - Метод: "2281" (с иконкой карты)
              - Статус: "Refunded" (с иконкой, img ref=e220)
              - Продукт: "AAI Launch (Monthly 1000)"
              - Сумма: "$18.00"
        
        - **Счетчик результатов:**
          - generic (ref=e232)
            - Содержимое: "6 results"

---

## Зафиксированные изменения интерфейса

### При переключении "Ежемесячно" → "Ежегодно":

#### Launch:
- Цена: "$18" → "$15" /месяц
- Статус: "Недоступно для этого количества ответов" → может стать доступным

#### Scale:
- Цена: "$578" → "$482" /месяц
- Текст: "Оплачивается ежемесячно" → "Оплачивается ежегодно"
- Цена за разговор: "$0.13" → "$0.11 за разговор"
- Кнопка: "Выбрать план" → "Запросить счёт"

#### Max:
- Цена: "$973" → "$811" /месяц
- Текст: "Оплачивается ежемесячно" → "Оплачивается ежегодно"
- Цена за разговор: "$0.23" → "$0.19 за разговор"
- Кнопка: "Выбрать план" → "Запросить счёт"

---

### При выборе 1,000 ответов (ежегодно):

#### Launch:
- Статус: "Недоступно для этого количества ответов" → "Оплачивается ежегодно"
- Цена: "$15" /месяц
- Цена за разговор: Появляется "Около $0.05 за разговор"
- Кнопка: "Недоступно" (disabled) → "Выбрать план" (активна)

#### Scale:
- Бейдж: "Текущий план" → "Самый популярный"
- Цена: "$482" → "$38" /месяц
- Цена за разговор: "$0.11" → "$0.13 за разговор"
- Кнопка: "Запросить счёт" → "Выбрать план"

#### Max:
- Цена: "$811" → "$75" /месяц
- Цена за разговор: "$0.19" → "$0.26 за разговор"
- Кнопка: "Запросить счёт" → "Выбрать план"

---

### При выборе 20,000+ ответов (ежегодно):

#### Launch:
- Статус: "Недоступно для этого количества ответов"
- Кнопка: "Недоступно" (disabled)

#### Scale:
- Цена: Исчезает, заменяется на "Связаться с нами"
- Кнопка: "Запросить счёт" → "Связаться с нами"

#### Max:
- Цена: Исчезает, заменяется на "Связаться с нами"
- Кнопка: "Запросить счёт" → "Связаться с нами"

---

## Выпадающие списки внутри тарифов

Каждый тариф содержит свой выпадающий список "Ответов / месяц" с теми же опциями:
- "1,000"
- "2,500"
- "5,000"
- "10,000"
- "15,000"
- "20,000"
- "20,000+"

**Функция:** Изменяет количество ответов для конкретного тарифа (синхронизируется с основным списком)

**Структура:**
- **Launch:** combobox (ref=e102)
- **Scale:** combobox (ref=e169)
- **Max:** combobox (ref=e242)

---

## Состояния элементов

### Переключатели "Ежемесячно" / "Ежегодно":
- **Обычное состояние:** Кнопка без атрибута [active]
- **Активное состояние:** Кнопка с атрибутом [active]
- **Поведение:** Только одна кнопка может быть активна одновременно

### FAQ аккордеоны:
- **Закрытое состояние:** Кнопка без атрибута [active], ответ скрыт
- **Открытое состояние:** Кнопка с атрибутом [active], ответ виден
- **Поведение:** Можно открыть несколько вопросов одновременно

### Выпадающие списки:
- **Обычное состояние:** combobox без атрибута [active]
- **Открытое состояние:** combobox с атрибутом [active]
- **Поведение:** При открытии показывает список опций

### Кнопки тарифов:
- **Активное состояние:** button без атрибута [disabled]
- **Неактивное состояние:** button с атрибутом [disabled]
- **Текст кнопок:**
  - "Недоступно" (disabled)
  - "Выбрать план" (активна)
  - "Запросить счёт" (активна)
  - "Связаться с нами" (активна)

---

## Технические детали для реализации

### Структура данных:

#### Текущий план пользователя:
```typescript
{
  planName: "Scale",
  responsesPerMonth: 15000,
  licenseExpires: "30.10.2025",
  paymentCycle: "monthly" | "yearly",
  used: 1574,
  total: 15000,
  percentage: 10
}
```

#### Тарифные планы:
```typescript
{
  launch: {
    monthlyPrice: 18,
    yearlyPrice: 15,
    features: [...],
    availableModels: ["OpenAI GPT-4.1", "OpenAI GPT-5"],
    maxInstructions: 20000
  },
  scale: {
    monthlyPrice: 578,
    yearlyPrice: 482,
    features: [...],
    availableModels: ["OpenAI GPT-4.1", "OpenAI GPT-5", "Google Gemini 2.5 Flash"],
    maxInstructions: 20000,
    isCurrent: true
  },
  max: {
    monthlyPrice: 973,
    yearlyPrice: 811,
    features: [...],
    availableModels: ["OpenAI GPT-4.1", "OpenAI GPT-5", "Google Gemini 2.5 Flash", "Claude Sonnet 4"],
    maxInstructions: 40000
  }
}
```

#### Динамические цены по количеству ответов:
- Цены меняются в зависимости от выбранного количества ответов
- При выборе 1,000 ответов цены значительно снижаются
- При выборе 20,000+ ответов показывается "Связаться с нами"

### Логика переключения периодов:
1. При клике на "Ежегодно":
   - Устанавливается состояние [active] на кнопке "Ежегодно"
   - Убирается состояние [active] с кнопки "Ежемесячно"
   - Пересчитываются цены всех планов (скидка ~17%)
   - Обновляется текст "Оплачивается ежегодно"
   - Меняются кнопки на "Запросить счёт" для планов 15,000+ ответов

2. При клике на "Ежемесячно":
   - Устанавливается состояние [active] на кнопке "Ежемесячно"
   - Убирается состояние [active] с кнопки "Ежегодно"
   - Пересчитываются цены всех планов на ежемесячные
   - Обновляется текст "Оплачивается ежемесячно"
   - Меняются кнопки на "Выбрать план"

### Логика выбора количества ответов:
1. При выборе опции в основном списке "Ответов ИИ:":
   - Обновляются цены всех тарифов
   - Обновляется доступность планов
   - Синхронизируются выпадающие списки внутри тарифов
   - Меняются кнопки действий

2. При выборе опции в списке внутри тарифа:
   - Обновляется цена только этого тарифа
   - Синхронизируется основной список

### Логика FAQ аккордеонов:
1. При клике на вопрос:
   - Если закрыт → открывается (добавляется [active], показывается ответ)
   - Если открыт → закрывается (убирается [active], скрывается ответ)
   - Иконка меняется при раскрытии/скрытии

### Редирект на управление подпиской:
- URL формируется с параметрами:
  - `expires`: timestamp истечения ссылки
  - `test_mode`: 0 (продакшн) или 1 (тест)
  - `user`: ID пользователя
  - `signature`: подпись для безопасности
- Открывается в новой вкладке/окне
- Страница принадлежит внешнему сервису Lemon Squeezy

---

## Протестированные элементы

### ✅ Полностью протестировано:

1. ✅ **Переключение "Ежемесячно" / "Ежегодно"**
   - Изменение цен для всех планов
   - Изменение текста кнопок
   - Изменение цены за разговор
   - Состояния [active] кнопок

2. ✅ **Выпадающий список "Ответов ИИ:"**
   - Все опции: 1,000, 2,500, 5,000, 10,000, 15,000, 20,000, 20,000+
   - Изменение цен при выборе разных значений
   - Изменение доступности планов
   - Изменение текста кнопок
   - Специальное поведение при 20,000+ (кнопка "Связаться с нами")
   - Состояние [active] при открытии

3. ✅ **Все FAQ вопросы (5 вопросов):**
   - Раскрытие/скрытие ответов
   - Полные тексты всех ответов зафиксированы
   - Состояние [active] при раскрытии
   - Изменение иконок при раскрытии/скрытии

4. ✅ **Кнопка "Управление подпиской":**
   - Редирект на внешний сервис Lemon Squeezy
   - Полная структура страницы управления подпиской зафиксирована
   - Все разделы и элементы страницы задокументированы

5. ✅ **Кнопка "Перейти на годовой":**
   - Автоматическое переключение на годовую оплату
   - Обновление цен и состояний

---

## Layout и Spacing

### Общая структура страницы
- **Максимальная ширина контента:** 1200px (центрирован)
- **Отступы от краев:** 24px (desktop), 16px (tablet), 12px (mobile)
- **Отступ между Header и Main Content:** 24px
- **Отступ между Sidebar и Main Content:** 24px

### Разделение секций
- **Отступ между секциями:** 48px (вертикальный)
- **Визуальное разделение секций:**
  - Каждая секция в отдельной карточке (card)
  - Фон карточки: белый (#FFFFFF)
  - Тень: `box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1)`
  - Скругление углов: `border-radius: 8px`
  - Внутренние отступы карточки: `padding: 24px`
  - Граница: `border: 1px solid #E5E7EB` (опционально)

### Отступы внутри секций
- **Отступ между заголовком секции и содержимым:** 16px
- **Отступ между тарифными планами:** 24px (горизонтальный)
- **Отступ между элементами в карточке тарифа:** 16px

---

## Компонентная карта страницы

### Полный список компонентов на странице "Тарифные планы"

#### Основная страница (`/pricing`)
1. **Heading (h1)** - "Тарифные планы"
2. **CurrentPlanCard** - карточка текущего плана
   - **Heading (h2)** - "Ваш текущий план:"
   - **Text** - название плана и количество ответов
   - **LicenseInfo** - информация о лицензии (иконка + текст)
   - **PaymentCycleInfo** - информация о платежном цикле
   - **Button** - "Перейти на годовой"
   - **ProgressBar** - прогресс использования
   - **Button** - "Управление подпиской"
3. **ResponseSelector** - выбор количества ответов
   - **Combobox** - "Ответов ИИ:" (1,000, 2,500, 5,000, 10,000, 15,000, 20,000, 20,000+)
4. **PeriodToggle** - переключатель периода оплаты
   - **Button** - "Ежемесячно" (active/inactive)
   - **Button** - "Ежегодно" (active/inactive)
5. **PricingPlans Grid** - сетка тарифных планов (3 плана)
   - **PlanCard "Launch"**
     - **Icon** - иконка плана
     - **Heading (h2)** - "Launch"
     - **Price** - цена с периодом
     - **Status** - статус плана
     - **Features List** - список функций
     - **Combobox** - выбор количества ответов (внутри плана)
     - **Button** - "Недоступно" / "Выбрать план"
   - **PlanCard "Scale"** (аналогично Launch)
     - **Badge** - "Текущий план" / "Самый популярный"
     - **PricePerConversation** - цена за разговор
   - **PlanCard "Max"** (аналогично Scale)
6. **GuaranteeCard** - карточка гарантии
   - **Icon** - иконка гарантии
   - **Heading (h3)** - "30-дневная гарантия возврата денег"
   - **Paragraph** - описание гарантии
7. **FAQ Section** - секция часто задаваемых вопросов
   - **Heading (h2)** - "Часто задаваемые вопросы"
   - **Description** - описание секции
   - **Accordion List** - список вопросов (5 вопросов)
     - **Accordion Item** - элемент аккордеона
       - **Button** - вопрос (active/inactive)
       - **Icon** - иконка раскрытия
       - **Answer** - ответ (показывается при раскрытии)

---

## Визуальное разделение секций

### Структура секции
Каждая секция представляет собой отдельную карточку (card) со следующими характеристиками:

#### Визуальные параметры карточки тарифа
- **Фон:** #FFFFFF (белый)
- **Тень:** 
  - `box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1)`
  - `box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05)` (при hover)
- **Граница:** 
  - `border: 1px solid #E5E7EB` (светло-серый)
  - `border: 2px solid #3B82F6` (синий, для текущего плана)
  - `border-radius: 8px`
- **Внутренние отступы:** 
  - `padding: 24px` (desktop)
  - `padding: 20px` (tablet)
  - `padding: 16px` (mobile)

---

## Цветовая палитра

### Основные цвета
- **Фон страницы:** #F9FAFB (светло-серый)
- **Фон карточек:** #FFFFFF (белый)
- **Фон overlay:** rgba(0, 0, 0, 0.5) (50% прозрачности черного)

### Цвета текста
- **Основной текст:** #111827 (темно-серый, почти черный)
- **Вторичный текст:** #6B7280 (серый)
- **Текст описаний:** #9CA3AF (светло-серый)
- **Текст ошибок:** #DC2626 (красный)
- **Текст успеха:** #10B981 (зеленый)

### Цвета элементов
- **Текущий план:**
  - Граница: #3B82F6 (синий, 2px)
  - Бейдж: #3B82F6 (синий фон, белый текст)
- **Кнопки:**
  - Primary: #3B82F6 (синий)
  - Disabled: #9CA3AF (серый)
- **Предупреждение лицензии:**
  - Фон: #DC2626 (красный)
  - Текст: #FFFFFF (белый)

---

## Типографика

### Шрифт
- **Семейство:** System font stack или кастомный шрифт
- **Базовый размер:** 16px
- **Line height:** 1.5 (24px)

### Заголовки
- **H1 (Заголовок страницы):**
  - Размер: 32px
  - Вес: 700 (bold)
  - Line height: 1.2
  - Цвет: #111827
  - Margin-bottom: 24px

- **H2 (Название плана):**
  - Размер: 24px
  - Вес: 700 (bold)
  - Line height: 1.3
  - Цвет: #111827

- **H3 (Заголовок секции):**
  - Размер: 18px
  - Вес: 600 (semi-bold)
  - Line height: 1.3
  - Цвет: #111827

### Текст
- **Цена:**
  - Размер: 36px
  - Вес: 700 (bold)
  - Цвет: #111827
- **Период оплаты:**
  - Размер: 16px
  - Вес: 400 (regular)
  - Цвет: #6B7280

---

## Иконки и их расположение

### Размеры иконок
- **Иконки планов:** 24px × 24px
- **Иконки в списке функций:** 16px × 16px
- **Иконки предупреждений:** 16px × 16px

### Иконки по элементам
- **Иконка плана Launch:** Rocket или аналогичная
- **Иконка плана Scale:** Scale или аналогичная
- **Иконка плана Max:** Star или аналогичная
- **Иконка предупреждения:** AlertTriangle
- **Иконка гарантии:** Shield или CheckCircle
- **Иконка аккордеона:** ChevronDown/ChevronUp

---

## Grid система и Layout

### Общая структура
- **Container:** max-width: 1200px, margin: 0 auto
- **Grid columns:** 12 колонок (desktop)
- **Gap между колонками:** 24px

### Расположение элементов

#### Тарифные планы
- **Grid layout:** 3 колонки на desktop (grid-template-columns: repeat(3, 1fr))
- **Gap:** 24px между планами
- **Tablet:** 2 колонки (grid-template-columns: repeat(2, 1fr))
- **Mobile:** 1 колонка (grid-template-columns: 1fr)

---

## Анимации и переходы

### Длительности
- **Быстрые переходы:** 150ms (hover эффекты)
- **Стандартные переходы:** 200ms (переключение периодов)
- **Медленные переходы:** 300ms (раскрытие аккордеона)

### Easing функции
- **Стандартный:** ease-in-out
- **Smooth:** cubic-bezier(0.4, 0, 0.2, 1)

### Анимации компонентов

#### Переключение периодов
- **Длительность:** 200ms
- **Эффект:** Плавное изменение цен

#### Аккордеон FAQ
- **Раскрытие:**
  - height: 0 → auto
  - opacity: 0 → 1
  - transition: 300ms

---

## Пустые состояния и Edge Cases

### Edge Cases

#### Очень большие цены
- **Обработка:** Форматирование с разделителями тысяч
- **Пример:** "$1,000" вместо "$1000"

#### План недоступен
- **Отображение:** Статус "Недоступно для этого количества ответов"
- **Кнопка:** Disabled состояние

---

## Список всех компонентов для реализации

### Базовые компоненты
1. **Heading** - заголовки (h1, h2, h3)
2. **Card** - карточки
3. **Button** - кнопки (Primary, Secondary, Disabled)
4. **Combobox** - выпадающие списки
5. **Badge** - бейджи
6. **Icon** - иконки
7. **Accordion** - аккордеон для FAQ
8. **ProgressBar** - прогресс-бар
9. **List** - списки функций
10. **Link** - ссылки

### Специфичные компоненты
1. **CurrentPlanCard** - карточка текущего плана
2. **PricingPlanCard** - карточка тарифного плана
3. **ResponseSelector** - выбор количества ответов
4. **PeriodToggle** - переключатель периода оплаты
5. **FAQAccordion** - аккордеон FAQ
6. **GuaranteeCard** - карточка гарантии

---

## API спецификации (детальные)

### Базовый URL
- **Production:** `https://aai.widgets.wearekwid.com/api`
- **Development:** `http://localhost:3000/api`

### Аутентификация
- **Тип:** Bearer Token (JWT)
- **Header:** `Authorization: Bearer {token}`
- **Refresh Token:** Через `/api/auth/refresh`
- **Expiration:** Access token - 15 минут, Refresh token - 7 дней

### Формат запросов/ответов
- **Content-Type:** `application/json`
- **Accept:** `application/json`
- **Кодировка:** UTF-8

### Endpoints для страницы "Тарифные планы"

#### 1. Получение информации о текущем плане
```
GET /api/pricing/current-plan

Response 200:
{
  "data": {
    "planName": "Scale",
    "responsesPerMonth": 15000,
    "licenseExpires": "ISO 8601",
    "isExpired": boolean,
    "paymentCycle": "monthly" | "yearly",
    "used": number,
    "total": number,
    "percentage": number
  }
}
```

#### 2. Получение тарифных планов
```
GET /api/pricing/plans
Query Parameters:
  - responses: number (optional, количество ответов)
  - period: "monthly" | "yearly" (optional)

Response 200:
{
  "data": {
    "launch": {
      "monthlyPrice": number,
      "yearlyPrice": number,
      "features": [...],
      "availableModels": [...],
      "maxInstructions": number,
      "isAvailable": boolean
    },
    "scale": {
      "monthlyPrice": number,
      "yearlyPrice": number,
      "features": [...],
      "availableModels": [...],
      "maxInstructions": number,
      "isCurrent": boolean
    },
    "max": {
      "monthlyPrice": number,
      "yearlyPrice": number,
      "features": [...],
      "availableModels": [...],
      "maxInstructions": number
    }
  }
}
```

#### 3. Получение URL управления подпиской
```
GET /api/pricing/subscription-url

Response 200:
{
  "data": {
    "url": "string" (полный URL с параметрами)
  }
}
```

### Rate Limiting
- **Стандартные запросы:** 100 запросов в минуту

### Коды ошибок
- **200:** Успешный запрос
- **401:** Не авторизован
- **403:** Нет доступа
- **429:** Превышен лимит запросов
- **500:** Внутренняя ошибка сервера

---

## Детальные состояния загрузки

### Skeleton Loaders

#### Карточки тарифов
- **Структура:** 3 карточки с placeholder'ами
- **Анимация:** Пульсация (shimmer effect)
- **Высота:** 600px

#### Текущий план
- **Структура:** Placeholder прямоугольник
- **Высота:** 200px

---

## Responsive Design (точные breakpoints)

### Breakpoints
- **Mobile:** ≤ 767px
- **Tablet:** 768px - 1023px
- **Desktop:** ≥ 1024px
- **Large Desktop:** ≥ 1440px

### Адаптация компонентов

#### Тарифные планы
- **Desktop:** 3 колонки в ряд
- **Tablet:** 2 колонки в ряд
- **Mobile:** 1 колонка, полная ширина

---

## Z-index слои

### Порядок наложения
1. **Base content:** z-index: 1
2. **Cards:** z-index: 1
3. **Dropdowns:** z-index: 200
4. **Modals:** z-index: 1000

---

## Focus states (детальные)

### Визуальные индикаторы
- **Цвет:** #3B82F6 (синий)
- **Толщина:** 2px
- **Стиль:** solid
- **Offset:** 2px (outline-offset)

---

## Hover/Active/Pressed states

### Карточки тарифов
- **Hover:**
  - transform: translateY(-4px)
  - box-shadow: 0 8px 12px rgba(0, 0, 0, 0.1)
  - transition: 150ms

---

## Тени и эффекты (точные значения)

### Тени карточек
- **Стандартная:** `box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1)`
- **Hover:** `box-shadow: 0 8px 12px rgba(0, 0, 0, 0.1)`

---

## Скругления (точные значения)

### Компоненты
- **Карточки:** border-radius: 8px
- **Кнопки:** border-radius: 6px
- **Combobox:** border-radius: 6px

---

## Шрифты

### Семейство шрифтов
- **Основной:** System font stack
  - `-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif`

### Размеры
- **Base:** 16px
- **Small:** 14px
- **Large:** 18px
- **XLarge:** 24px
- **XXLarge:** 32px
- **XXXLarge:** 36px (цена)

---

## Иконки (детальные требования)

### Библиотека
- **Рекомендуется:** Lucide React, Heroicons, или аналогичная
- **Формат:** SVG
- **Размеры:** 12px, 16px, 20px, 24px

---

## Бизнес-логика

### Расчет цен
- **Годовая скидка:** ~17% от ежемесячной цены
- **Динамические цены:** Зависят от выбранного количества ответов
- **Цена за разговор:** Рассчитывается автоматически

### Ограничения
- **Launch план:** Недоступен для 15,000+ ответов
- **Scale/Max планы:** Требуют "Запросить счёт" для 20,000+ ответов

---

## Обработка ошибок (детальная)

### Типы ошибок
- **API ошибки:** Toast уведомления
- **Ошибки загрузки:** Отображение сообщения об ошибке

---

## Производительность

### Оптимизации
- **Кэширование:** Тарифные планы кэшируются на 5 минут
- **Ленивая загрузка:** FAQ загружается после основных данных

---

## Безопасность

### Аутентификация
- **JWT токены:** Хранятся в httpOnly cookies

### Авторизация
- **RBAC:** Role-Based Access Control

---

## Тестирование

### Unit тесты
- **Компоненты:** React Testing Library
- **Покрытие:** Минимум 80%

### E2E тесты
- **Сценарии:**
  - Переключение периодов оплаты
  - Выбор количества ответов
  - Раскрытие FAQ
  - Переход на управление подпиской

---

## Примеры кода

### Компонент карточки тарифа
```typescript
interface PricingPlanCardProps {
  plan: {
    name: string;
    monthlyPrice: number;
    yearlyPrice: number;
    features: string[];
    isCurrent?: boolean;
    isAvailable: boolean;
  };
  period: 'monthly' | 'yearly';
  responses: number;
}

export function PricingPlanCard({ plan, period, responses }: PricingPlanCardProps) {
  const price = period === 'monthly' ? plan.monthlyPrice : plan.yearlyPrice;
  
  return (
    <Card className={cn(
      "p-6",
      plan.isCurrent && "border-2 border-blue-500"
    )}>
      {plan.isCurrent && (
        <Badge>Текущий план</Badge>
      )}
      <h2>{plan.name}</h2>
      <div className="text-3xl font-bold">${price}</div>
      <div className="text-gray-600">/месяц</div>
      <ul>
        {plan.features.map((feature) => (
          <li key={feature}>{feature}</li>
        ))}
      </ul>
      <Button 
        disabled={!plan.isAvailable}
      >
        {plan.isAvailable ? 'Выбрать план' : 'Недоступно'}
      </Button>
    </Card>
  );
}
```

---

## Логирование и мониторинг

### Что логировать
- **Просмотр тарифов:** Какие планы просматриваются
- **Переключение периодов:** Выбранный период
- **Выбор количества ответов:** Выбранное количество
- **Клик по "Выбрать план":** Какой план выбран

---

## Доступность (расширенная)

### ARIA атрибуты
- **aria-label:** Для всех интерактивных элементов
- **aria-expanded:** Для аккордеона FAQ
- **aria-describedby:** Для элементов с описаниями

### Keyboard navigation
- **Tab:** Навигация по элементам
- **Enter/Space:** Активация элемента
- **Escape:** Закрытие аккордеона

---

## Интернационализация (i18n)

### Поддерживаемые языки
- **Основной:** Русский (ru)

### Форматирование
- **Цены:** Формат зависит от локали
- **Даты:** Формат зависит от локали

---

## Деплой и окружения

### Окружения
- **Development:** `http://localhost:3000`
- **Staging:** `https://staging.aai.widgets.wearekwid.com`
- **Production:** `https://aai.widgets.wearekwid.com`

---

## Версионирование API

### Формат версий
- **Текущая версия:** v1
- **Формат:** `/api/v1/pricing/plans`

---

## Документация для пользователей

### Tooltips и подсказки
- **Кнопка "Управление подпиской":** "Перейти на страницу управления подпиской"
- **Переключатель периодов:** "Выберите период оплаты для просмотра цен"

---

**Дата создания отчета:** 2025-11-11
**Дата последнего обновления:** 2025-01-26
**Версия:** 4.0
**Статус:** Полностью протестировано и детализировано для репликации
