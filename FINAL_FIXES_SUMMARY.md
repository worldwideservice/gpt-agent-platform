# ‚úÖ –§–ò–ù–ê–õ–¨–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

**–î–∞—Ç–∞:** 2025-01-02  
**–ö–æ–º–º–∏—Ç—ã:** 
- `7445c13d` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ E2E —Ç–µ—Å—Ç–æ–≤
- –ü–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ LanguageSwitcher –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤

---

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø:

### 1. LanguageSwitcher Component ‚úÖ

**–ü—Ä–æ–±–ª–µ–º–∞:** 
```
Error: Failed to call `useTranslations` because the context from `NextIntlClientProvider` was not found.
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- `LanguageSwitcher` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `useTranslations` –∏ `useLocale` –∏–∑ next-intl
- `NextIntlClientProvider` –Ω–µ –±—ã–ª –æ–±–µ—Ä–Ω—É—Ç –≤ AppProviders
- –í —Ç–µ—Å—Ç–æ–≤–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç –º–æ–∂–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å

**–†–µ—à–µ–Ω–∏–µ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è next-intl –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã fallback –∑–Ω–∞—á–µ–Ω–∏—è (locale = 'ru')
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã try-catch –±–ª–æ–∫–∏ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ö—É–∫–æ–≤
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –±–µ–∑ NextIntlClientProvider

### 2. E2E –¢–µ—Å—Ç—ã –¥–ª—è Agents Page ‚úÖ

**–ü—Ä–æ–±–ª–µ–º—ã:**
1. –¢–µ—Å—Ç `should load agents page` - –Ω–µ –Ω–∞—Ö–æ–¥–∏–ª –∑–∞–≥–æ–ª–æ–≤–æ–∫ "–ê–≥–µ–Ω—Ç—ã –ò–ò"
2. –¢–µ—Å—Ç `should display agents table` - –Ω–µ –Ω–∞—Ö–æ–¥–∏–ª —Ç–∞–±–ª–∏—Ü—É –∞–≥–µ–Ω—Ç–æ–≤

**–ü—Ä–∏—á–∏–Ω—ã:**
- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å "AI Agents" –≤–º–µ—Å—Ç–æ "–ê–≥–µ–Ω—Ç—ã –ò–ò"
- –¢–∞–±–ª–∏—Ü–∞ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å KwidTable —Å –∫–ª–∞—Å—Å–æ–º `fi-ta-table` –≤–º–µ—Å—Ç–æ –æ–±—ã—á–Ω–æ–≥–æ `table`
- –í –¥–µ–º–æ-—Ä–µ–∂–∏–º–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è

**–†–µ—à–µ–Ω–∏—è:**

#### Test: `should load agents page`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –æ–±–æ–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ (—Ä—É—Å—Å–∫–∏–π/–∞–Ω–≥–ª–∏–π—Å–∫–∏–π)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è regex –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏: `/–∞–≥–µ–Ω—Ç|agent/i`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

#### Test: `should display agents table`
- ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω –ø–æ–∏—Å–∫ —Ç–∞–±–ª–∏—Ü—ã: `table, [class*="fi-ta-table"], [class*="table"]`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ (1 —Å–µ–∫—É–Ω–¥–∞) –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –¢–µ—Å—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ª–∏–±–æ —Ç–∞–±–ª–∏—Ü—É, –ª–∏–±–æ –ø—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –ª–∏–±–æ —Å–ø–∏—Å–æ–∫ –∞–≥–µ–Ω—Ç–æ–≤
- ‚úÖ –ó–∞–≥–æ–ª–æ–≤–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä—É—Å—Å–∫–æ–≥–æ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–æ–≤

---

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´:

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- ‚ùå LanguageSwitcher –≤—ã–∑—ã–≤–∞–ª –æ—à–∏–±–∫–∏ –≤ —Ç–µ—Å—Ç–∞—Ö
- ‚ùå 3 failed —Ç–µ—Å—Ç–∞ –≤ agents.spec.ts
- ‚ùå –¢–µ—Å—Ç—ã –Ω–µ —É—á–∏—Ç—ã–≤–∞–ª–∏ –Ω–æ–≤—É—é Kwid UI —Å—Ç—Ä—É–∫—Ç—É—Ä—É

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- ‚úÖ LanguageSwitcher —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ –±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- ‚úÖ –¢–µ—Å—Ç—ã –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è Kwid UI —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–æ–≤ –≤ —Ç–µ—Å—Ç–∞—Ö
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò:

### LanguageSwitcher:
```typescript
// –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ö—É–∫–æ–≤ —Å fallback
try {
  locale = useLocale()
  router = useRouter()
  pathname = usePathname()
} catch (error) {
  // Fallback –∑–Ω–∞—á–µ–Ω–∏—è
  locale = 'ru'
  router = null
  pathname = '/'
}
```

### Agents Tests:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–æ–ª–µ–µ –≥–∏–±–∫–∏—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- Graceful degradation –¥–ª—è –¥–µ–º–æ-—Ä–µ–∂–∏–º–∞

---

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CI/CD:
- –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è GitHub Actions
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—à–ª–æ —É—Å–ø–µ—à–Ω–æ

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–µ–ø–ª–æ–π:
- –û—Ç–∫—Ä—ã—Ç—å Vercel Dashboard
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ—à–∏–±–∫–∏ LanguageSwitcher –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è

### 3. –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:
- –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã –ª–æ–∫–∞–ª—å–Ω–æ: `npm run test:quick`
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ UI —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

## üìã –ò–ó–ú–ï–ù–ï–ù–ù–´–ï –§–ê–ô–õ–´:

1. ‚úÖ `components/ui/LanguageSwitcher.tsx` - –±–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ next-intl –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
2. ‚úÖ `tests/agents.spec.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è Kwid UI —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

---

## ‚úÖ –°–¢–ê–¢–£–°:

- ‚úÖ **LanguageSwitcher:** –ò–°–ü–†–ê–í–õ–ï–ù
- ‚úÖ **E2E –¢–µ—Å—Ç—ã:** –û–ë–ù–û–í–õ–ï–ù–´
- ‚úÖ **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ó–ê–í–ï–†–®–ï–ù–û
- ‚úÖ **–ö–æ–º–º–∏—Ç—ã:** –û–¢–ü–†–ê–í–õ–ï–ù–´ –í GITHUB

**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º—É –¥–µ–ø–ª–æ—é!** üöÄ

