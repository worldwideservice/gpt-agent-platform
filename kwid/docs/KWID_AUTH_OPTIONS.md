# üîê –í–∞—Ä–∏–∞–Ω—Ç—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è KWID —Å–∫—Ä–∞–ø–∏–Ω–≥–∞

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤

| –í–∞—Ä–∏–∞–Ω—Ç | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è | –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|---------|-----------|-------------|------------|--------------|
| **1. StorageState (–æ–¥–∏–Ω —Ä–∞–∑)** | ‚≠ê –ü—Ä–æ—Å—Ç–æ–π | 1 —Ä–∞–∑ –≤—Ä—É—á–Ω—É—é | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê | ‚úÖ **–õ–£–ß–®–ò–ô** |
| **2. –†—É—á–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∫–∞–∂–¥—ã–π —Ä–∞–∑** | ‚≠ê‚≠ê –°—Ä–µ–¥–Ω–∏–π | –ö–∞–∂–¥—ã–π —Ä–∞–∑ | ‚≠ê‚≠ê‚≠ê | ‚ö†Ô∏è –ï—Å–ª–∏ storageState –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç |
| **3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —á–µ—Ä–µ–∑ Kommo** | ‚≠ê‚≠ê‚≠ê –°–ª–æ–∂–Ω—ã–π | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ | ‚≠ê‚≠ê | ‚ùå –ù–µ–Ω–∞–¥–µ–∂–Ω–æ |
| **4. CDP –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** | ‚≠ê‚≠ê‚≠ê‚≠ê –û—á–µ–Ω—å —Å–ª–æ–∂–Ω—ã–π | –ß–µ—Ä–µ–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –±—Ä–∞—É–∑–µ—Ä | ‚≠ê‚≠ê‚≠ê | ‚ùå –°–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω–æ |

---

## ‚úÖ –í–ê–†–ò–ê–ù–¢ 1: StorageState (–û–î–ò–ù –†–ê–ó) - –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø

### üéØ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. **–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫:** –°–∫—Ä–∏–ø—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –±—Ä–∞—É–∑–µ—Ä ‚Üí –≤—ã –∞–≤—Ç–æ—Ä–∏–∑—É–µ—Ç–µ—Å—å –≤—Ä—É—á–Ω—É—é ‚Üí —Å–∫—Ä–∏–ø—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç cookies
2. **–í—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—É—Å–∫–∏:** –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ cookies ‚Üí –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ –Ω—É–∂–Ω–∞!

### üìù –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:

#### –®–∞–≥ 1: –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ (–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –æ–¥–∏–Ω —Ä–∞–∑)
```bash
# –ó–∞–ø—É—Å–∫–∞–µ–º —Å–∫—Ä–∏–ø—Ç —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
bash -lc "./scripts/run-all-scenarios.sh"

# –°–∫—Ä–∏–ø—Ç –æ—Ç–∫—Ä–æ–µ—Ç –±—Ä–∞—É–∑–µ—Ä, –≤—ã:
# 1. –ê–≤—Ç–æ—Ä–∏–∑—É–µ—Ç–µ—Å—å –≤ Kommo
# 2. –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ ‚Üí GPT Agent ‚Üí "–û—Ç–∫—Ä—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"
# 3. –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç cookies –≤ playwright/.auth/kwid.json
```

#### –®–∞–≥ 2: –í—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—É—Å–∫–∏
```bash
# –ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å–∫–∞–µ–º - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É–∂–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!
bash -lc "./scripts/run-all-scenarios.sh"
```

### ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è **–æ–¥–∏–Ω —Ä–∞–∑**
- ‚úÖ –í—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—É—Å–∫–∏ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ**
- ‚úÖ –ù–µ –Ω—É–∂–Ω–æ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –±—Ä–∞—É–∑–µ—Ä
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–¥–µ–∂–Ω–æ

### ‚ö†Ô∏è –ï—Å–ª–∏ cookies —É—Å—Ç–∞—Ä–µ–ª–∏:
```bash
# –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ cookies –∏ –∞–≤—Ç–æ—Ä–∏–∑—É–µ–º—Å—è –∑–∞–Ω–æ–≤–æ
rm playwright/.auth/kwid.json
bash -lc "./scripts/run-all-scenarios.sh"
```

---

## ‚ö†Ô∏è –í–ê–†–ò–ê–ù–¢ 2: –†—É—á–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∫–∞–∂–¥—ã–π —Ä–∞–∑

### üéØ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:
–°–∫—Ä–∏–ø—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –±—Ä–∞—É–∑–µ—Ä ‚Üí –≤—ã –∫–∞–∂–¥—ã–π —Ä–∞–∑ –∞–≤—Ç–æ—Ä–∏–∑—É–µ—Ç–µ—Å—å –≤—Ä—É—á–Ω—É—é ‚Üí —Å–∫—Ä–∏–ø—Ç –∂–¥–µ—Ç –ø–æ–∫–∞ –≤—ã –æ—Ç–∫—Ä–æ–µ—Ç–µ KWID

### üìù –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:

#### –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–∞:
```typescript
// –í scripts/kwid-scrape.ts –∏–∑–º–µ–Ω–∏—Ç—å:
const storageStateExists = await fileExists(options.storageState)
// –ù–∞:
const storageStateExists = false // –í—Å–µ–≥–¥–∞ –Ω–∞—á–∏–Ω–∞—Ç—å —Å —á–∏—Å—Ç–æ–≥–æ –±—Ä–∞—É–∑–µ—Ä–∞
```

#### –ó–∞–ø—É—Å–∫:
```bash
bash -lc "./scripts/run-all-scenarios.sh"
```

### ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- ‚úÖ –ü—Ä–æ—Å—Ç–æ - –Ω–µ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å storageState
- ‚úÖ –í—Å–µ–≥–¥–∞ —Å–≤–µ–∂–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

### ‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:
- ‚ùå –ù—É–∂–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è **–∫–∞–∂–¥—ã–π —Ä–∞–∑**
- ‚ùå –ú–µ–¥–ª–µ–Ω–Ω–µ–µ

---

## ‚ùå –í–ê–†–ò–ê–ù–¢ 3: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Kommo

### üéØ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:
–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–≤–æ–¥–∏—Ç email/password ‚Üí –∞–≤—Ç–æ—Ä–∏–∑—É–µ—Ç—Å—è ‚Üí –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ KWID

### üìù –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
export KOMMO_EMAIL="admin@worldwideservice.eu"
export KOMMO_PASSWORD="your_password"
```

#### –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–∞:
–ù—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥ –≤ Kommo (—Å–ª–æ–∂–Ω–æ –∏–∑-–∑–∞ –∫–∞–ø—á–∏, 2FA –∏ —Ç.–¥.)

### ‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:
- ‚ùå –ú–æ–∂–µ—Ç –±—ã—Ç—å –∫–∞–ø—á–∞
- ‚ùå –ú–æ–∂–µ—Ç –±—ã—Ç—å 2FA
- ‚ùå –ù–µ–Ω–∞–¥–µ–∂–Ω–æ
- ‚ùå –°–ª–æ–∂–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å

### ‚ö†Ô∏è –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è!

---

## ‚ùå –í–ê–†–ò–ê–ù–¢ 4: CDP –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É –±—Ä–∞—É–∑–µ—Ä—É

### üéØ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:
–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —É–∂–µ –æ—Ç–∫—Ä—ã—Ç–æ–º—É –±—Ä–∞—É–∑–µ—Ä—É —á–µ—Ä–µ–∑ Chrome DevTools Protocol

### üìù –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:

#### –ó–∞–ø—É—Å–∫ –±—Ä–∞—É–∑–µ—Ä–∞ —Å CDP:
```bash
# –ó–∞–ø—É—Å–∫–∞–µ–º Chrome —Å CDP
/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome \
  --remote-debugging-port=9222 \
  --user-data-dir=/tmp/chrome-debug
```

#### –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–∞:
```typescript
// –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É –±—Ä–∞—É–∑–µ—Ä—É
const browser = await chromium.connectOverCDP('http://localhost:9222')
```

### ‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:
- ‚ùå –û—á–µ–Ω—å —Å–ª–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å
- ‚ùå –ù—É–∂–Ω–æ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –∑–∞–ø—É—Å–∫–∞—Ç—å –±—Ä–∞—É–∑–µ—Ä –≤—Ä—É—á–Ω—É—é
- ‚ùå –ú–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –≤—Å–µ—Ö —Å–∏—Å—Ç–µ–º–∞—Ö

### ‚ö†Ô∏è –ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è!

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –í–ê–†–ò–ê–ù–¢ 1 (StorageState)

### –ü–æ—á–µ–º—É:
1. ‚úÖ **–ü—Ä–æ—Å—Ç–æ** - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –æ–¥–∏–Ω —Ä–∞–∑
2. ‚úÖ **–ù–∞–¥–µ–∂–Ω–æ** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
3. ‚úÖ **–ë—ã—Å—Ç—Ä–æ** - –Ω–µ –Ω—É–∂–Ω–æ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è
4. ‚úÖ **–£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ** - —Å–∫—Ä–∏–ø—Ç —É–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç storageState!

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:
```bash
# –ü–µ—Ä–≤—ã–π —Ä–∞–∑ - –∞–≤—Ç–æ—Ä–∏–∑—É–µ–º—Å—è
bash -lc "./scripts/run-all-scenarios.sh"
# (–∞–≤—Ç–æ—Ä–∏–∑—É–µ—Ç–µ—Å—å –≤—Ä—É—á–Ω—É—é –æ–¥–∏–Ω —Ä–∞–∑)

# –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ä–∞–∑—ã - –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å–∫–∞–µ–º
bash -lc "./scripts/run-all-scenarios.sh"
```

---

## üîß –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –∏ —Ä–µ—à–µ–Ω–∏–µ

### –ü—Ä–æ–±–ª–µ–º–∞:
–°–∫—Ä–∏–ø—Ç –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –æ—Ç–∫—Ä—ã—Ç—ã–µ –≤–∫–ª–∞–¥–∫–∏ –∏ —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–µ.

### –†–µ—à–µ–Ω–∏–µ –¥–ª—è –í–ê–†–ò–ê–ù–¢–ê 1:
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å storageState - —Å–∫—Ä–∏–ø—Ç –Ω–µ –±—É–¥–µ—Ç –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –±—Ä–∞—É–∑–µ—Ä –∑–∞–Ω–æ–≤–æ
2. –ï—Å–ª–∏ storageState –µ—Å—Ç—å - —Å–∫—Ä–∏–ø—Ç —Å—Ä–∞–∑—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
3. –ù–µ –Ω—É–∂–Ω–æ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –±—Ä–∞—É–∑–µ—Ä –≤—Ä—É—á–Ω—É—é

### –†–µ—à–µ–Ω–∏–µ –¥–ª—è –í–ê–†–ò–ê–ù–¢–ê 2:
–ò—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –≤–∫–ª–∞–¥–æ–∫ - –Ω–µ –¥–µ–ª–∞—Ç—å `page.goto()` –µ—Å–ª–∏ –≤–∫–ª–∞–¥–∫–∞ —É–∂–µ –æ—Ç–∫—Ä—ã—Ç–∞.


