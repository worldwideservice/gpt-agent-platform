# –ü–æ–ª–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Kwid - –î–æ–ø–æ–ª–Ω–µ–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

> –î–æ–∫—É–º–µ–Ω—Ç –¥–æ–ø–æ–ª–Ω—è–µ—Ç `KWID_ARCHITECTURE.md` —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã  
> –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è: 2025-01-XX

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏: —Å–ø–∏—Å–æ–∫ –∏ —Ñ–æ—Ä–º—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è](#1-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)
2. [–ù–∞—Å—Ç—Ä–æ–π–∫–∏: –ø—Ä–æ—Ñ–∏–ª—å, workspace, –æ–ø–ª–∞—Ç–∞, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏](#2-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
3. [–û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã: —á–∞—Ç, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, account](#3-–æ—Å—Ç–∞–ª—å–Ω—ã–µ-—Å—Ç—Ä–∞–Ω–∏—Ü—ã)

---

## 1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### 1.1. –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:**

1. **Kommo CRM** (`kommo`)
   - –¢–∏–ø: `'kommo'`
   - ID: `'kommo'`
   - –°—Ç–∞—Ç—É—Å: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
   - OAuth 2.0 –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤–æ—Ä–æ–Ω–æ–∫, —Å—Ç–∞—Ç—É—Å–æ–≤, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

2. **Google Calendar** (`google-calendar`)
   - –¢–∏–ø: `'google_calendar'`
   - ID: `'google-calendar'`
   - –°—Ç–∞—Ç—É—Å: ‚ö†Ô∏è –û–±—ä—è–≤–ª–µ–Ω–∞, –Ω–æ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `components/integrations/IntegrationsTable.tsx` - —Ç–∞–±–ª–∏—Ü–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π (–≥–ª–æ–±–∞–ª—å–Ω–∞—è)
- `components/integrations/AvailableIntegrationsTable.tsx` - —Ç–∞–±–ª–∏—Ü–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π –¥–ª—è –∞–≥–µ–Ω—Ç–∞
- `components/integrations/IntegrationsContent.tsx` - –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
- `components/integrations/KommoIntegrationSettings.tsx` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Kommo

### 1.2. –ú–∞—Ä—à—Ä—É—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

#### –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (–Ω–∞ —É—Ä–æ–≤–Ω–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏):
- ‚ùå `/manage/[tenantId]/integrations` - **–ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û**
- ‚ùå `/manage/[tenantId]/integrations/[integrationId]/install` - **–ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û**
- ‚ùå `/manage/[tenantId]/integrations/[integrationId]/edit` - **–ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

#### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –∞–≥–µ–Ω—Ç–∞:
- ‚ùå `/manage/[tenantId]/ai-agents/[id]/available-integrations` - **–ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û**
- ‚ùå `/manage/[tenantId]/ai-agents/[id]/integrations/[integrationId]/install` - **–ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û** (—Ç–æ–ª—å–∫–æ API)
- ‚ùå `/manage/[tenantId]/ai-agents/[id]/integrations/[integrationId]/edit` - **–ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û** (—Ç–æ–ª—å–∫–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç)

**–°—Ç–∞—Ä—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã (–º–æ–≥—É—Ç –±—ã—Ç—å —Ä–µ–¥–∏—Ä–µ–∫—Ç—ã):**
- ‚úÖ `/integrations` - —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/manage/[tenantId]/integrations` (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞)
- ‚úÖ `/integrations/kommo/oauth/callback` - OAuth callback

### 1.3. API Endpoints –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

#### Kommo –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:
- ‚úÖ `GET /api/integrations/kommo/status` - —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- ‚úÖ `POST /api/integrations/kommo/oauth/start` - –Ω–∞—á–∞–ª–æ OAuth
- ‚úÖ `GET /api/integrations/kommo/oauth/callback` - OAuth callback
- ‚úÖ `POST /api/integrations/kommo/sync/pipelines` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤–æ—Ä–æ–Ω–æ–∫
- ‚úÖ `GET /api/integrations/kommo/credentials` - –ø–æ–ª—É—á–µ–Ω–∏–µ credentials
- ‚úÖ `POST /api/kommo/settings` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ Kommo

#### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∞–≥–µ–Ω—Ç–æ–≤:
- ‚úÖ `GET /api/agents/[id]/integrations` - —Å–ø–∏—Å–æ–∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π –∞–≥–µ–Ω—Ç–∞
- ‚úÖ `POST /api/agents/[id]/integrations/[integrationId]/install` - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- ‚úÖ `GET /api/agents/[id]/integrations/[integrationId]` - –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- ‚úÖ `PATCH /api/agents/[id]/integrations/[integrationId]` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (is_active)
- ‚úÖ `POST /api/agents/[id]/integrations/[integrationId]/sync` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ CRM (–¥–ª—è Kommo)

### 1.4. –§–æ—Ä–º—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

#### Kommo:
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `components/crm/KommoSetup.tsx`

**–ü—Ä–æ—Ü–µ—Å—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç `base_domain` Kommo
2. –ù–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ "–ü–æ–¥–∫–ª—é—á–∏—Ç—å Kommo"
3. –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é Kommo
4. Callback –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ–∫–µ–Ω—ã
5. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ç–∞–±–ª–∏—Ü—É `crm_connections`

**–ü–æ–ª—è —Ñ–æ—Ä–º—ã:**
- `base_domain` - –¥–æ–º–µ–Ω Kommo (–Ω–∞–ø—Ä–∏–º–µ—Ä: `example.kommo.com`)

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫:** `components/integrations/KommoIntegrationSettings.tsx`
- Switch "–ê–∫—Ç–∏–≤–Ω–æ" - –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç `is_active` —á–µ—Ä–µ–∑ API
- –ö–Ω–æ–ø–∫–∞ "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CRM" - –≤—ã–∑—ã–≤–∞–µ—Ç `/api/agents/[id]/integrations/[integrationId]/sync`
- –ö–Ω–æ–ø–∫–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è" - –æ–±–Ω–æ–≤–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –ö–Ω–æ–ø–∫–∞ "–û—Ç–º–µ–Ω–∞" - –≤–æ–∑–≤—Ä–∞—Ç –∫ —Å–ø–∏—Å–∫—É –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

**API –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:**
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –≤–æ—Ä–æ–Ω–∫–∏ (pipelines)
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –ø–æ–ª—è (lead_fields, contact_fields)
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –∫–∞–Ω–∞–ª—ã (channels)
- –û–±–Ω–æ–≤–ª—è–µ—Ç `last_synced_at` –≤ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

#### Google Calendar:
‚ùå **–ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

### 1.5. –¢–∞–±–ª–∏—Ü—ã –ë–î –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

**–¢–∞–±–ª–∏—Ü–∞ `agent_integrations`:**
- `id` (UUID)
- `agent_id` (UUID)
- `org_id` (UUID)
- `integration_type` (string) - —Ç–∏–ø –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- `is_installed` (boolean)
- `is_active` (boolean)
- `settings` (JSONB) - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- `created_at`, `updated_at`

**–¢–∞–±–ª–∏—Ü–∞ `crm_connections`:**
- `id` (UUID)
- `org_id` (UUID)
- `crm_type` (string) - 'kommo', 'bitrix24', etc.
- `base_domain` (string)
- `access_token` (encrypted)
- `refresh_token` (encrypted)
- `metadata` (JSONB)
- `created_at`, `updated_at`

**–¢–∞–±–ª–∏—Ü–∞ `crm_settings`:**
- `id` (UUID)
- `org_id` (UUID)
- `crm_type` (string)
- `config` (JSONB) - encrypted configuration
- `is_active` (boolean)

---

## 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∏

### 2.1. –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- ‚úÖ API: `app/api/account/route.ts`

**API Endpoints:**
- ‚úÖ `GET /api/account` - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  ```typescript
  Response: {
    success: true,
    data: {
      id: string,
      email: string,
      fullName: string,
      avatarUrl: string | null,
      locale: string
    }
  }
  ```
- ‚úÖ `PATCH /api/account` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
  ```typescript
  Request: {
    fullName?: string,
    email?: string,
    avatarUrl?: string | null,
    locale?: string
  }
  ```

**–°—Ç—Ä–∞–Ω–∏—Ü–∞:**
- ‚ùå `/manage/[tenantId]/account-settings` - **–ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–ê**
- ‚úÖ `/account` - —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/manage/[tenantId]/account-settings` (–Ω–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)

**–ü–æ–ª—è –ø—Ä–æ—Ñ–∏–ª—è:**
- –ò–º—è (`fullName`)
- Email (`email`)
- –ê–≤–∞—Ç–∞—Ä (`avatarUrl`)
- –õ–æ–∫–∞–ª—å (`locale`) - –≤—Å–µ–≥–¥–∞ 'ru' (–∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–æ)

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**
1. –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/manage/[tenantId]/account-settings`
2. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ñ–æ—Ä–º—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
3. –í–∞–ª–∏–¥–∞—Ü–∏—è email
4. –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–∞
5. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è (–æ—Ç–¥–µ–ª—å–Ω–∞—è —Å–µ–∫—Ü–∏—è)

### 2.2. Workspace (–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è)

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- ‚úÖ API: `app/api/organization/settings/route.ts`

**API Endpoints:**
- ‚úÖ `GET /api/organization/settings` - –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
  ```typescript
  Response: {
    success: true,
    data: {
      settings: {
        stopOnHumanReply?: boolean
      }
    }
  }
  ```
- ‚úÖ `PATCH /api/organization/settings` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
  ```typescript
  Request: {
    stopOnHumanReply?: boolean
  }
  ```

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏:**
- `stopOnHumanReply` (boolean) - –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∞–≥–µ–Ω—Ç–æ–≤ –ò–ò –ø—Ä–∏ –æ—Ç–≤–µ—Ç–µ —á–µ–ª–æ–≤–µ–∫–∞

**–¢–∞–±–ª–∏—Ü—ã –ë–î:**
- `organizations.settings` (JSONB) - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**
1. –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è workspace (`/manage/[tenantId]/workspace` –∏–ª–∏ —Å–µ–∫—Ü–∏—è –≤ account-settings)
2. –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –Ω–∞—Å—Ç—Ä–æ–µ–∫ workspace
3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ workspace
4. –†–æ–ª–∏ –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
5. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

### 2.3. –û–ø–ª–∞—Ç–∞ (Billing & Subscriptions)

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- ‚úÖ API: `app/api/billing/route.ts`
- ‚úÖ –°–µ—Ä–≤–∏—Å: `lib/services/billing.ts`
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: `components/pricing/PricingPublic.tsx` (–ø—É–±–ª–∏—á–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞)

**API Endpoints:**

**GET /api/billing:**
- `?action=plans` - —Å–ø–∏—Å–æ–∫ —Ç–∞—Ä–∏—Ñ–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤
- `?action=subscription` - —Ç–µ–∫—É—â–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- `?action=usage&start_date=&end_date=` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**POST /api/billing:**
- `action: 'create_subscription_session'` - —Å–æ–∑–¥–∞–Ω–∏–µ Stripe Checkout —Å–µ—Å—Å–∏–∏
  ```typescript
  Request: {
    action: 'create_subscription_session',
    plan_id: string,
    success_url: string,
    cancel_url: string
  }
  Response: {
    success: true,
    data: { session_url: string }
  }
  ```
- `action: 'cancel_subscription'` - –æ—Ç–º–µ–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∏
- `action: 'resume_subscription'` - –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏

**POST /api/billing/webhook** - Stripe webhook handler

**–¢–∞–±–ª–∏—Ü—ã –ë–î:**
- `billing_plans` - —Ç–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã
  - `id`, `name`, `description`, `stripe_price_id`, `price_cents`, `currency`, `interval`
  - `features` (JSONB), `limits` (JSONB), `is_active`, `sort_order`
- `subscriptions` - –ø–æ–¥–ø–∏—Å–∫–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π
  - `id`, `org_id`, `stripe_subscription_id`, `stripe_customer_id`, `plan_id`
  - `status`, `current_period_start`, `current_period_end`, `cancel_at_period_end`
  - `usage_limits` (JSONB), `metadata` (JSONB)
- `usage_records` - –∑–∞–ø–∏—Å–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
  - `id`, `org_id`, `subscription_id`, `resource_type`, `amount`, `cost_cents`, `description`, `recorded_at`

**–¢–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã (–∏–∑ `components/pricing/pricingData.ts`):**
1. **Launch** - $18/–º–µ—Å—è—Ü
   - 1 –∞–≥–µ–Ω—Ç
   - 500 —Å—Ç–∞—Ç–µ–π –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
   - –î–æ 20,000 —Å–∏–º–≤–æ–ª–æ–≤ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
   - –ú–æ–¥–µ–ª–∏: GPT-4.1, GPT-5
2. **Scale** - $578/–º–µ—Å—è—Ü (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π)
   - 10 –∞–≥–µ–Ω—Ç–æ–≤
   - 100,000 —Å—Ç–∞—Ç–µ–π
   - –î–æ 20,000 —Å–∏–º–≤–æ–ª–æ–≤ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
   - –ú–æ–¥–µ–ª–∏: GPT-4.1, GPT-5, Google Gemini 2.5 Flash
3. **Max** - $973/–º–µ—Å—è—Ü
   - –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ –∞–≥–µ–Ω—Ç–æ–≤ –∏ —Å—Ç–∞—Ç–µ–π
   - –î–æ 40,000 —Å–∏–º–≤–æ–ª–æ–≤ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
   - –ú–æ–¥–µ–ª–∏: GPT-4.1, GPT-5, Google Gemini 2.5 Flash, Claude Sonnet 4

**–°—Ç—Ä–∞–Ω–∏—Ü—ã:**
- ‚úÖ `/pricing` - –ø—É–±–ª–∏—á–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–∞—Ä–∏—Ñ–æ–≤ (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞)
- ‚ùå `/manage/[tenantId]/pricing` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–æ–π (–ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–ê)

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**
1. –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/manage/[tenantId]/pricing` —Å:
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —Ç–µ–∫—É—â–µ–π –ø–æ–¥–ø–∏—Å–∫–∏
   - –ü—Ä–æ–≥—Ä–µ—Å—Å–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - –í—ã–±–æ—Ä–æ–º –Ω–æ–≤–æ–≥–æ –ø–ª–∞–Ω–∞
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –ø–æ–¥–ø–∏—Å–∫–æ–π (–æ—Ç–º–µ–Ω–∞, –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
2. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `PricingClient.tsx` –¥–ª—è –∑–∞—â–∏—â–µ–Ω–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ Stripe Checkout
4. –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### 2.4. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (Users Management)

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- ‚úÖ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: `lib/repositories/users.ts`
- ‚úÖ API: `app/api/account/route.ts` (—Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

**API Endpoints:**
- ‚úÖ `GET /api/account` - –¥–∞–Ω–Ω—ã–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ `PATCH /api/account` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚ùå –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ - **–ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û**
- ‚ùå –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ workspace - **–ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û**
- ‚ùå –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ workspace - **–ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û**
- ‚ùå –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è - **–ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

**–¢–∞–±–ª–∏—Ü—ã –ë–î:**
- `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
  - `id`, `email`, `name`, `image`, `email_verified`, `created_at`, `updated_at`
- `members` - —É—á–∞—Å—Ç–Ω–∏–∫–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π
  - `id`, `user_id`, `org_id`, `role`, `status`, `created_at`, `updated_at`

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**
1. –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/manage/[tenantId]/users`:
   - –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
   - –†–æ–ª–∏: owner, member
   - –°—Ç–∞—Ç—É—Å—ã: active, inactive
2. API endpoints:
   - `GET /api/organizations/[tenantId]/users` - —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - `POST /api/organizations/[tenantId]/users` - –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - `PATCH /api/organizations/[tenantId]/users/[userId]` - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏
   - `DELETE /api/organizations/[tenantId]/users/[userId]` - —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ workspace
3. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
   - `UsersTable.tsx` - —Ç–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - `InviteUserForm.tsx` - —Ñ–æ—Ä–º–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
   - `UserRoleEditor.tsx` - —Ä–µ–¥–∞–∫—Ç–æ—Ä —Ä–æ–ª–∏

---

## 3. –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### 3.1. –ß–∞—Ç (Test Chat)

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- ‚úÖ API: `app/api/chat/route.ts` - –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω

**API Endpoints:**

**POST /api/chat:**
```typescript
Request: {
  conversationId?: string,
  agentId?: string,
  message: string,
  useKnowledgeBase?: boolean,
  clientIdentifier?: string
}
Response: {
  success: true,
  data: {
    conversationId: string,
    message: string,
    usage: { promptTokens, completionTokens, totalTokens },
    model: string
  }
}
```

**GET /api/chat:**
- `?conversationId=` - –ø–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–∞
- `?agentId=` - –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–∏–∞–ª–æ–≥–æ–≤ –¥–ª—è –∞–≥–µ–Ω—Ç–∞
- –ë–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ - –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –¥–∏–∞–ª–æ–≥–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å API:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞–º–∏
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∞–≥–µ–Ω—Ç—É
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç –ò–ò-–∞–≥–µ–Ω—Ç–∞
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –∞–≥–µ–Ω—Ç–∞
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–∞–º—è—Ç–∏ –∞–≥–µ–Ω—Ç–∞
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤–æ—Ä–æ–Ω–æ–∫ –∞–≥–µ–Ω—Ç–∞

**–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:** `lib/repositories/conversations.ts`
- `createConversation()`
- `getConversationById()`
- `addMessageToConversation()`
- `getConversationMessages()`
- `getConversations()`

**–°—Ç—Ä–∞–Ω–∏—Ü–∞:**
- ‚ùå `/manage/[tenantId]/test-chat` - **–ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–ê**
- ‚úÖ `/chat` - –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–µ–¥–∏—Ä–µ–∫—Ç (–Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å)

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**
1. –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/manage/[tenantId]/test-chat` —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏:
   - `TestChatClient.tsx` - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
   - `ChatSidebar.tsx` - –±–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å–æ —Å–ø–∏—Å–∫–æ–º –¥–∏–∞–ª–æ–≥–æ–≤
     - –ó–∞–≥–æ–ª–æ–≤–æ–∫ "–ß–∞—Ç—ã"
     - –ö–Ω–æ–ø–∫–∞ "–ù–æ–≤—ã–π —á–∞—Ç"
     - –°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ —Å –ø—Ä–µ–≤—å—é –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
     - –í—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
   - `ChatMessages.tsx` - –∏—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
     - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π user/assistant
     - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
     - –°–∫—Ä–æ–ª–ª –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é
   - `ChatInput.tsx` - —Ñ–æ—Ä–º–∞ –≤–≤–æ–¥–∞
     - –í—ã–±–æ—Ä –∞–≥–µ–Ω—Ç–∞ (combobox)
     - –ü–æ–ª–µ –≤–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è (textarea)
     - –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏
     - –ê–≤—Ç–æ—Ñ–æ–∫—É—Å

### 3.2. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: `components/notifications/RealTimeNotifications.tsx`
- ‚úÖ API: `app/api/notifications/route.ts`
- ‚úÖ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: `lib/repositories/notifications.ts`
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è: `components/layout/Header.tsx` (–∫–Ω–æ–ø–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)

**API Endpoints:**
- ‚úÖ `GET /api/notifications` - —Å–ø–∏—Å–æ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ‚úÖ `POST /api/notifications/actions` - –¥–µ–π—Å—Ç–≤–∏—è —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
  - `markAsRead`, `markAllAsRead`, `delete`
- ‚úÖ `GET /api/notifications/[id]` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚úÖ `PATCH /api/notifications/[id]` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**–¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:**
- `notification` - –æ–±—ã—á–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- `announcement` - –æ–±—ä—è–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
- `system` - —Å–∏—Å—Ç–µ–º–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- `job` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏/–¥–∂–æ–±–∞
- `agent` - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∞–≥–µ–Ω—Ç–∞

**–£—Ä–æ–≤–Ω–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:**
- `info` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (—Å–∏–Ω–∏–π)
- `warning` - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ (–∂–µ–ª—Ç—ã–π)
- `error` - –æ—à–∏–±–∫–∞ (–∫—Ä–∞—Å–Ω—ã–π)
- `success` - —É—Å–ø–µ—Ö (–∑–µ–ª–µ–Ω—ã–π)

**WebSocket –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- `ws.onNotification()` - –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –Ω–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- `ws.onSystemAnnouncement()` - –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- `ws.onJobUpdate()` - –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–¥–∞—á
- `ws.onAgentStatusChange()` - –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–æ–≤
- `ws.markNotificationAsRead()` - –æ—Ç–º–µ—Ç–∫–∞ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:**
- ‚úÖ –°—á–µ—Ç—á–∏–∫ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö
- ‚úÖ –û—Ç–º–µ—Ç–∫–∞ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º (–æ–¥–Ω–æ/–≤—Å–µ)
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É/—É—Ä–æ–≤–Ω—é
- ‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (–æ–Ω–ª–∞–π–Ω/–æ—Ñ—Ñ–ª–∞–π–Ω)
- ‚úÖ Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ WebSocket

**–°—Ç—Ä–∞–Ω–∏—Ü—ã:**
- ‚ùå `/manage/[tenantId]/notifications` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Å–µ—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π **–ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–ê**
- ‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ Header - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω (–º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ/–≤—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é)

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**
1. –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/manage/[tenantId]/notifications`:
   - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
   - –§–∏–ª—å—Ç—Ä—ã –ø–æ —Ç–∏–ø—É, —É—Ä–æ–≤–Ω—é, –¥–∞—Ç–µ
   - –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ
   - –ü–æ–∏—Å–∫ –ø–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º
   - –ü–∞–≥–∏–Ω–∞—Ü–∏—è
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:
   - –ö–∞–∫–∏–µ —Ç–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ–ª—É—á–∞—Ç—å
   - Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
   - Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)

### 3.3. Account (–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–∫–∫–∞—É–Ω—Ç–∞)

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- ‚úÖ API: `app/api/account/route.ts`
- ‚úÖ API: `app/api/organization/settings/route.ts`
- ‚ùå –°—Ç—Ä–∞–Ω–∏—Ü–∞: `/manage/[tenantId]/account-settings` - **–ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–ê**

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏):**

**–ó–∞–≥–æ–ª–æ–≤–æ–∫:**
- H1: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–∫–∫–∞—É–Ω—Ç–∞"
- Breadcrumbs: –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç

**–°–µ–∫—Ü–∏–∏:**

1. **–û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
   - Switch "–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∞–≥–µ–Ω—Ç–æ–≤ –ò–ò –ø—Ä–∏ –æ—Ç–≤–µ—Ç–µ —á–µ–ª–æ–≤–µ–∫–∞"
   - –û–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
   - –ö–Ω–æ–ø–∫–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è"

2. **–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
   - –ò–º—è (read-only –∏–∑ API)
   - Email (read-only –∏–∑ API)
   - ‚ö†Ô∏è –î–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–º (—Å–µ–π—á–∞—Å —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ API)

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**
1. –°—Ç—Ä–∞–Ω–∏—Ü–∞ `/manage/[tenantId]/account-settings`:
   - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç `AccountSettingsClient.tsx`
2. –í–∫–ª–∞–¥–∫–∏ (Tabs):
   - **–ü—Ä–æ—Ñ–∏–ª—å** - —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
     - –ò–º—è (input)
     - Email (input —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π)
     - –ê–≤–∞—Ç–∞—Ä (–∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
     - –õ–æ–∫–∞–ª—å (select)
     - –ö–Ω–æ–ø–∫–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
   - **–û–±—â–∏–µ** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
     - Switch "–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∞–≥–µ–Ω—Ç–æ–≤ –ò–ò –ø—Ä–∏ –æ—Ç–≤–µ—Ç–µ —á–µ–ª–æ–≤–µ–∫–∞"
     - –ö–Ω–æ–ø–∫–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è"
   - **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
     - –¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å
     - –ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å
     - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
     - –ö–Ω–æ–ø–∫–∞ "–ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å"
   - **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - **API –∫–ª—é—á–∏** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ API –∫–ª—é—á–∞–º–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)

3. –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º:
   - Email —Ñ–æ—Ä–º–∞—Ç
   - –ü–∞—Ä–æ–ª—å: –º–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤, –±—É–∫–≤—ã –∏ —Ü–∏—Ñ—Ä—ã
   - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è –¥–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å

4. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:
   - –ü–æ–∫–∞–∑ –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–æ–∫
   - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π

---

## üìä –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å—Ç–∞—Ç—É—Å–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | API | –°—Ç—Ä–∞–Ω–∏—Ü–∞ | –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã | –°—Ç–∞—Ç—É—Å |
|-----------|-----|----------|------------|--------|
| **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** |
| Kommo –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è | ‚úÖ | ‚ö†Ô∏è | ‚úÖ | –ß–∞—Å—Ç–∏—á–Ω–æ |
| Google Calendar | ‚ùå | ‚ùå | ‚ùå | –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π | ‚ùå | ‚ùå | ‚úÖ | –ù–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã |
| **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** |
| –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | ‚úÖ | ‚ùå | ‚ùå | –ù–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã |
| Workspace –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ | ‚úÖ | ‚ùå | ‚ùå | –ù–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã |
| –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ | ‚ùå | ‚ùå | ‚ùå | –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| Billing/Pricing | ‚úÖ | ‚ö†Ô∏è | ‚ö†Ô∏è | –ß–∞—Å—Ç–∏—á–Ω–æ |
| **–°—Ç—Ä–∞–Ω–∏—Ü—ã** |
| Test Chat | ‚úÖ | ‚ùå | ‚ùå | –ù–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã |
| –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | ‚úÖ | ‚ùå | ‚úÖ | –ù–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã |
| Account Settings | ‚úÖ | ‚ùå | ‚ùå | –ù–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã |

**–õ–µ–≥–µ–Ω–¥–∞:**
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- ‚ùå –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

---

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–ö—Ä–∏—Ç–∏—á–Ω–æ - –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã):
1. ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —á–∞—Ç–∞ (`/manage/[tenantId]/test-chat`)
2. ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∞–∫–∫–∞—É–Ω—Ç–∞ (`/manage/[tenantId]/account-settings`)
3. ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (`/manage/[tenantId]/users`)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–í–∞–∂–Ω–æ - —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å):
4. ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ pricing —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –ø–æ–¥–ø–∏—Å–∫–æ–π (`/manage/[tenantId]/pricing`)
5. ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Å–µ—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (`/manage/[tenantId]/notifications`)
6. ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π (`/manage/[tenantId]/integrations`)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ - —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ):
7. ‚ö†Ô∏è –§–æ—Ä–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è Google Calendar
8. ‚ö†Ô∏è –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ workspace
9. ‚ö†Ô∏è –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
10. ‚ö†Ô∏è API –∫–ª—é—á–∏ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –∞–∫–∫–∞—É–Ω—Ç–∞

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ API endpoints –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π —Å—É—â–µ—Å—Ç–≤—É—é—Ç, –Ω–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- WebSocket –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- Billing –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ Stripe —á–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞, –Ω—É–∂–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

