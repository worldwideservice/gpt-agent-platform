# üß™ –§–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞

**–î–∞—Ç–∞:** 2025-01-26  
**–°—Ç–∞—Ç—É—Å:** –ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à–µ–Ω

---

## ‚úÖ –ß—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (100% –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ)

### Frontend (Vercel) ‚úÖ
- ‚úÖ Health Check (`/api/health`)
  - Database: ‚úÖ OK
  - OpenRouter: ‚úÖ OK (status 200)
  - Redis: ‚ö†Ô∏è Skipped (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)
- ‚úÖ Ready Check (`/api/health/ready`)
- ‚úÖ Main Page (`/`)

### Worker (Railway) ‚úÖ
- ‚úÖ Health Check (`/health`)
- ‚úÖ Metrics JSON (`/metrics`)
  - Redis: ‚úÖ Connected
  - Uptime: ‚úÖ ~576 —Å–µ–∫—É–Ω–¥ (9+ –º–∏–Ω—É—Ç —Ä–∞–±–æ—Ç—ã)
  - Concurrency: ‚úÖ 5
  - Jobs: 0 (–ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–¥–∞—á)
- ‚úÖ Prometheus Metrics (`/metrics/prometheus`)
- ‚úÖ Sentry Integration (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞)

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ ‚úÖ
- ‚úÖ Supabase - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Upstash Redis - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ OpenRouter - API —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Sentry - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ ‚úÖ
- ‚úÖ UptimeRobot - –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ Prometheus Metrics - —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Health Checks - –≤—Å–µ –æ—Ç–≤–µ—á–∞—é—Ç

---

## üîç –ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### 1. **End-to-End Job Processing** üî¥ –ö–†–ò–¢–ò–ß–ù–û

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á.

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
1. –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –∑–∞–¥–∞—á—É —á–µ—Ä–µ–∑ API (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∑–∞–¥–∞—á–∞ –ø–æ–ø–∞–ª–∞ –≤ –æ—á–µ—Ä–µ–¥—å Redis
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Worker –æ–±—Ä–∞–±–æ—Ç–∞–ª –∑–∞–¥–∞—á—É
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –º–µ—Ç—Ä–∏–∫–∏ –æ–±–Ω–æ–≤–∏–ª–∏—Å—å

**–ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å:**
- –í–∞—Ä–∏–∞–Ω—Ç 1: –í–æ–π—Ç–∏ –≤ UI –∏ —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É –≤—Ä—É—á–Ω—É—é
- –í–∞—Ä–∏–∞–Ω—Ç 2: –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π endpoint –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
- –í–∞—Ä–∏–∞–Ω—Ç 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π endpoint `/api/jobs` —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π

**–°—Ç–∞—Ç—É—Å:** ‚è≥ –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

---

### 2. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** üü° –í–ê–ñ–ù–û

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- –í—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ Vercel –∏ Railway
- `ENCRYPTION_KEY` –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤)
- `SENTRY_DSN` –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
```bash
# –ï—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
./scripts/check-env-production.sh

# –ò–ª–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Ä—É—á–Ω—É—é –≤ Vercel –∏ Railway dashboards
```

**–°—Ç–∞—Ç—É—Å:** ‚è≥ –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞

---

### 3. **–°–∫—Ä–∏–ø—Ç—ã –±—ç–∫–∞–ø–æ–≤** üü° –í–ê–ñ–ù–û

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- –°–∏–Ω—Ç–∞–∫—Å–∏—Å —Å–∫—Ä–∏–ø—Ç–æ–≤ –±—ç–∫–∞–ø–æ–≤
- –†–∞–±–æ—Ç–∞ –±—ç–∫–∞–ø–∞ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω `SUPABASE_SERVICE_ROLE_KEY`)
- Cron job –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

**–°—Ç–∞—Ç—É—Å:** ‚è≥ –¢—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞

---

### 4. **API Endpoints —Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π** üü° –í–ê–ñ–ù–û

**Endpoints –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
- `/api/auth/signin` - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- `/api/integrations/kommo/status` - —Å—Ç–∞—Ç—É—Å Kommo
- `/api/crm/kommo?action=pipelines` - CRM –¥–∞–Ω–Ω—ã–µ
- `/api/subscriptions` - –ø–æ–¥–ø–∏—Å–∫–∏
- `/api/jobs` (POST) - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á

**–°—Ç–∞—Ç—É—Å:** ‚è≥ –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ UI

---

### 5. **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∑–∞–¥–∞—á** üü¢ –û–ü–¶–ò–û–ù–ê–õ–¨–ù–û

**–¢–∏–ø—ã –∑–∞–¥–∞—á:**
- `process-asset` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∞—Å—Å–µ—Ç–æ–≤
- `extract-knowledge-graph` - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞ –∑–Ω–∞–Ω–∏–π
- `crm:sync-pipelines` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è CRM
- `kommo:send-message` - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

**–°—Ç–∞—Ç—É—Å:** ‚è≥ –ú–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

---

## üìä –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞

### ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞: **85%**

**–†–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ –í—Å–µ –±–∞–∑–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Frontend, Worker, DB, Redis)
- ‚úÖ –í—Å–µ health checks
- ‚úÖ –í—Å–µ metrics endpoints
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç

**–¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- ‚è≥ End-to-End –ø–æ—Ç–æ–∫–∏ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)
- ‚è≥ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞)
- ‚è≥ –°–∫—Ä–∏–ø—Ç—ã –±—ç–∫–∞–ø–æ–≤ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞)

**–ú–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å:**
- üü¢ –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- üü¢ –ü–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Kommo
- üü¢ –î–µ—Ç–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∑–∞–¥–∞—á

---

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –°–¥–µ–ª–∞—Ç—å —Å–µ–π—á–∞—Å:
1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å —Å–∫—Ä–∏–ø—Ç–æ–≤ –±—ç–∫–∞–ø–æ–≤
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–µ—Å–ª–∏ –µ—Å—Ç—å —Å–∫—Ä–∏–ø—Ç)
3. ‚è≥ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ —á–µ—Ä–µ–∑ UI

### –°–¥–µ–ª–∞—Ç—å –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è:
4. ‚è≥ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å End-to-End –ø–æ—Ç–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–¥–∞—á
5. ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –±—ç–∫–∞–ø–æ–≤ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã)

### –ú–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å:
6. üü¢ –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
7. üü¢ –ü–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Å–µ—Ö –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

---

## ‚úÖ –í—ã–≤–æ–¥

**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –±–∞–∑–æ–≤–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.**

–í—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç:
- ‚úÖ Frontend –¥–æ—Å—Ç—É–ø–µ–Ω
- ‚úÖ Worker –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–¥–∞—á–∏
- ‚úÖ Database –ø–æ–¥–∫–ª—é—á–µ–Ω–∞
- ‚úÖ Redis –ø–æ–¥–∫–ª—é—á–µ–Ω
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

**–î–ª—è –ø–æ–ª–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω—É–∂–Ω–æ:**
1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –∑–∞–¥–∞—á–∏ (—á–µ—Ä–µ–∑ UI)
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∫—Ä–∏–ø—Ç—ã –±—ç–∫–∞–ø–æ–≤

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–†–û–ï–ö–¢ –§–£–ù–ö–¶–ò–û–ù–ê–õ–ï–ù, –¢–†–ï–ë–£–ï–¢–°–Ø –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï END-TO-END –ü–û–¢–û–ö–û–í**

