# üóëÔ∏è –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π REDIS_URL –∏–∑ Railway

**–î–∞—Ç–∞:** 2025-01-26  
**–ü—Ä–æ–±–ª–µ–º–∞:** –í Railway –µ—Å—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `REDIS_URL` —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ö–æ—Å—Ç–æ–º `40416.upstash.io`

---

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–í Railway –µ—Å—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `REDIS_URL` —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º:
```
rediss://40416.upstash.io:6380
```

–≠—Ç–æ—Ç —Ö–æ—Å—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, —á—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç DNS –æ—à–∏–±–∫–∏:
```
getaddrinfo ENOTFOUND usw1-merry-term-40416.upstash.io
```

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –®–∞–≥ 1: –û—Ç–∫—Ä—ã—Ç—å Railway Dashboard

1. –û—Ç–∫—Ä—ã—Ç—å: https://railway.app
2. –í–æ–π—Ç–∏ –≤ –∞–∫–∫–∞—É–Ω—Ç
3. –í—ã–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç: **gpt-agent-platform**
4. –í—ã–±—Ä–∞—Ç—å —Å–µ—Ä–≤–∏—Å: **Worker**

### –®–∞–≥ 2: –£–¥–∞–ª–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é REDIS_URL

1. –ü–µ—Ä–µ–π—Ç–∏ –≤ **Settings** ‚Üí **Variables**
2. –ù–∞–π—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `REDIS_URL`
3. –ù–∞–∂–∞—Ç—å –Ω–∞ **—Ç—Ä–∏ —Ç–æ—á–∫–∏** (‚ãÆ) —Å–ø—Ä–∞–≤–∞ –æ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
4. –í—ã–±—Ä–∞—Ç—å **Delete**
5. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

**–î–æ–ª–∂–Ω—ã –æ—Å—Ç–∞—Ç—å—Å—è:**
- ‚úÖ `UPSTASH_REDIS_REST_URL` = `https://composed-primate-14678.upstash.io`
- ‚úÖ `UPSTASH_REDIS_REST_TOKEN` = `AYcUASQg...`
- ‚ùå `REDIS_URL` - **–£–î–ê–õ–ï–ù–ê**

### –®–∞–≥ 4: –†–µ–¥–µ–ø–ª–æ–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç Worker.

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é:
```bash
cd services/worker
railway up
```

---

## üìä –ü–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è

**–ö–æ–¥ Worker —Ç–µ–ø–µ—Ä—å:**
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç `REDIS_URL` (–µ—Å–ª–∏ –æ–Ω–∞ –µ—Å—Ç—å)
- ‚úÖ –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `UPSTASH_REDIS_REST_URL`
- ‚úÖ –§–æ—Ä–º–∏—Ä—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL: `rediss://default:TOKEN@composed-primate-14678.upstash.io:6380`

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ DNS
- ‚úÖ Redis –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ
- ‚úÖ Health check –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `"redis": { "status": "connected" }`

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞

### –ß–µ—Ä–µ–∑ Railway CLI:

```bash
cd services/worker
railway variables | grep -E "REDIS|UPSTASH"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚ùå `REDIS_URL` - –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ —Å–ø–∏—Å–∫–µ
- ‚úÖ `UPSTASH_REDIS_REST_URL` - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å
- ‚úÖ `UPSTASH_REDIS_REST_TOKEN` - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å

### –ß–µ—Ä–µ–∑ –ª–æ–≥–∏:

```bash
railway logs --tail 100 | grep "Redis URL constructed"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
Redis URL constructed from REST URL (REDIS_URL ignored)
redisHost: composed-primate-14678.upstash.io
```

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-01-26

