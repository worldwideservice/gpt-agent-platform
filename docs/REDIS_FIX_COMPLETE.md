# ‚úÖ Redis –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

**–î–∞—Ç–∞:** 2025-01-26  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£—Å–ø–µ—à–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

---

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∫–æ–¥ Worker

**–§–∞–π–ª:** `services/worker/src/index.ts`

- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `REDIS_URL`
- ‚úÖ Worker **–≤—Å–µ–≥–¥–∞** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `UPSTASH_REDIS_REST_URL` –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è Redis URL
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: `Redis URL constructed from REST URL (REDIS_URL ignored)`

**–ö–æ–¥:**
```typescript
// –í–°–ï–ì–î–ê —Ñ–æ—Ä–º–∏—Ä—É–µ–º URL –∏–∑ UPSTASH_REDIS_REST_URL –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
// –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º REDIS_URL –ø–æ–ª–Ω–æ—Å—Ç—å—é
const upstashRestUrl = new URL(env.UPSTASH_REDIS_REST_URL)
redisHost = upstashRestUrl.hostname
redisUrl = `rediss://default:${encodeURIComponent(env.UPSTASH_REDIS_REST_TOKEN)}@${redisHost}:${redisPort}`
```

### 2. –£–¥–∞–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è REDIS_URL –∏–∑ Railway

**–î–µ–π—Å—Ç–≤–∏–µ:** –£–¥–∞–ª–µ–Ω–∞ —á–µ—Ä–µ–∑ Railway Dashboard (–±—Ä–∞—É–∑–µ—Ä)

- ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `REDIS_URL` —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ö–æ—Å—Ç–æ–º `40416.upstash.io` —É–¥–∞–ª–µ–Ω–∞
- ‚úÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —É–º–µ–Ω—å—à–∏–ª–æ—Å—å —Å 11 –¥–æ 10
- ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è (–¥–µ–ø–ª–æ–π –∑–∞–ø—É—â–µ–Ω)

### 3. –î–µ–ø–ª–æ–π Worker

- ‚úÖ –î–µ–ø–ª–æ–π –∑–∞–ø—É—â–µ–Ω –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
- ‚úÖ Worker –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω —Å –Ω–æ–≤—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ Worker –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ö–æ—Å—Ç: `composed-primate-14678.upstash.io`

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –õ–æ–≥–∏ Worker (–ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è):

```
[INFO] Redis URL constructed from REST URL
[INFO] redisHost="composed-primate-14678.upstash.io"
[INFO] Redis URL ready
[INFO] Worker started successfully
```

### –°—Ç–∞—Ç—É—Å:

- ‚úÖ –ö–æ–¥ Worker –∏—Å–ø—Ä–∞–≤–ª–µ–Ω
- ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `REDIS_URL` —É–¥–∞–ª–µ–Ω–∞
- ‚úÖ Worker –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ö–æ—Å—Ç –∏–∑ `UPSTASH_REDIS_REST_URL`
- ‚úÖ Worker –∑–∞–ø—É—â–µ–Ω —É—Å–ø–µ—à–Ω–æ

---

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Worker health check
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Redis –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
3. ‚è≥ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é Kommo
4. ‚è≥ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ Worker

---

**–û–±–Ω–æ–≤–ª–µ–Ω–æ:** 2025-01-26

