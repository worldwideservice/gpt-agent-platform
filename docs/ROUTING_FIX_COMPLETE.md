# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ú–ê–†–®–†–£–¢–ò–ó–ê–¶–ò–ò - –ó–ê–í–ï–†–®–ï–ù–û

**–î–∞—Ç–∞:** 2025-01-26  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

---

## üéØ –ü–†–û–ë–õ–ï–ú–ê

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª, —á—Ç–æ –Ω—É–∂–Ω–æ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é –∏ –æ—Ç–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –∏ –≤–∫–ª–∞–¥–æ–∫ –Ω–∞ —Å–∞–π—Ç–µ.

---

## üîß –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### 1. **Sidebar - –ü–æ–ª—É—á–µ–Ω–∏–µ tenantId**
**–§–∞–π–ª:** `components/layout/Sidebar.tsx`

**–ü—Ä–æ–±–ª–µ–º–∞:** Sidebar –ø–æ–ª—É—á–∞–ª `tenantId` —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ props, –Ω–æ –µ—Å–ª–∏ props –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–ª–∏—Å—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ, —Å—Å—ã–ª–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å –±–µ–∑ tenant-id.

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω `useParams` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è `tenantId` –∏–∑ URL –∫–∞–∫ fallback
- –¢–µ–ø–µ—Ä—å `actualTenantId = tenantId || (params?.tenantId as string) || ''`
- –í—Å–µ —Å—Å—ã–ª–∫–∏ –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —Ç–µ–ø–µ—Ä—å –≤—Å–µ–≥–¥–∞ –≤–∫–ª—é—á–∞—é—Ç tenant-id

**–ö–æ–¥:**
```typescript
export const Sidebar = ({ organizations, activeOrganizationId, tenantId, isOpen = false }: SidebarProps) => {
  const pathname = usePathname()
  const params = useParams() // –î–æ–±–∞–≤–ª–µ–Ω–æ
  const { close } = useSidebar()
  
  // –ü–æ–ª—É—á–∞–µ–º tenantId –∏–∑ props –∏–ª–∏ –∏–∑ URL (fallback)
  const actualTenantId = tenantId || (params?.tenantId as string) || ''
  const navigation = getNavigation(() => {}, actualTenantId)
  
  const basePath = actualTenantId ? `/manage/${actualTenantId}` : '/'
  // ...
}
```

---

### 2. **Breadcrumb - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ tenant-id –∫ –ø—É—Ç—è–º**
**–§–∞–π–ª:** `components/refine-ui/layout/breadcrumb.tsx`

**–ü—Ä–æ–±–ª–µ–º–∞:** Breadcrumb –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª `useLink` –∏–∑ Refine, –∫–æ—Ç–æ—Ä—ã–π –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª –ø—É—Ç–∏ –±–µ–∑ tenant-id.

**–†–µ—à–µ–Ω–∏–µ:**
- –ó–∞–º–µ–Ω–µ–Ω `useLink` –Ω–∞ Next.js `Link`
- –î–æ–±–∞–≤–ª–µ–Ω `useParams` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è `tenantId`
- –í—Å–µ –ø—É—Ç–∏ breadcrumbs —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –∏ –¥–æ–ø–æ–ª–Ω—è—é—Ç—Å—è tenant-id
- –ò—Å–∫–ª—é—á–µ–Ω—ã –≤–Ω–µ—à–Ω–∏–µ —Å—Å—ã–ª–∫–∏ (http, /docs) –∏–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏

**–ö–æ–¥:**
```typescript
export function Breadcrumb() {
  const params = useParams()
  const tenantId = (params?.tenantId as string) || ""
  
  // –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (Dashboard) —Å tenant-id
  const homeHref = tenantId ? `/manage/${tenantId}` : (rootRouteResource.matchedRoute ?? "/");
  
  // –û—Å—Ç–∞–ª—å–Ω—ã–µ breadcrumbs —Å tenant-id
  for (const { label, href } of breadcrumbs) {
    if (!href) {
      // ...
      continue;
    }

    // –î–æ–±–∞–≤–ª—è–µ–º tenant-id –∫ –ø—É—Ç–∏, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
    const finalHref = tenantId && !href.startsWith(`/manage/${tenantId}`) && !href.startsWith('http') && !href.startsWith('/docs')
      ? `/manage/${tenantId}${href.startsWith('/') ? href : `/${href}`}`
      : href;

    list.push({
      key: `breadcrumb-item-${label}`,
      href: finalHref,
      Component: <Link href={finalHref}>{label}</Link>,
    });
  }
}
```

---

## ‚úÖ –£–ñ–ï –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´ (–∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π)

### 3. **CreateButton**
**–§–∞–π–ª:** `components/refine-ui/buttons/create.tsx`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `useParams` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è `tenantId`
- –î–æ–±–∞–≤–ª—è–µ—Ç tenant-id –∫ –ø—É—Ç–∏ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞

### 4. **EditButton**
**–§–∞–π–ª:** `components/refine-ui/buttons/edit.tsx`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `useParams` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è `tenantId`
- –î–æ–±–∞–≤–ª—è–µ—Ç tenant-id –∫ –ø—É—Ç–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–∞

### 5. **Test Chat**
**–§–∞–π–ª:** `app/manage/[tenantId]/test-chat/_components/ChatInput.tsx`
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ —Å –ø—É—Å—Ç—ã–º `value` –≤ `Select`
- –¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `selectedAgentId || undefined`

### 6. **Layout**
**–§–∞–π–ª:** `app/manage/[tenantId]/layout.tsx`
- `tenantId` —Ç–µ–ø–µ—Ä—å —è–≤–Ω–æ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ `HeaderWithSidebar`
- –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –ø–µ—Ä–µ–¥–∞—á—É tenant-id –≤ Sidebar

---

## üìã –ü–†–û–í–ï–†–ï–ù–ù–´–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´

–í—Å–µ —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—É—Ç–∏ —Å tenant-id:

1. ‚úÖ **Sidebar** - –≤—Å–µ —Å—Å—ã–ª–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
2. ‚úÖ **Breadcrumb** - –≤—Å–µ –ø—É—Ç–∏ breadcrumbs
3. ‚úÖ **CreateButton** - –∫–Ω–æ–ø–∫–∏ —Å–æ–∑–¥–∞–Ω–∏—è
4. ‚úÖ **EditButton** - –∫–Ω–æ–ø–∫–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
5. ‚úÖ **–ü—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö:**
   - `app/manage/[tenantId]/ai-agents/page.tsx` - —Å—Å—ã–ª–∫–∏ –Ω–∞ –∞–≥–µ–Ω—Ç–æ–≤
   - `app/manage/[tenantId]/knowledge-categories/page.tsx` - —Å—Å—ã–ª–∫–∏ –Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
   - `app/manage/[tenantId]/knowledge-items/page.tsx` - —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å—Ç–∞—Ç—å–∏
6. ‚úÖ **–í–∫–ª–∞–¥–∫–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∞–≥–µ–Ω—Ç–∞:**
   - –ò—Å–ø–æ–ª—å–∑—É—é—Ç –ª–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (Tabs —Å defaultValue/value)
   - –†–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
   - –í—Å–µ 8 –≤–∫–ª–∞–¥–æ–∫ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã

---

## üéØ –†–ï–ó–£–õ–¨–¢–ê–¢

–¢–µ–ø–µ—Ä—å –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–µ–π:

- ‚úÖ **Sidebar** - –≤—Å–µ —Å—Å—ã–ª–∫–∏ –≤–∫–ª—é—á–∞—é—Ç tenant-id
- ‚úÖ **Breadcrumb** - –≤—Å–µ –ø—É—Ç–∏ –≤–∫–ª—é—á–∞—é—Ç tenant-id
- ‚úÖ **–ö–Ω–æ–ø–∫–∏ Create/Edit** - –≤—Å–µ –ø—É—Ç–∏ –≤–∫–ª—é—á–∞—é—Ç tenant-id
- ‚úÖ **–ü—Ä—è–º—ã–µ —Å—Å—ã–ª–∫–∏** - –≤—Å–µ —Å—Å—ã–ª–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö –≤–∫–ª—é—á–∞—é—Ç tenant-id
- ‚úÖ **–í–∫–ª–∞–¥–∫–∏** - —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ —á–µ—Ä–µ–∑ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- ‚úÖ **–í—Å–µ –ø–µ—Ä–µ—Ö–æ–¥—ã** - —Å–æ—Ö—Ä–∞–Ω—è—é—Ç tenant-id –≤ URL

---

## üöÄ –î–ï–ü–õ–û–ô

–ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ `main`:
- `components/layout/Sidebar.tsx`
- `components/refine-ui/layout/breadcrumb.tsx`

Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è.

---

## üìù –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

1. ‚úÖ –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–µ–ø–ª–æ—è –Ω–∞ Vercel
2. ‚è≥ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –ø–µ—Ä–µ—Ö–æ–¥—ã –Ω–∞ production
3. ‚è≥ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –≤—Å–µ—Ö –≤–∫–ª–∞–¥–æ–∫ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∞–≥–µ–Ω—Ç–∞
4. ‚è≥ –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ —Å—Å—ã–ª–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 2025-01-26  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

