# üìö –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—É GPT Agent Platform

## üéØ –ß—Ç–æ —Ç–∞–∫–æ–µ GPT Agent Platform?

**GPT Agent Platform** ‚Äî —ç—Ç–æ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è SaaS-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è, –æ–±—É—á–µ–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è AI-–∞–≥–µ–Ω—Ç–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –≤ CRM-—Å–∏—Å—Ç–µ–º–∞—Ö. –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ–±—â–µ–Ω–∏–µ —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏, –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–¥–µ–ª–æ–∫ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á —á–µ—Ä–µ–∑ AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–≤.

---

## üö™ –ü—É—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: –æ—Ç –≤—Ö–æ–¥–∞ –¥–æ —Ä–∞–±–æ—Ç—ã

### 1. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**

#### –õ–µ–Ω–¥–∏–Ω–≥ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (`/`)
- –û–ø–∏—Å–∞–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
- –ö–Ω–æ–ø–∫–∏ "–ù–∞—á–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ" –∏ "–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–µ–º–æ"
- –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ `/login` –∏–ª–∏ `/register`

#### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (`/register`)
**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É: Email, –ü–∞—Ä–æ–ª—å, –ò–º—è, –§–∞–º–∏–ª–∏—è
2. –°–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞—ë—Ç:
   - –ê–∫–∫–∞—É–Ω—Ç –≤ Supabase Auth
   - –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç —Ä–æ–ª—å "owner" –≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
3. –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ ‚Üí –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ `/login`

**API:** `POST /api/auth/register`
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Zod
- –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª—è (bcrypt)
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

#### –í—Ö–æ–¥ (`/login`)
**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –í–≤–æ–¥ email –∏ –ø–∞—Ä–æ–ª—è
2. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ NextAuth + Supabase
3. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ —Å `user.id`, `user.orgId`
4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞
5. –ï—Å–ª–∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ –Ω–µ –∑–∞–≤–µ—Ä—à—ë–Ω ‚Üí `/onboarding`
6. –ï—Å–ª–∏ –∑–∞–≤–µ—Ä—à—ë–Ω ‚Üí `/` (Dashboard)

**API:** `GET/POST /api/auth/[...nextauth]` (NextAuth)

#### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
- `/reset-password/request` ‚Äî –∑–∞–ø—Ä–æ—Å —Å—Å—ã–ª–∫–∏ –Ω–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
- `/reset-password/[token]` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤–æ–≥–æ –ø–∞—Ä–æ–ª—è

---

### 2. **–û–Ω–±–æ—Ä–¥–∏–Ω–≥ (`/onboarding`)**

**–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:**
1. **–®–∞–≥ 1: –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ**
   - –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
   - –ö–Ω–æ–ø–∫–∞ "–ù–∞—á–∞—Ç—å"

2. **–®–∞–≥ 2: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ CRM (Kommo)**
   - OAuth 2.0 –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
   - –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ Kommo –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
   - –ü–æ–ª—É—á–µ–Ω–∏–µ `access_token` –∏ `refresh_token`
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `crm_connections` (–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ)
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤–æ—Ä–æ–Ω–æ–∫, —Å—Ç–∞—Ç—É—Å–æ–≤, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

3. **–®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –∞–≥–µ–Ω—Ç–∞**
   - –ë–∞–∑–æ–≤–∞—è —Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è
   - –ò–º—è, –º–æ–¥–µ–ª—å, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞

4. **–®–∞–≥ 4: –û–±—É—á–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞**
   - –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –±–∞–∑—É –∑–Ω–∞–Ω–∏–π
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ —Å—Ç–∞—Ç–µ–π
   - –ò–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥ –∫ –æ–±—É—á–µ–Ω–∏—é –ø–æ–∑–∂–µ

**API:** 
- `GET /api/onboarding/status` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
- `POST /api/onboarding/agent` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ –∞–≥–µ–Ω—Ç–∞

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `OnboardingClient.tsx`
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∞–≥–∞–º–∏ —á–µ—Ä–µ–∑ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –≤ –ë–î
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞

---

## üè† –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (Dashboard) ‚Äî `/`

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—Ö–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ø–∞–¥–∞–µ—Ç –Ω–∞ Dashboard.

### üìä –ú–µ—Ç—Ä–∏–∫–∏ –Ω–∞ Dashboard

**4 –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:**

1. **–û—Ç–≤–µ—Ç—ã –ò–ò –∑–∞ —ç—Ç–æ—Ç –º–µ—Å—è—Ü**
   - –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤ –∞–≥–µ–Ω—Ç–æ–≤ –∑–∞ —Ç–µ–∫—É—â–∏–π –º–µ—Å—è—Ü
   - –ü—Ä–æ—Ü–µ–Ω—Ç–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∫ –ø—Ä–æ—à–ª–æ–º—É –º–µ—Å—è—Ü—É
   - –ò–∫–æ–Ω–∫–∞: MessageSquare

2. **–û—Ç–≤–µ—Ç—ã –ò–ò –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π**
   - –°—É–º–º–∞ –æ—Ç–≤–µ—Ç–æ–≤ –∑–∞ –Ω–µ–¥–µ–ª—é
   - –ò–∫–æ–Ω–∫–∞: CalendarCheck2

3. **–û—Ç–≤–µ—Ç—ã –ò–ò —Å–µ–≥–æ–¥–Ω—è**
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤ –∑–∞ —Ç–µ–∫—É—â–∏–π –¥–µ–Ω—å
   - –ò–∫–æ–Ω–∫–∞: Sparkles

4. **–ê–≥–µ–Ω—Ç—ã**
   - –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤
   - –ò–∫–æ–Ω–∫–∞: Bot

### üìà –ì—Ä–∞—Ñ–∏–∫–∏

1. **–õ–∏–Ω–µ–π–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫: –û—Ç–≤–µ—Ç—ã –ò–ò –∑–∞ —ç—Ç–æ—Ç –º–µ—Å—è—Ü**
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∏–Ω–∞–º–∏–∫—É –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 6 –º–µ—Å—è—Ü–µ–≤
   - –î–∞–Ω–Ω—ã–µ –∏–∑ `agent_usage_daily`

2. **–õ–∏–Ω–µ–π–Ω—ã–π –≥—Ä–∞—Ñ–∏–∫: –û—Ç–≤–µ—Ç—ã –ò–ò –∑–∞ –¥–µ–Ω—å**
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –¥–∏–Ω–∞–º–∏–∫—É –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 14 –¥–Ω–µ–π
   - –î–∞–Ω–Ω—ã–µ –∏–∑ `agent_usage_daily`

3. **–°—Ç–æ–ª–±—á–∞—Ç—ã–π –≥—Ä–∞—Ñ–∏–∫: –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π**
   - –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏
   - –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ ‚Äî –í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ

4. **–ù–µ–¥–∞–≤–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**
   - –°–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–æ–±—ã—Ç–∏–π —Å–∏—Å—Ç–µ–º—ã
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –¥–µ–π—Å—Ç–≤–∏—è –∞–≥–µ–Ω—Ç–æ–≤, –∏–∑–º–µ–Ω–µ–Ω–∏—è

**API:** `GET /api/dashboard`
- –ê–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `getDashboardStats()`, `getWeeklyBarChartData()`, –∏ —Ç.–¥.

---

## ü§ñ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ AI-–∞–≥–µ–Ω—Ç–∞–º–∏ (`/agents`)

### –°–ø–∏—Å–æ–∫ –∞–≥–µ–Ω—Ç–æ–≤

**–°—Ç—Ä–∞–Ω–∏—Ü–∞:** `/agents`
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `AgentsClient.tsx`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É (–ê–∫—Ç–∏–≤–µ–Ω/–ù–µ–∞–∫—Ç–∏–≤–µ–Ω)
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ ‚Äî –∫–Ω–æ–ø–∫–∞ "–°–æ–∑–¥–∞—Ç—å –∞–≥–µ–Ω—Ç–∞"
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî –∫–ª–∏–∫ –Ω–∞ –∞–≥–µ–Ω—Ç–∞ –∏–ª–∏ –∫–Ω–æ–ø–∫–∞ "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"
- –£–¥–∞–ª–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞

**API:**
- `GET /api/agents` ‚Äî —Å–ø–∏—Å–æ–∫ –∞–≥–µ–Ω—Ç–æ–≤
- `POST /api/agents` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞
- `PATCH /api/agents/[id]` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞
- `DELETE /api/agents/[id]` ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞

### –°–æ–∑–¥–∞–Ω–∏–µ/–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞

**–°—Ç—Ä–∞–Ω–∏—Ü–∞:** `/agents/create` –∏–ª–∏ `/agents/[id]/edit`
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `AgentEditForm.tsx`

#### –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

1. **–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è**
   - –ù–∞–∑–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞
   - –û–ø–∏—Å–∞–Ω–∏–µ
   - –°—Ç–∞—Ç—É—Å (–ê–∫—Ç–∏–≤–µ–Ω/–ù–µ–∞–∫—Ç–∏–≤–µ–Ω)
   - –Ø–∑—ã–∫ –æ–±—â–µ–Ω–∏—è

2. **AI –ú–æ–¥–µ–ª—å**
   - –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ –∏–∑ OpenRouter (GPT-4, Claude, Llama –∏ —Ç.–¥.)
   - –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (0-2) ‚Äî –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–æ–≤
   - Max Tokens ‚Äî –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –æ—Ç–≤–µ—Ç–∞
   - Delay (—Å–µ–∫) ‚Äî –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –æ—Ç–≤–µ—Ç–æ–º

3. **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∞–≥–µ–Ω—Ç–∞**
   - –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç
   - –†–æ–ª—å –∞–≥–µ–Ω—Ç–∞, —Å—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è
   - –ü—Ä–∞–≤–∏–ª–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è
   - –ü—Ä–∏–º–µ—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤

4. **–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π**
   - –í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∑–Ω–∞–Ω–∏–π
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–ª–∏ –≤—ã–±–æ—Ä–æ—á–Ω–æ
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤

5. **–ö–∞–Ω–∞–ª—ã —Å–≤—è–∑–∏**
   - Email
   - –¢–µ–ª–µ—Ñ–æ–Ω
   - WhatsApp
   - Telegram
   - –î—Ä—É–≥–∏–µ –∫–∞–Ω–∞–ª—ã
   - –í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–≤

6. **–í–æ—Ä–æ–Ω–∫–∏ –ø—Ä–æ–¥–∞–∂ (Pipelines)**
   - –í—ã–±–æ—Ä –≤–æ—Ä–æ–Ω–∫–∏ –∏–∑ Kommo
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —ç—Ç–∞–ø–æ–≤ (stages)
   - –ü—Ä–∞–≤–∏–ª–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞ –º–µ–∂–¥—É —ç—Ç–∞–ø–∞–º–∏
   - –£—Å–ª–æ–≤–∏—è —Å–º–µ–Ω—ã —Å—Ç–∞—Ç—É—Å–∞

**API:**
- `GET /api/agents/[id]` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞
- `PATCH /api/agents/[id]` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫

### –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–≥–µ–Ω—Ç–∞ (`/agents/[id]`)

**–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:**
- –ù–∞–∑–≤–∞–Ω–∏–µ, —Å—Ç–∞—Ç—É—Å, –º–æ–¥–µ–ª—å
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∏

**–í–∫–ª–∞–¥–∫–∏:**
1. **–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è** ‚Äî –æ–±–∑–æ—Ä –∞–≥–µ–Ω—Ç–∞
2. **–û–±—É—á–µ–Ω–∏–µ** ‚Äî –ø–µ—Ä–µ—Ö–æ–¥ –∫ –æ–±—É—á–µ–Ω–∏—é
3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Äî —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞
4. **–í–æ—Ä–æ–Ω–∫–∏** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ pipelines
5. **–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** ‚Äî Sequences

---

## üéì –û–±—É—á–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ (`/agents/[id]/training`)

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `AgentTrainingPage.tsx`

### –¢—Ä–∏ —Å–ø–æ—Å–æ–±–∞ –æ–±—É—á–µ–Ω–∏—è:

#### 1. **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–Ω–∞–Ω–∏—è** (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–í–∫–ª–∞–¥–∫–∞ "–ó–Ω–∞–Ω–∏—è":**
- –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∑–Ω–∞–Ω–∏–π
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–µ–π –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç, Markdown
- –ü–æ–∏—Å–∫ –ø–æ —Å—Ç–∞—Ç—å—è–º
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ

**–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –°—Ç–∞—Ç—å–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `knowledge_articles`
- –ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞ –∞–≥–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Å—Ç–∞—Ç—å–∏ —á–µ—Ä–µ–∑ RAG
- –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –Ω–∞—Ö–æ–¥–∏—Ç —Å–∞–º—ã–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–µ —Å—Ç–∞—Ç—å–∏

#### 2. **–ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤** (RAG)

**–í–∫–ª–∞–¥–∫–∞ "–§–∞–π–ª—ã":**
- –ó–∞–≥—Ä—É–∑–∫–∞: PDF, DOCX, TXT, MD
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:
  1. –ü–∞—Ä—Å–∏–Ω–≥ —Ñ–∞–π–ª–∞
  2. –†–∞–∑–±–∏–≤–∫–∞ –Ω–∞ —á–∞–Ω–∫–∏ (chunks)
  3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è embeddings (OpenAI ada-002 –∏–ª–∏ OpenRouter)
  4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `knowledge_chunks` (pgvector)
  5. –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å–≤—è–∑–µ–π (Knowledge Graph)

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `FileUpload.tsx`
- Drag & Drop –∑–∞–≥—Ä—É–∑–∫–∞
- –ü—Ä–æ–≥—Ä–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –°–ø–∏—Å–æ–∫ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

**API:**
- `POST /api/agents/[id]/assets` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
- `GET /api/agents/[id]/assets` ‚Äî —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤
- `DELETE /api/agents/[id]/assets/[assetId]` ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ

#### 3. **–°–∫—Ä–∏–ø—Ç—ã –ø—Ä–æ–¥–∞–∂**

**–í–∫–ª–∞–¥–∫–∞ "–°–∫—Ä–∏–ø—Ç—ã":**
- –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —ç—Ç–∞–ø–æ–≤ –≤–æ—Ä–æ–Ω–∫–∏
- –ü—Ä–∏–º–µ—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ —Ç–∏–ø–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã
- –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–∑—Ä–∞–∂–µ–Ω–∏—è
- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–æ–≤

**API:**
- `GET /api/agents/[id]/scripts` ‚Äî —Å–ø–∏—Å–æ–∫ —Å–∫—Ä–∏–ø—Ç–æ–≤
- `POST /api/agents/[id]/scripts` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞
- `PATCH /api/agents/[id]/scripts/[id]` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

---

## üí¨ –¢–µ—Å—Ç–æ–≤—ã–π —á–∞—Ç (`/chat`)

**–°—Ç—Ä–∞–Ω–∏—Ü–∞:** `/chat`
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `ChatPage` (client component)

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:

1. **–í—ã–±–æ—Ä –∞–≥–µ–Ω—Ç–∞**
   - Dropdown —Å–æ —Å–ø–∏—Å–∫–æ–º –∞–≥–µ–Ω—Ç–æ–≤
   - –ö–∞–∂–¥—ã–π –∞–≥–µ–Ω—Ç –∏–º–µ–µ—Ç —Å–≤–æ–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –±–∞–∑—É –∑–Ω–∞–Ω–∏–π

2. **–í—ã–±–æ—Ä –±–µ—Å–µ–¥—ã**
   - –°–ø–∏—Å–æ–∫ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –±–µ—Å–µ–¥
   - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –±–µ—Å–µ–¥—ã
   - –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π

3. **–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è**
   - –í–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞
   - –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ `/api/chat`
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –æ—Ç –∞–≥–µ–Ω—Ç–∞
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

4. **–ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –∞–≥–µ–Ω—Ç–∞**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∞–∑—É –∑–Ω–∞–Ω–∏–π (RAG)
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–∞–º—è—Ç—å –∞–≥–µ–Ω—Ç–∞ (–¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è –∏ –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–∞—è)
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∞–≥–µ–Ω—Ç–∞
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∫—Ä–∏–ø—Ç—ã (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)

5. **–ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞**
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
   - –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ: –º–æ–¥–µ–ª—å, —Ç–æ–∫–µ–Ω—ã, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –ª–∏ –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π

**API:** `POST /api/chat`

**–ü—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
1. –°–æ–∑–¥–∞–Ω–∏–µ/–ø–æ–ª—É—á–µ–Ω–∏–µ –±–µ—Å–µ–¥—ã
2. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. –ü–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –∑–Ω–∞–Ω–∏–π (RAG)
4. –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –∞–≥–µ–Ω—Ç–∞
5. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞
6. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ —á–µ—Ä–µ–∑ OpenRouter
7. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –∞–≥–µ–Ω—Ç–∞
8. –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–∞–º—è—Ç–∏ (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)
9. –ê–Ω–∞–ª–∏–∑ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ)

---

## üìö –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π (`/knowledge-base`)

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ (`/knowledge-base/categories`)

**–°—Ç—Ä–∞–Ω–∏—Ü–∞:** –°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `CategoriesClient.tsx`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- –£–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (drag & drop)
- –ü–æ–∏—Å–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º

**–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:** `/knowledge-base/categories/[id]`
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –°–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

**API:**
- `GET /api/knowledge-base/categories` ‚Äî —Å–ø–∏—Å–æ–∫
- `POST /api/knowledge-base/categories` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ
- `PATCH /api/knowledge-base/categories/[id]` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- `DELETE /api/knowledge-base/categories/[id]` ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ

### –°—Ç–∞—Ç—å–∏ (`/knowledge-base/articles`)

**–°—Ç—Ä–∞–Ω–∏—Ü–∞:** –°–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `ArticlesClient.tsx`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Å—Ç–∞—Ç–µ–π
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- –ü–æ–∏—Å–∫ –ø–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º—É
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å—Ç–∞—Ç—å–∏
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏
- –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏

**–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—Ç–∞—Ç—å–∏:** `/knowledge-base/articles/[id]`
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `ArticleForm.tsx`
- –†–µ–¥–∞–∫—Ç–æ—Ä Markdown
- –í—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ

**API:**
- `GET /api/knowledge-base/articles` ‚Äî —Å–ø–∏—Å–æ–∫
- `POST /api/knowledge-base/articles` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ
- `PATCH /api/knowledge-base/articles/[id]` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- `DELETE /api/knowledge-base/articles/[id]` ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ

---

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (`/integrations`)

### Kommo CRM (`/integrations`)

**–°—Ç—Ä–∞–Ω–∏—Ü–∞:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è–º–∏
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç:** `IntegrationsPage`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**

1. **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Kommo**
   - –ö–Ω–æ–ø–∫–∞ "–ü–æ–¥–∫–ª—é—á–∏—Ç—å Kommo"
   - OAuth 2.0 –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
   - –í–≤–æ–¥ base_domain Kommo
   - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Kommo
   - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤

2. **–°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è**
   - –ü–æ–∫–∞–∑ —Å—Ç–∞—Ç—É—Å–∞: –ø–æ–¥–∫–ª—é—á–µ–Ω/–Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω
   - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
   - –ö–Ω–æ–ø–∫–∞ "–û—Ç–∫–ª—é—á–∏—Ç—å"

3. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤–æ—Ä–æ–Ω–æ–∫
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –ö–Ω–æ–ø–∫–∞ "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å"

4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API**
   - –ö–Ω–æ–ø–∫–∞ "–¢–µ—Å—Ç API" ‚Üí `/test-kommo`
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

**API:**
- `GET /api/integrations/kommo/status` ‚Äî —Å—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `POST /api/integrations/kommo/oauth/start` ‚Äî –Ω–∞—á–∞–ª–æ OAuth
- `GET /api/integrations/kommo/oauth/callback` ‚Äî callback OAuth
- `POST /api/integrations/kommo/sync/pipelines` ‚Äî —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤–æ—Ä–æ–Ω–æ–∫

---

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–∫–∫–∞—É–Ω—Ç–∞ (`/account`)

**–°—Ç—Ä–∞–Ω–∏—Ü–∞:** `/account`
**API:** `GET /api/account`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å "–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∞–≥–µ–Ω—Ç–æ–≤ –ø—Ä–∏ –æ—Ç–≤–µ—Ç–µ —á–µ–ª–æ–≤–µ–∫–∞"
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è
- –£–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞

**API:**
- `GET /api/account` ‚Äî –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `PATCH /api/organization/settings` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

### –¢–∞—Ä–∏—Ñ—ã (`/pricing`)

**–°—Ç—Ä–∞–Ω–∏—Ü–∞:** `/pricing`
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–∞—Ä–∏—Ñ–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–ª–∞–Ω–æ–≤
- –í—ã–±–æ—Ä –ø–ª–∞–Ω–∞
- –ü–µ—Ä–µ—Ö–æ–¥ –∫ –æ–ø–ª–∞—Ç–µ (Stripe)

**API:**
- `GET /api/subscriptions` ‚Äî —Ç–µ–∫—É—â–∞—è –ø–æ–¥–ø–∏—Å–∫–∞
- `POST /api/billing` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏

### API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (`/api-docs`)

**–°—Ç—Ä–∞–Ω–∏—Ü–∞:** `/api-docs`
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- Swagger UI
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ endpoints
- –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

**API:** `GET /api/docs` ‚Äî Swagger JSON

### GraphQL Playground (`/graphql-playground`)

**–°—Ç—Ä–∞–Ω–∏—Ü–∞:** `/graphql-playground`
**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- GraphQL –∑–∞–ø—Ä–æ—Å—ã
- –°—Ö–µ–º–∞ API
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä

**API:** `POST /api/graphql`

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### Frontend (Next.js 14 App Router)

```
app/
‚îú‚îÄ‚îÄ (auth)/          # –ü—É–±–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (login, register)
‚îú‚îÄ‚îÄ (protected)/    # –ó–∞—â–∏—â—ë–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (—Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é)
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx    # Dashboard
‚îÇ   ‚îú‚îÄ‚îÄ agents/     # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ chat/       # –¢–µ—Å—Ç–æ–≤—ã–π —á–∞—Ç
‚îÇ   ‚îú‚îÄ‚îÄ knowledge-base/  # –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ integrations/    # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ account/    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏
‚îú‚îÄ‚îÄ api/            # API Routes (Next.js)
‚îÇ   ‚îú‚îÄ‚îÄ auth/       # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ agents/     # CRUD –∞–≥–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ chat/       # –ß–∞—Ç API
‚îÇ   ‚îú‚îÄ‚îÄ knowledge-base/  # –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π API
‚îÇ   ‚îî‚îÄ‚îÄ integrations/ # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ API
‚îî‚îÄ‚îÄ layout.tsx      # –ö–æ—Ä–Ω–µ–≤–æ–π layout

components/
‚îú‚îÄ‚îÄ ui/             # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (shadcn)
‚îú‚îÄ‚îÄ layout/         # Layout –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Header, Sidebar)
‚îú‚îÄ‚îÄ agents/         # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∞–≥–µ–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ dashboard/      # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã dashboard
‚îî‚îÄ‚îÄ crm/            # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã CRM
```

### Backend Services

```
lib/
‚îú‚îÄ‚îÄ services/       # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ llm.ts     # –†–∞–±–æ—Ç–∞ —Å OpenRouter
‚îÇ   ‚îú‚îÄ‚îÄ embeddings.ts  # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è embeddings
‚îÇ   ‚îú‚îÄ‚îÄ agent-context-builder.ts  # –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ agent-memory.ts  # –ü–∞–º—è—Ç—å –∞–≥–µ–Ω—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ rule-engine.ts  # –ü—Ä–∞–≤–∏–ª–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ sequences.ts  # –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–µ–π—Å—Ç–≤–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ agent-actions.ts  # –î–µ–π—Å—Ç–≤–∏—è –∞–≥–µ–Ω—Ç–∞
‚îú‚îÄ‚îÄ repositories/   # –î–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º
‚îÇ   ‚îú‚îÄ‚îÄ agents.ts   # –ê–≥–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ conversations.ts  # –ë–µ—Å–µ–¥—ã
‚îÇ   ‚îú‚îÄ‚îÄ knowledge-base.ts  # –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ crm-connection.ts  # CRM –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ users.ts    # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
‚îî‚îÄ‚îÄ crm/           # CRM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
    ‚îî‚îÄ‚îÄ kommo.ts   # Kommo API –∫–ª–∏–µ–Ω—Ç
```

### Database (Supabase PostgreSQL)

**–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:**

- `users` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- `organizations` ‚Äî –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- `organization_members` ‚Äî —á–ª–µ–Ω—ã –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π
- `agents` ‚Äî AI-–∞–≥–µ–Ω—Ç—ã
- `agent_conversations` ‚Äî –±–µ—Å–µ–¥—ã –∞–≥–µ–Ω—Ç–æ–≤
- `conversation_messages` ‚Äî —Å–æ–æ–±—â–µ–Ω–∏—è
- `knowledge_categories` ‚Äî –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∑–Ω–∞–Ω–∏–π
- `knowledge_articles` ‚Äî —Å—Ç–∞—Ç—å–∏ –∑–Ω–∞–Ω–∏–π
- `knowledge_chunks` ‚Äî —á–∞–Ω–∫–∏ –¥–ª—è RAG (pgvector)
- `crm_connections` ‚Äî –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ CRM
- `agent_usage_daily` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- `agent_sequences` ‚Äî –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–µ–π—Å—Ç–≤–∏–π
- `agent_rules` ‚Äî –ø—Ä–∞–≤–∏–ª–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
- `agent_triggers` ‚Äî —Ç—Ä–∏–≥–≥–µ—Ä—ã

### External Services

1. **Supabase**
   - PostgreSQL + pgvector
   - Auth
   - Storage
   - Realtime (WebSockets)

2. **OpenRouter**
   - LLM API (100+ –º–æ–¥–µ–ª–µ–π)
   - Embeddings API

3. **Kommo CRM**
   - OAuth 2.0
   - REST API
   - Webhooks

4. **Stripe**
   - –ü–ª–∞—Ç–µ–∂–∏
   - –ü–æ–¥–ø–∏—Å–∫–∏

5. **Redis** (BullMQ)
   - –û—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã –∞–≥–µ–Ω—Ç–∞

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏:**
- –ß–∞—Ç –≤ Kommo
- Email
- Webhook –æ—Ç CRM
- –¢–µ—Å—Ç–æ–≤—ã–π —á–∞—Ç –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ

### 2. –°–±–æ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

**–ê–≥–µ–Ω—Ç —Å–æ–±–∏—Ä–∞–µ—Ç:**
1. **–ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞** ‚Äî –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
2. **–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è –ø–∞–º—è—Ç—å** ‚Äî –≤–∞–∂–Ω—ã–µ —Ñ–∞–∫—Ç—ã –æ –∫–ª–∏–µ–Ω—Ç–µ
3. **–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π (RAG)** ‚Äî —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Å—Ç–∞—Ç—å–∏ –∏ —Ñ–∞–π–ª—ã
4. **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–¥–µ–ª–∫–µ** ‚Äî —ç—Ç–∞–ø –≤–æ—Ä–æ–Ω–∫–∏, —Å—Ç–∞—Ç—É—Å
5. **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∞–≥–µ–Ω—Ç–∞** ‚Äî —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç
6. **–°–∫—Ä–∏–ø—Ç—ã** ‚Äî –ø–æ–¥—Ö–æ–¥—è—â–∏–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è —ç—Ç–∞–ø–∞

### 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞
2. –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ OpenRouter (–≤—ã–±—Ä–∞–Ω–Ω–∞—è –º–æ–¥–µ–ª—å)
3. –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞
4. –í–∞–ª–∏–¥–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞
5. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î

### 4. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π

**–ê–≥–µ–Ω—Ç –º–æ–∂–µ—Ç:**
- –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É
- –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —Å–¥–µ–ª–∫—É –Ω–∞ –¥—Ä—É–≥–æ–π —ç—Ç–∞–ø
- –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
- –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—è —Å–¥–µ–ª–∫–∏
- –û—Ç–ø—Ä–∞–≤–∏—Ç—å email
- –ó–∞–ø–∏—Å–∞—Ç—å –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ

### 5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏

**–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ:**
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –≤–∞–∂–Ω—ã—Ö —Ñ–∞–∫—Ç–æ–≤
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—É—é –ø–∞–º—è—Ç—å
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Knowledge Graph

---

## üìä –°–µ—Ä–≤–∏—Å—ã –∏ –∏—Ö —Ñ—É–Ω–∫—Ü–∏–∏

### `lib/services/llm.ts`
**–§—É–Ω–∫—Ü–∏—è:** –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ OpenRouter
- `generateChatResponse()` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 100+ –º–æ–¥–µ–ª–µ–π
- –£—á—ë—Ç —Ç–æ–∫–µ–Ω–æ–≤ –∏ –ª–∏–º–∏—Ç–æ–≤

### `lib/services/agent-context-builder.ts`
**–§—É–Ω–∫—Ü–∏—è:** –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è –∞–≥–µ–Ω—Ç–∞
- `buildFullSystemPrompt()` ‚Äî —Å–±–æ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞
- `processConversationMemory()` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–∞–º—è—Ç–∏

### `lib/services/agent-memory.ts`
**–§—É–Ω–∫—Ü–∏—è:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é –∞–≥–µ–Ω—Ç–∞
- –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–∞—è –ø–∞–º—è—Ç—å (Redis)
- –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è –ø–∞–º—è—Ç—å (PostgreSQL)
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ñ–∞–∫—Ç–æ–≤ –∏–∑ –¥–∏–∞–ª–æ–≥–æ–≤

### `lib/services/rule-engine.ts`
**–§—É–Ω–∫—Ü–∏—è:** –ü—Ä–∞–≤–∏–ª–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
- –û—Ü–µ–Ω–∫–∞ —É—Å–ª–æ–≤–∏–π
- –í—ã–±–æ—Ä –¥–µ–π—Å—Ç–≤–∏–π
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª

### `lib/services/sequences.ts`
**–§—É–Ω–∫—Ü–∏—è:** –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–µ–π—Å—Ç–≤–∏–π
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π
- –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –û—Ç–ø—Ä–∞–≤–∫–∞ follow-up —Å–æ–æ–±—â–µ–Ω–∏–π

### `lib/services/agent-actions.ts`
**–§—É–Ω–∫—Ü–∏—è:** –î–µ–π—Å—Ç–≤–∏—è –∞–≥–µ–Ω—Ç–∞ –≤ CRM
- –ê–Ω–∞–ª–∏–∑ —Å–∏—Ç—É–∞—Ü–∏–∏
- –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π
- –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π —á–µ—Ä–µ–∑ Kommo API

### `lib/repositories/knowledge-search.ts`
**–§—É–Ω–∫—Ü–∏—è:** –ü–æ–∏—Å–∫ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π (RAG)
- –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ (pgvector)
- –†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

1. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**
   - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è/–í—Ö–æ–¥
   - –ú—É–ª—å—Ç–∏–∞—Ä–µ–Ω–¥–Ω–æ—Å—Ç—å (–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏)
   - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è

2. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞–º–∏**
   - –°–æ–∑–¥–∞–Ω–∏–µ/–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ/–£–¥–∞–ª–µ–Ω–∏–µ
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–¥–µ–ª–µ–π, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–∞–º–∏

3. **–û–±—É—á–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–æ–≤**
   - –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–Ω–∞–Ω–∏—è
   - –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ (RAG)
   - –°–∫—Ä–∏–ø—Ç—ã –ø—Ä–æ–¥–∞–∂

4. **–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π**
   - –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —Å—Ç–∞—Ç—å–∏
   - –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫
   - Knowledge Graph

5. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Kommo**
   - OAuth –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
   - Webhooks

6. **–ß–∞—Ç —Å –∞–≥–µ–Ω—Ç–∞–º–∏**
   - –¢–µ—Å—Ç–æ–≤—ã–π —á–∞—Ç
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RAG –∏ –ø–∞–º—è—Ç–∏
   - –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–æ–≤

7. **Dashboard**
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - –ì—Ä–∞—Ñ–∏–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
   - –ú–µ—Ç—Ä–∏–∫–∏ –∞–≥–µ–Ω—Ç–æ–≤

### üöß –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

1. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**
   - –ü—Ä–∞–≤–∏–ª–∞ (Rule Engine)
   - –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (Sequences)
   - –¢—Ä–∏–≥–≥–µ—Ä—ã

2. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**
   - –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
   - –û—Ç—á—ë—Ç—ã
   - –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö

3. **–ë–∏–ª–ª–∏–Ω–≥**
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Stripe
   - –¢–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã
   - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **RLS (Row Level Security)** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ —Å–≤–æ–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
2. **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤** ‚Äî —Ç–æ–∫–µ–Ω—ã CRM —Ö—Ä–∞–Ω—è—Ç—Å—è –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º–∏
3. **Rate Limiting** ‚Äî –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤
4. **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** ‚Äî Zod —Å—Ö–µ–º—ã –¥–ª—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
5. **CORS** ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ—Å—Ç—É–ø–∞
6. **Security Headers** ‚Äî CSP, HSTS, X-Frame-Options

---

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **Health Checks** ‚Äî `/api/health`, `/api/health/ready`
2. **Sentry** ‚Äî –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
3. **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏** ‚Äî –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
4. **–ú–µ—Ç—Ä–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** ‚Äî —Ç–æ–∫–µ–Ω—ã, –æ—Ç–≤–µ—Ç—ã, –æ—à–∏–±–∫–∏

---

–≠—Ç–æ –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã GPT Agent. –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, —Å–µ—Ä–≤–∏—Å—ã –∏ API –¥–µ—Ç–∞–ª—å–Ω–æ –æ–ø–∏—Å–∞–Ω—ã –≤—ã—à–µ.

