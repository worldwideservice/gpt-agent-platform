# ‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

**–î–∞—Ç–∞:** 2025-01-26  
**–°—Ç–∞—Ç—É—Å:** –í –ø—Ä–æ—Ü–µ—Å—Å–µ

---

## ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û

### 1. ‚úÖ Worker Redis –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
**–°—Ç–∞—Ç—É—Å:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ  
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –£–≤–µ–ª–∏—á–µ–Ω–æ –≤—Ä–µ–º—è —Ç–∞–π–º–∞—É—Ç–∞ –¥–æ 30 —Å–µ–∫—É–Ω–¥
- –î–æ–±–∞–≤–ª–µ–Ω—ã TLS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (`rejectUnauthorized: false`)
- –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è IPv4 (`family: 4`)
- –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (DNS, auth, timeout)
- –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- –£–ª—É—á—à–µ–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è retry

**–§–∞–π–ª:** `services/worker/src/index.ts`  
**–ö–æ–º–º–∏—Ç:** `6bdcd911`

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è Worker –Ω–∞ Railway

---

### 2. ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è Kommo
**–°—Ç–∞—Ç—É—Å:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ  
**–ü—Ä–æ–±–ª–µ–º–∞:** API –ø—ã—Ç–∞–ª—Å—è –≤—ã–∑–≤–∞—Ç—å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π HTTP endpoint `/crm/sync`

**–†–µ—à–µ–Ω–∏–µ:**
- –ò–∑–º–µ–Ω–µ–Ω –ø–æ–¥—Ö–æ–¥: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Job Queue –≤–º–µ—Å—Ç–æ HTTP –≤—ã–∑–æ–≤–∞
- Job `crm:sync-pipelines` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è Worker
- –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ `job_id` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
- –£–±—Ä–∞–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç `BACKEND_API_URL` –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

**–§–∞–π–ª:** `app/api/agents/[id]/integrations/[integrationId]/sync/route.ts`  
**–ö–æ–º–º–∏—Ç:** –ø–æ—Å–ª–µ–¥–Ω–∏–π

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

---

## ‚è≥ –í –ü–†–û–¶–ï–°–°–ï

### 3. ‚è≥ BACKEND_API_URL (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
**–°—Ç–∞—Ç—É—Å:** –¢—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏  
**–î–µ–π—Å—Ç–≤–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Vercel Dashboard

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** `docs/BACKEND_API_URL_SETUP.md`

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –¢–µ–ø–µ—Ä—å –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ, —Ç.–∫. —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Job Queue

---

## üìã –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è Worker:
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Worker health check
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Redis –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é Kommo
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É jobs

### –î—Ä—É–≥–∏–µ –∑–∞–¥–∞—á–∏:
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Dashboard Recent Updates
6. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Test Chat
7. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Scripts
8. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Rule Engine –∏ Sequences

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-01-26

