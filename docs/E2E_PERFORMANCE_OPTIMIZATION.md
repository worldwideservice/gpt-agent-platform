# ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ E2E —Ç–µ—Å—Ç–æ–≤

**–î–∞—Ç–∞:** 2025-01-26  
**–ü—Ä–æ–±–ª–µ–º–∞:** E2E —Ç–µ—Å—Ç—ã –≤—ã–ø–æ–ª–Ω—è–ª–∏—Å—å —Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ (–±–æ–ª–µ–µ 10 –º–∏–Ω—É—Ç)

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. –£–≤–µ–ª–∏—á–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ workers

**–ü—Ä–æ–±–ª–µ–º–∞:**  
- –í `test.yml` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–æ—Å—å `--workers=2`
- –í `playwright.config.ts` –¥–ª—è CI –±—ã–ª–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ `workers: 1`
- –≠—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–ª–æ –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–º –∏ —É–≤–µ–ª–∏—á–∏–≤–∞–ª–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:**  
- –£–≤–µ–ª–∏—á–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ workers –¥–æ **4** –≤ –æ–±–æ–∏—Ö –º–µ—Å—Ç–∞—Ö
- –¢–µ–ø–µ—Ä—å —Ç–µ—Å—Ç—ã –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –≤ 4 –ø–æ—Ç–æ–∫–∞ –≤–º–µ—Å—Ç–æ 2

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```yaml
# .github/workflows/test.yml
run: npm run test:e2e -- --project=chromium --workers=4
```

```typescript
// playwright.config.ts
workers: process.env.CI ? 4 : 4, // –£–≤–µ–ª–∏—á–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–æ—Ä–∫–µ—Ä–æ–≤ –≤ CI –¥–æ 4
```

---

### 2. –£–º–µ–Ω—å—à–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ retries

**–ü—Ä–æ–±–ª–µ–º–∞:**  
- –í CI –±—ã–ª–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ `retries: 2`
- –ü–∞–¥–∞—é—â–∏–µ —Ç–µ—Å—Ç—ã –ø–æ–≤—Ç–æ—Ä—è–ª–∏—Å—å 2 —Ä–∞–∑–∞, —á—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–ª–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:**  
- –£–º–µ–Ω—å—à–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ retries –¥–æ **1** –≤ CI
- –¢–µ—Å—Ç—ã –±—É–¥—É—Ç –ø–æ–≤—Ç–æ—Ä—è—Ç—å—Å—è —Ç–æ–ª—å–∫–æ 1 —Ä–∞–∑ –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```typescript
// playwright.config.ts
retries: process.env.CI ? 1 : 0, // –£–º–µ–Ω—å—à–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ retries –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è
```

---

### 3. –£–º–µ–Ω—å—à–µ–Ω timeout workflow

**–ü—Ä–æ–±–ª–µ–º–∞:**  
- `timeout-minutes: 30` –±—ã–ª —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–º
- –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö workflow –∂–¥–∞–ª —Å–ª–∏—à–∫–æ–º –¥–æ–ª–≥–æ

**–†–µ—à–µ–Ω–∏–µ:**  
- –£–º–µ–Ω—å—à–µ–Ω–æ –¥–æ **20 –º–∏–Ω—É—Ç**
- –¢–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –±—ã—Å—Ç—Ä–µ–µ –±–ª–∞–≥–æ–¥–∞—Ä—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```yaml
# .github/workflows/test.yml
timeout-minutes: 20  # –£–º–µ–Ω—å—à–µ–Ω–æ —Å 30 –¥–æ 20 –º–∏–Ω—É—Ç
```

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

**–î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- Workers: 2
- Retries: 2
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ~10+ –º–∏–Ω—É—Ç –¥–ª—è 156 —Ç–µ—Å—Ç–æ–≤

**–ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- Workers: 4 (—É–≤–µ–ª–∏—á–µ–Ω–æ –≤ 2 —Ä–∞–∑–∞)
- Retries: 1 (—É–º–µ–Ω—å—à–µ–Ω–æ –≤ 2 —Ä–∞–∑–∞)
- **–û–∂–∏–¥–∞–µ–º–æ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ~5-7 –º–∏–Ω—É—Ç** (—É–º–µ–Ω—å—à–µ–Ω–∏–µ –Ω–∞ ~40-50%)

---

## üîç –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ–ª–∞–∫–∞—é—â–∏—Ö —Ç–µ—Å—Ç–æ–≤:**  
   - –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç –∏ —Ç—Ä–µ–±—É—é—Ç retry
   - –ù—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Ñ–ª–∞–∫–∞—é—â–∏–µ —Ç–µ—Å—Ç—ã –¥–ª—è –µ—â–µ –±–æ–ª—å—à–µ–≥–æ —É—Å–∫–æ—Ä–µ–Ω–∏—è

2. **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö:**  
   - –°–µ–π—á–∞—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ `chromium`
   - –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

3. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**  
   - –£–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `cache: 'npm'` –¥–ª—è Node.js
   - –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ Playwright browsers

---

## üìù –°—Ç–∞—Ç—É—Å

- ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ workers –¥–æ 4
- ‚úÖ –£–º–µ–Ω—å—à–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ retries –¥–æ 1
- ‚úÖ –£–º–µ–Ω—å—à–µ–Ω timeout workflow –¥–æ 20 –º–∏–Ω—É—Ç
- ‚úÖ –ö–æ–¥ –∑–∞–∫–æ–º–º–∏—á–µ–Ω –∏ –∑–∞–ø—É—à–µ–Ω
- ‚è≥ –û–∂–∏–¥–∞–µ–º –Ω–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —É–ª—É—á—à–µ–Ω–∏–π

---

## üîó –°—Å—ã–ª–∫–∏

- [Playwright Performance](https://playwright.dev/docs/test-parallel)
- [GitHub Actions Timeout](https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idtimeout-minutes)

