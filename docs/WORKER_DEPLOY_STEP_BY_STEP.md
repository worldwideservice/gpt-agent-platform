# üöÄ –ü–æ—à–∞–≥–æ–≤—ã–π –¥–µ–ø–ª–æ–π Worker - –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

> –í–∏–∑—É–∞–ª—å–Ω–∞—è –ø–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –¥–µ–ø–ª–æ—è Worker –Ω–∞ Railway

## ‚úÖ –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞:** ‚úÖ Worker –≥–æ—Ç–æ–≤ –∫ –¥–µ–ø–ª–æ—é
- ‚úÖ –í—Å–µ —Ñ–∞–π–ª—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
- ‚úÖ Dockerfile –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ Health checks –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚úÖ Railway CLI —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω

---

## üìã –®–∞–≥ 1: –û—Ç–∫—Ä—ã—Ç—å Railway Dashboard

1. **–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:** https://railway.app
2. **–ù–∞–∂–º–∏—Ç–µ:** "Login" –∏–ª–∏ "Start a New Project"
3. **–í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ GitHub:**
   - –í—ã–±–µ—Ä–∏—Ç–µ "Login with GitHub"
   - –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å —á–µ—Ä–µ–∑ –≤–∞—à GitHub –∞–∫–∫–∞—É–Ω—Ç
   - –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø Railway –∫ –≤–∞—à–µ–º—É –∞–∫–∫–∞—É–Ω—Ç—É

**‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—ã –≤–æ—à–ª–∏ –≤ Railway Dashboard

---

## üìã –®–∞–≥ 2: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç

1. **–ù–∞–∂–º–∏—Ç–µ:** "New Project" (—Å–∏–Ω—è—è –∫–Ω–æ–ø–∫–∞ –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É)
2. **–í—ã–±–µ—Ä–∏—Ç–µ:** "Deploy from GitHub repo"
3. **–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
   - –ù–∞–π–¥–∏—Ç–µ: `worldwideservice/gpt-agent-platform`
   - –ò–ª–∏ –≤–≤–µ–¥–∏—Ç–µ: `worldwideservice/gpt-agent-platform`
   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

**‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç:** Railway –ø–æ–¥–∫–ª—é—á–∏–ª—Å—è –∫ –≤–∞—à–µ–º—É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é

---

## üìã –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Worker —Å–µ—Ä–≤–∏—Å

### –í–∞—Ä–∏–∞–Ω—Ç A: –ï—Å–ª–∏ Worker –ø–æ—è–≤–∏–ª—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

Railway –º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å `services/worker/Dockerfile`:

1. –ù–∞–π–¥–∏—Ç–µ —Å–µ—Ä–≤–∏—Å —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º `worker` –∏–ª–∏ –ø–æ—Ö–æ–∂–∏–º
2. **–ù–∞–∂–º–∏—Ç–µ** –Ω–∞ –Ω–µ–≥–æ
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **Source**
4. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ:
   - **Root Directory:** `services/worker` ‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ù–û!**
   - –ï—Å–ª–∏ –Ω–µ—Ç - –∏–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ `services/worker`

### –í–∞—Ä–∏–∞–Ω—Ç B: –ï—Å–ª–∏ Worker –Ω–µ –ø–æ—è–≤–∏–ª—Å—è

1. –í –ø—Ä–æ–µ–∫—Ç–µ –Ω–∞–∂–º–∏—Ç–µ **"+ New"** (—Å–∏–Ω—è—è –∫–Ω–æ–ø–∫–∞)
2. –í—ã–±–µ—Ä–∏—Ç–µ **"GitHub Repo"**
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ—Ç –∂–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: `worldwideservice/gpt-agent-platform`
4. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö:
   - **Root Directory:** `services/worker` ‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ù–û!**
   - **Service Name:** `worker` (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
5. **–ù–∞–∂–º–∏—Ç–µ:** "Deploy"

**‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç:** Worker —Å–µ—Ä–≤–∏—Å —Å–æ–∑–¥–∞–Ω —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º Root Directory

---

## üìã –®–∞–≥ 4: –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

1. **–û—Ç–∫—Ä–æ–π—Ç–µ —Å–µ—Ä–≤–∏—Å** `worker` (–∫–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –Ω–µ–≥–æ)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **Variables**
3. –ù–∞–∂–º–∏—Ç–µ **"+ New Variable"** –¥–ª—è –∫–∞–∂–¥–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π:

### –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è 1: REDIS_URL
```
Name: REDIS_URL
Value: redis://default:AYcUASQgZjI2MTM5NzYtYzU2ZS00YjFkLTk3MmQtMWIyODAzYjY3ODg5OGE3ODAzNDUwMzQ5NGE0Yjk5NzEwZDFiNWE4ZTg0MDU=@usw1-merry-term-40416.upstash.io:6379
```
**–ù–∞–∂–º–∏—Ç–µ:** Save

### –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è 2: SUPABASE_URL
```
Name: SUPABASE_URL
Value: https://rpzchsgutabxeabbnwas.supabase.co
```
**–ù–∞–∂–º–∏—Ç–µ:** Save

### –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è 3: SUPABASE_SERVICE_ROLE_KEY
```
Name: SUPABASE_SERVICE_ROLE_KEY
Value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJwemNoc2d1dGFieGVhYmJud2FzIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1OTU2MzMzOCwiZXhwIjoyMDc1MTM5MzM4fQ.UIkX-rUGGTbMGfd5YoF41Dx3QBuLH13nO-R3BXdbx2I
```
**–ù–∞–∂–º–∏—Ç–µ:** Save

### –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è 4: ENCRYPTION_KEY
```
Name: ENCRYPTION_KEY
Value: HxXQ5WCMJ3TrFZehEHJUyMVgVX5fdGsSWy/2rixkVwE=
```
**–ù–∞–∂–º–∏—Ç–µ:** Save

### –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è 5: OPENROUTER_API_KEY
```
Name: OPENROUTER_API_KEY
Value: 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
```
**–ù–∞–∂–º–∏—Ç–µ:** Save

### –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è 6: JOB_QUEUE_NAME
```
Name: JOB_QUEUE_NAME
Value: agent-jobs
```
**–ù–∞–∂–º–∏—Ç–µ:** Save

### –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è 7: JOB_CONCURRENCY
```
Name: JOB_CONCURRENCY
Value: 5
```
**–ù–∞–∂–º–∏—Ç–µ:** Save

### –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è 8: PORT
```
Name: PORT
Value: 3001
```
**–ù–∞–∂–º–∏—Ç–µ:** Save

**‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ 8 –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–æ–±–∞–≤–ª–µ–Ω—ã

**üí° –°–æ–≤–µ—Ç:** –ú–æ–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ `docs/RAILWAY_DEPLOY_NOW.md`

---

## üìã –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–µ–ø–ª–æ–π

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –û–±–Ω–∞—Ä—É–∂–∏—Ç `railway.json`
2. –û–±–Ω–∞—Ä—É–∂–∏—Ç `Dockerfile`
3. –ù–∞—á–Ω–µ—Ç —Å–±–æ—Ä–∫—É –æ–±—Ä–∞–∑–∞
4. –ó–∞–¥–µ–ø–ª–æ–∏—Ç —Å–µ—Ä–≤–∏—Å

**–í—Ä–µ–º—è:** ~3-5 –º–∏–Ω—É—Ç

### –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å:

1. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–µ—Ä–≤–∏—Å–∞ `worker`
2. –°–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –¥–µ–ø–ª–æ—è:
   - üîµ **–°–∏–Ω–∏–π** = –í –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–±–æ—Ä–∫–∏/–¥–µ–ø–ª–æ—è
   - üü¢ **–ó–µ–ª–µ–Ω—ã–π** ‚úÖ = –£—Å–ø–µ—à–Ω–æ –∑–∞–¥–µ–ø–ª–æ–µ–Ω
   - üî¥ **–ö—Ä–∞—Å–Ω—ã–π** ‚ùå = –û—à–∏–±–∫–∞ (—Å–º. –ª–æ–≥–∏)

3. –ï—Å–ª–∏ –¥–µ–ø–ª–æ–π —É—Å–ø–µ—à–µ–Ω:
   - **Settings** ‚Üí **Networking**
   - **Generate Domain** ‚Üí –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ URL (–Ω–∞–ø—Ä–∏–º–µ—Ä: `worker-production-xxxx.up.railway.app`)

---

## üìã –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Health Check

–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è URL, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ health check:

```bash
curl https://your-worker-url.up.railway.app/health
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "status": "ok",
  "service": "worker",
  "timestamp": "2025-01-XX...",
  "uptime": 123.45
}
```

**‚úÖ –ï—Å–ª–∏ –ø–æ–ª—É—á–∏–ª–∏ —Ç–∞–∫–æ–π –æ—Ç–≤–µ—Ç:** Worker —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ!

---

## üêõ Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –î–µ–ø–ª–æ–π –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ **Settings** ‚Üí **Source** ‚Üí **Root Directory** = `services/worker`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω—ã
3. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏: **Logs** ‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—à–∏–±–∫–∏

### –ü—Ä–æ–±–ª–µ–º–∞: Build Failed

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ —Å–±–æ—Ä–∫–∏
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `Dockerfile` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ `services/worker/`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `package.json` –µ—Å—Ç—å –≤ `services/worker/`

### –ü—Ä–æ–±–ª–µ–º–∞: Health Check –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `PORT=3001` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫ –∑–∞–ø—É—Å–∫–∞
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Worker –∑–∞–ø—É—Å—Ç–∏–ª—Å—è (—Å–º. –ª–æ–≥–∏)

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

- [ ] Railway –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω
- [ ] Worker —Å–µ—Ä–≤–∏—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω —Å Root Directory: `services/worker`
- [ ] –í—Å–µ 8 –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [ ] –î–µ–ø–ª–æ–π –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ (–∑–µ–ª–µ–Ω–∞—è –≥–∞–ª–æ—á–∫–∞ ‚úÖ)
- [ ] Domain —Å–æ–∑–¥–∞–Ω –∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω
- [ ] Health check –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `{"status":"ok",...}`

---

## üéâ –ì–æ—Ç–æ–≤–æ!

Worker —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ production –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç:
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫—É —Ñ–∞–π–ª–æ–≤ –≤ –±–∞–∑—É –∑–Ω–∞–Ω–∏–π
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—é embeddings
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å Kommo CRM
- ‚úÖ Webhooks
- ‚úÖ Knowledge Graph extraction

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Sentry (`docs/QUICK_START_DEVOPS.md` - –®–∞–≥ 2)

---

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 15-20 –º–∏–Ω—É—Ç  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** ‚≠ê‚≠ê –õ–µ–≥–∫–æ (–ø—Ä–æ—Å—Ç–æ —Å–ª–µ–¥–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏)


