# üéØ –ü—Ä–æ–≥—Ä–µ—Å—Å Integration —Ç–µ—Å—Ç–æ–≤ - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1

**–î–∞—Ç–∞:** 2025-01-26  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü–µ—Ä–≤–∞—è —á–∞—Å—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∞**

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. –ê–≥–µ–Ω—Ç—ã - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ endpoints

**–°–æ–∑–¥–∞–Ω–æ 4 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞ —Å —Ç–µ—Å—Ç–∞–º–∏:**

1. ‚úÖ `tests/integration/api/agents-rules.test.ts` - **18 —Ç–µ—Å—Ç–æ–≤**
   - GET /api/agents/[id]/rules - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø—Ä–∞–≤–∏–ª
   - POST /api/agents/[id]/rules - —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª–∞
   - PUT /api/agents/[id]/rules - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª (preview –∏ —Ä–µ–∞–ª—å–Ω–æ–µ)
   - PATCH /api/agents/[id]/rules/[ruleId] - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª–∞
   - DELETE /api/agents/[id]/rules/[ruleId] - —É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª–∞

2. ‚úÖ `tests/integration/api/agents-sequences.test.ts` - **17 —Ç–µ—Å—Ç–æ–≤**
   - GET /api/agents/[id]/sequences - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π
   - POST /api/agents/[id]/sequences - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
   - PUT /api/agents/[id]/sequences - –∑–∞–ø—É—Å–∫ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
   - PATCH /api/agents/[id]/sequences/[sequenceId] - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
   - DELETE /api/agents/[id]/sequences/[sequenceId] - —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

3. ‚úÖ `tests/integration/api/agents-integrations.test.ts` - **3 —Ç–µ—Å—Ç–∞**
   - GET /api/agents/[id]/integrations - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

4. ‚úÖ `tests/integration/api/agents-fields.test.ts` - **8 —Ç–µ—Å—Ç–æ–≤**
   - GET /api/agents/[id]/fields - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª–µ–π –∞–≥–µ–Ω—Ç–∞
   - POST /api/agents/[id]/fields - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª–µ–π –∞–≥–µ–Ω—Ç–∞
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ò—Ç–æ–≥–æ:** **46 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤** –¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤ endpoints ‚úÖ

---

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ production –∫–æ–¥–µ

### –û–±–Ω–æ–≤–ª–µ–Ω—ã routes –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å Next.js 15:

1. ‚úÖ `app/api/agents/[id]/rules/route.ts`
   - –ò–∑–º–µ–Ω–µ–Ω —Ç–∏–ø `params` —Å `{ id: string }` –Ω–∞ `Promise<{ id: string }>`
   - –î–æ–±–∞–≤–ª–µ–Ω `await params` –¥–ª—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤ (GET, POST, PUT)

2. ‚úÖ `app/api/agents/[id]/rules/[ruleId]/route.ts`
   - –ò–∑–º–µ–Ω–µ–Ω —Ç–∏–ø `params` –Ω–∞ `Promise<{ id: string; ruleId: string }>`
   - –î–æ–±–∞–≤–ª–µ–Ω `await params` –¥–ª—è PATCH –∏ DELETE

3. ‚úÖ `app/api/agents/[id]/sequences/route.ts`
   - –ò–∑–º–µ–Ω–µ–Ω —Ç–∏–ø `params` –Ω–∞ `Promise<{ id: string }>`
   - –î–æ–±–∞–≤–ª–µ–Ω `await params` –¥–ª—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤

4. ‚úÖ `app/api/agents/[id]/sequences/[sequenceId]/route.ts`
   - –ò–∑–º–µ–Ω–µ–Ω —Ç–∏–ø `params` –Ω–∞ `Promise<{ id: string; sequenceId: string }>`
   - –î–æ–±–∞–≤–ª–µ–Ω `await params` –¥–ª—è PATCH –∏ DELETE

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –î–æ —Ä–∞–±–æ—Ç—ã:
- Integration —Ç–µ—Å—Ç—ã: **9 endpoints**, **~150 —Ç–µ—Å—Ç–æ–≤**

### –ü–æ—Å–ª–µ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 1:
- Integration —Ç–µ—Å—Ç—ã: **13 endpoints**, **137 —Ç–µ—Å—Ç–æ–≤** ‚úÖ
- **+4 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞ —Å —Ç–µ—Å—Ç–∞–º–∏**
- **+46 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤**

### –ü–æ—Å–ª–µ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 2:
- Integration —Ç–µ—Å—Ç—ã: **16 endpoints**, **166 —Ç–µ—Å—Ç–æ–≤** ‚úÖ
- **+7 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ —Å —Ç–µ—Å—Ç–∞–º–∏**
- **+75 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤**

### –ü–æ—Å–ª–µ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 3:
- Integration —Ç–µ—Å—Ç—ã: **19 endpoints**, **185 —Ç–µ—Å—Ç–æ–≤** ‚úÖ
- **+10 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ —Å —Ç–µ—Å—Ç–∞–º–∏**
- **+94 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤**

### –ü–æ—Å–ª–µ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 4:
- Integration —Ç–µ—Å—Ç—ã: **22 endpoints**, **207 —Ç–µ—Å—Ç–æ–≤** ‚úÖ
- **+13 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ —Å —Ç–µ—Å—Ç–∞–º–∏**
- **+116 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤**

### –ü–æ—Å–ª–µ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 5:
- Integration —Ç–µ—Å—Ç—ã: **25 endpoints**, **218 —Ç–µ—Å—Ç–æ–≤** ‚úÖ
- **+16 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ —Å —Ç–µ—Å—Ç–∞–º–∏**
- **+127 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤**

### –ü–æ—Å–ª–µ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 6:
- Integration —Ç–µ—Å—Ç—ã: **28 endpoints**, **239 —Ç–µ—Å—Ç–æ–≤** ‚úÖ
- **+19 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ —Å —Ç–µ—Å—Ç–∞–º–∏**
- **+148 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤**

### –ü–æ—Å–ª–µ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 7:
- Integration —Ç–µ—Å—Ç—ã: **31 endpoints**, **256 —Ç–µ—Å—Ç–æ–≤** ‚úÖ
- **+22 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ —Å —Ç–µ—Å—Ç–∞–º–∏**
- **+165 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤**

### –ü–æ—Å–ª–µ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 8:
- Integration —Ç–µ—Å—Ç—ã: **35 endpoints**, **270 —Ç–µ—Å—Ç–æ–≤** ‚úÖ
- **+26 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ —Å —Ç–µ—Å—Ç–∞–º–∏**
- **+179 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤**

### –ü–æ—Å–ª–µ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 9:
- Integration —Ç–µ—Å—Ç—ã: **39 endpoints**, **284 —Ç–µ—Å—Ç–æ–≤** ‚úÖ
- **+30 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ —Å —Ç–µ—Å—Ç–∞–º–∏**
- **+193 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤**

### –ü–æ—Å–ª–µ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 10:
- Integration —Ç–µ—Å—Ç—ã: **41 endpoints**, **295 —Ç–µ—Å—Ç–æ–≤** ‚úÖ
- **+32 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ —Å —Ç–µ—Å—Ç–∞–º–∏**
- **+204 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤**

### –ü–æ—Å–ª–µ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 11:
- Integration —Ç–µ—Å—Ç—ã: **44 endpoints**, **299 —Ç–µ—Å—Ç–æ–≤** ‚úÖ
- **+35 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ —Å —Ç–µ—Å—Ç–∞–º–∏**
- **+208 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤**

### –ü–æ—Å–ª–µ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 12:
- Integration —Ç–µ—Å—Ç—ã: **48 endpoints**, **314 —Ç–µ—Å—Ç–æ–≤** ‚úÖ
- **+39 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ —Å —Ç–µ—Å—Ç–∞–º–∏**
- **+223 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤**

### –ü–æ—Å–ª–µ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 13:
- Integration —Ç–µ—Å—Ç—ã: **52 endpoints**, **323 —Ç–µ—Å—Ç–æ–≤** ‚úÖ
- **+43 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ —Å —Ç–µ—Å—Ç–∞–º–∏**
- **+232 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤**

### –ü–æ—Å–ª–µ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 14:
- Integration —Ç–µ—Å—Ç—ã: **57 endpoints**, **341 —Ç–µ—Å—Ç–æ–≤** ‚úÖ
- **+48 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ —Å —Ç–µ—Å—Ç–∞–º–∏**
- **+248 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤**

### –ü–æ–∫—Ä—ã—Ç–∏–µ endpoints:
- **–ë—ã–ª–æ:** 9/80 (11%)
- **–ü–æ—Å–ª–µ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 1:** 13/80 (16%) ‚¨ÜÔ∏è +5%
- **–ü–æ—Å–ª–µ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 2:** 16/80 (20%) ‚¨ÜÔ∏è +9%
- **–ü–æ—Å–ª–µ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 3:** 19/80 (24%) ‚¨ÜÔ∏è +13%
- **–ü–æ—Å–ª–µ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 4:** 22/80 (28%) ‚¨ÜÔ∏è +17%
- **–ü–æ—Å–ª–µ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 5:** 25/80 (31%) ‚¨ÜÔ∏è +20%
- **–ü–æ—Å–ª–µ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 6:** 28/80 (35%) ‚¨ÜÔ∏è +24%
- **–ü–æ—Å–ª–µ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 7:** 31/80 (39%) ‚¨ÜÔ∏è +28%
- **–ü–æ—Å–ª–µ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 8:** 35/80 (44%) ‚¨ÜÔ∏è +33%
- **–ü–æ—Å–ª–µ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 9:** 39/80 (49%) ‚¨ÜÔ∏è +38%
- **–ü–æ—Å–ª–µ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 10:** 41/80 (51%) ‚¨ÜÔ∏è +40%
- **–ü–æ—Å–ª–µ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 11:** 44/80 (55%) ‚¨ÜÔ∏è +44%
- **–ü–æ—Å–ª–µ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 12:** 48/80 (60%) ‚¨ÜÔ∏è +49%
- **–ü–æ—Å–ª–µ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 13:** 52/80 (65%) ‚¨ÜÔ∏è +54%
- **–ü–æ—Å–ª–µ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ 14:** 57/80 (71%) ‚¨ÜÔ∏è +60%

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –§–∞–π–ª `agents-id.test.ts` —É–∂–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª, –Ω–æ –±—ã–ª –æ–±–Ω–æ–≤–ª–µ–Ω —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ —Ç–µ—Å—Ç–∞–º–∏ –¥–ª—è PATCH –∏ DELETE –º–µ—Ç–æ–¥–æ–≤.

---

## üéØ –ü–æ–∫—Ä—ã—Ç—ã–µ endpoints

### –ê–≥–µ–Ω—Ç—ã (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ):
- ‚úÖ `/api/agents/[id]/rules` - GET, POST, PUT
- ‚úÖ `/api/agents/[id]/rules/[ruleId]` - PATCH, DELETE
- ‚úÖ `/api/agents/[id]/sequences` - GET, POST, PUT
- ‚úÖ `/api/agents/[id]/sequences/[sequenceId]` - PATCH, DELETE
- ‚úÖ `/api/agents/[id]/integrations` - GET
- ‚úÖ `/api/agents/[id]/fields` - GET, POST

### –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π (–ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ):
- ‚úÖ `/api/knowledge-base/articles/[id]` - GET, PATCH, DELETE
- ‚úÖ `/api/knowledge-base/categories` - GET, POST
- ‚úÖ `/api/knowledge-base/categories/[id]` - GET, PATCH, DELETE

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Kommo (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ):
- ‚úÖ `/api/integrations/kommo/oauth/callback` - GET
- ‚úÖ `/api/integrations/kommo/status` - GET
- ‚úÖ `/api/integrations/kommo/messages/send` - POST

### Webhooks –∏ CRM:
- ‚úÖ `/api/webhooks/[id]` - GET, POST (retry)
- ‚úÖ `/api/crm/webhook` - POST
- ‚úÖ `/api/crm/kommo` - GET, POST

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ endpoints (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 5):
- ‚úÖ `/api/notifications` - GET
- ‚úÖ `/api/agents/[id]/actions` - GET, POST
- ‚úÖ `/api/agents/[id]/status` - PATCH

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ endpoints –∞–≥–µ–Ω—Ç–æ–≤ (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 6):
- ‚úÖ `/api/agents/[id]/channels` - GET, POST
- ‚úÖ `/api/agents/[id]/knowledge` - GET, POST
- ‚úÖ `/api/agents/[id]/objections` - GET, POST

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ endpoints –∞–≥–µ–Ω—Ç–æ–≤ (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 7):
- ‚úÖ `/api/agents/[id]/scripts` - GET, POST
- ‚úÖ `/api/agents/[id]/triggers` - GET, POST
- ‚úÖ `/api/agents/[id]/crm-connection` - GET

### –°–∏—Å—Ç–µ–º–Ω—ã–µ –∏ —Å–ª—É–∂–µ–±–Ω—ã–µ endpoints (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 8):
- ‚úÖ `/api/health` - GET
- ‚úÖ `/api/analytics` - GET
- ‚úÖ `/api/dashboard` - GET
- ‚úÖ `/api/chat/conversations` - GET

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ endpoints (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 9):
- ‚úÖ `/api/jobs` - POST
- ‚úÖ `/api/metrics` - GET
- ‚úÖ `/api/notifications/actions` - POST
- ‚úÖ `/api/notifications/[id]` - PATCH, DELETE

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–æ–º –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–µ–π (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 10):
- ‚úÖ `/api/account` - GET, PATCH
- ‚úÖ `/api/organization/settings` - GET, PATCH

### –ë–∏–ª–ª–∏–Ω–≥ –∏ –ø–æ–¥–ø–∏—Å–∫–∏ (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 11):
- ‚úÖ `/api/billing` - GET, POST
- ‚úÖ `/api/subscriptions` - GET
- ‚úÖ `/api/dashboard/charts` - GET

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ endpoints –∞–≥–µ–Ω—Ç–æ–≤ –∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 12):
- ‚úÖ `/api/agents/[id]/assets` - GET, POST
- ‚úÖ `/api/agents/[id]/pipeline-settings` - GET, POST
- ‚úÖ `/api/onboarding/status` - GET
- ‚úÖ `/api/onboarding/agent` - POST

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ endpoints (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 13):
- ‚úÖ `/api/agents/[id]` - GET, PATCH, DELETE
- ‚úÖ `/api/dashboard/updates` - GET
- ‚úÖ `/api/analytics/export` - GET
- ‚úÖ `/api/jobs/status` - GET

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ endpoints –∞–≥–µ–Ω—Ç–æ–≤ –∏ webhooks (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 14):
- ‚úÖ `/api/agents/[id]/assets/[assetId]` - DELETE
- ‚úÖ `/api/agents/[id]/channels/[channel]` - PATCH, DELETE
- ‚úÖ `/api/webhooks/events` - GET
- ‚úÖ `/api/webhooks` - GET
- ‚úÖ `/api/crm/pipelines` - GET

---

## ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π - –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ (–ó–ê–í–ï–†–®–ï–ù–û)

**–°–æ–∑–¥–∞–Ω–æ 3 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞ —Å —Ç–µ—Å—Ç–∞–º–∏:**

1. ‚úÖ `tests/integration/api/knowledge-base-articles-id.test.ts` - **11 —Ç–µ—Å—Ç–æ–≤**
   - GET /api/knowledge-base/articles/[id] - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏
   - PATCH /api/knowledge-base/articles/[id] - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏
   - DELETE /api/knowledge-base/articles/[id] - —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏

2. ‚úÖ `tests/integration/api/knowledge-base-categories.test.ts` - **7 —Ç–µ—Å—Ç–æ–≤**
   - GET /api/knowledge-base/categories - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
   - POST /api/knowledge-base/categories - —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

3. ‚úÖ `tests/integration/api/knowledge-base-categories-id.test.ts` - **11 —Ç–µ—Å—Ç–æ–≤**
   - GET /api/knowledge-base/categories/[id] - –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
   - PATCH /api/knowledge-base/categories/[id] - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
   - DELETE /api/knowledge-base/categories/[id] - —É–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

**–ò—Ç–æ–≥–æ:** **29 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤** –¥–ª—è –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π endpoints ‚úÖ

---

## ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ (–ó–ê–í–ï–†–®–ï–ù–û)

**–°–æ–∑–¥–∞–Ω–æ 3 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞ —Å —Ç–µ—Å—Ç–∞–º–∏:**

1. ‚úÖ `tests/integration/api/integrations-kommo-oauth-callback.test.ts` - **7 —Ç–µ—Å—Ç–æ–≤**
   - GET /api/integrations/kommo/oauth/callback - –æ–±—Ä–∞–±–æ—Ç–∫–∞ OAuth callback
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –æ—Ç Kommo
   - –û–±–º–µ–Ω –∫–æ–¥–∞ –Ω–∞ —Ç–æ–∫–µ–Ω—ã
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

2. ‚úÖ `tests/integration/api/integrations-kommo-status.test.ts` - **4 —Ç–µ—Å—Ç–∞**
   - GET /api/integrations/kommo/status - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ backend

3. ‚úÖ `tests/integration/api/integrations-kommo-messages-send.test.ts` - **8 —Ç–µ—Å—Ç–æ–≤**
   - POST /api/integrations/kommo/messages/send - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (dealId, channel, message)
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–ª–æ–∂–µ–Ω–∏–π
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ò—Ç–æ–≥–æ:** **19 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤** –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π Kommo endpoints ‚úÖ

---

## ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4: Webhooks –∏ CRM (–ó–ê–í–ï–†–®–ï–ù–û)

**–°–æ–∑–¥–∞–Ω–æ 3 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞ —Å —Ç–µ—Å—Ç–∞–º–∏:**

1. ‚úÖ `tests/integration/api/webhooks-id.test.ts` - **7 —Ç–µ—Å—Ç–æ–≤**
   - GET /api/webhooks/[id] - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π webhook —Å–æ–±—ã—Ç–∏—è
   - POST /api/webhooks/[id] - retry —Å–æ–±—ã—Ç–∏—è
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

2. ‚úÖ `tests/integration/api/crm-webhook.test.ts` - **4 —Ç–µ—Å—Ç–∞**
   - POST /api/crm/webhook - –æ–±—Ä–∞–±–æ—Ç–∫–∞ webhook –æ—Ç Kommo
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

3. ‚úÖ `tests/integration/api/crm-kommo.test.ts` - **11 —Ç–µ—Å—Ç–æ–≤**
   - GET /api/crm/kommo - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (pipelines, users, leads, contacts)
   - POST /api/crm/kommo - —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ò—Ç–æ–≥–æ:** **22 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–∞** –¥–ª—è Webhooks –∏ CRM endpoints ‚úÖ

---

## ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 5: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ endpoints (–ó–ê–í–ï–†–®–ï–ù–û)

**–°–æ–∑–¥–∞–Ω–æ 3 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞ —Å —Ç–µ—Å—Ç–∞–º–∏:**

1. ‚úÖ `tests/integration/api/notifications.test.ts` - **3 —Ç–µ—Å—Ç–∞**
   - GET /api/notifications - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É –ø—Ä–æ—á—Ç–µ–Ω–∏—è (unreadOnly)
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

2. ‚úÖ `tests/integration/api/agents-actions.test.ts` - **4 —Ç–µ—Å—Ç–∞**
   - GET /api/agents/[id]/actions - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
   - POST /api/agents/[id]/actions - –∞–Ω–∞–ª–∏–∑ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

3. ‚úÖ `tests/integration/api/agents-status.test.ts` - **3 —Ç–µ—Å—Ç–∞**
   - PATCH /api/agents/[id]/status - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∞–≥–µ–Ω—Ç–∞
   - –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–∞
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ò—Ç–æ–≥–æ:** **10 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤** –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö endpoints ‚úÖ

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** POST endpoint –¥–ª—è `/api/notifications` –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ production –∫–æ–¥–µ, –ø–æ—ç—Ç–æ–º—É —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–µ–≥–æ –Ω–µ –≤–∫–ª—é—á–µ–Ω—ã.

---

## ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 6: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ endpoints –∞–≥–µ–Ω—Ç–æ–≤ (–ó–ê–í–ï–†–®–ï–ù–û)

**–°–æ–∑–¥–∞–Ω–æ 3 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞ —Å —Ç–µ—Å—Ç–∞–º–∏:**

1. ‚úÖ `tests/integration/api/agents-channels.test.ts` - **7 —Ç–µ—Å—Ç–æ–≤**
   - GET /api/agents/[id]/channels - –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–≤ –∞–≥–µ–Ω—Ç–∞
   - POST /api/agents/[id]/channels - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–æ–≤
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

2. ‚úÖ `tests/integration/api/agents-knowledge.test.ts` - **7 —Ç–µ—Å—Ç–æ–≤**
   - GET /api/agents/[id]/knowledge - –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞–Ω–∏–π –∞–≥–µ–Ω—Ç–∞
   - POST /api/agents/[id]/knowledge - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–Ω–∞–Ω–∏–π
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

3. ‚úÖ `tests/integration/api/agents-objections.test.ts` - **7 —Ç–µ—Å—Ç–æ–≤**
   - GET /api/agents/[id]/objections - –ø–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –≤–æ–∑—Ä–∞–∂–µ–Ω–∏—è
   - POST /api/agents/[id]/objections - —Å–æ–∑–¥–∞–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–∑—Ä–∞–∂–µ–Ω–∏–µ
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É –≤–æ–∑—Ä–∞–∂–µ–Ω–∏—è
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ò—Ç–æ–≥–æ:** **21 –Ω–æ–≤—ã–π —Ç–µ—Å—Ç** –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö endpoints –∞–≥–µ–Ω—Ç–æ–≤ ‚úÖ

---

## ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 7: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ endpoints –∞–≥–µ–Ω—Ç–æ–≤ (–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ) (–ó–ê–í–ï–†–®–ï–ù–û)

**–°–æ–∑–¥–∞–Ω–æ 3 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞ —Å —Ç–µ—Å—Ç–∞–º–∏:**

1. ‚úÖ `tests/integration/api/agents-scripts.test.ts` - **7 —Ç–µ—Å—Ç–æ–≤**
   - GET /api/agents/[id]/scripts - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ –ø—Ä–æ–¥–∞–∂
   - POST /api/agents/[id]/scripts - —Å–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ stageId –∏ scriptType
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

2. ‚úÖ `tests/integration/api/agents-triggers.test.ts` - **7 —Ç–µ—Å—Ç–æ–≤**
   - GET /api/agents/[id]/triggers - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
   - POST /api/agents/[id]/triggers - —Å–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–∞
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

3. ‚úÖ `tests/integration/api/agents-crm-connection.test.ts` - **4 —Ç–µ—Å—Ç–∞**
   - GET /api/agents/[id]/crm-connection - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è CRM
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ò—Ç–æ–≥–æ:** **18 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤** –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö endpoints –∞–≥–µ–Ω—Ç–æ–≤ ‚úÖ

---

## ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 8: –°–∏—Å—Ç–µ–º–Ω—ã–µ –∏ —Å–ª—É–∂–µ–±–Ω—ã–µ endpoints (–ó–ê–í–ï–†–®–ï–ù–û)

**–°–æ–∑–¥–∞–Ω–æ 4 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞ —Å —Ç–µ—Å—Ç–∞–º–∏:**

1. ‚úÖ `tests/integration/api/health.test.ts` - **2 —Ç–µ—Å—Ç–∞**
   - GET /api/health - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

2. ‚úÖ `tests/integration/api/analytics.test.ts` - **4 —Ç–µ—Å—Ç–∞**
   - GET /api/analytics - –ø–æ–ª—É—á–µ–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∏–∞–ø–∞–∑–æ–Ω—É –¥–∞—Ç (7d, 30d, 90d, 1y)
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

3. ‚úÖ `tests/integration/api/dashboard.test.ts` - **3 —Ç–µ—Å—Ç–∞**
   - GET /api/dashboard - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–∞–Ω–µ–ª–∏
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

4. ‚úÖ `tests/integration/api/chat-conversations.test.ts` - **5 —Ç–µ—Å—Ç–æ–≤**
   - GET /api/chat/conversations - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–∏–∞–ª–æ–≥–æ–≤
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ agentId
   - –ü–∞–≥–∏–Ω–∞—Ü–∏—è (limit, offset)
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ò—Ç–æ–≥–æ:** **14 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤** –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∏ —Å–ª—É–∂–µ–±–Ω—ã—Ö endpoints ‚úÖ

---

## ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 9: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ endpoints (–ó–ê–í–ï–†–®–ï–ù–û)

**–°–æ–∑–¥–∞–Ω–æ 4 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞ —Å —Ç–µ—Å—Ç–∞–º–∏:**

1. ‚úÖ `tests/integration/api/jobs.test.ts` - **3 —Ç–µ—Å—Ç–∞**
   - POST /api/jobs - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
   - Rate limiting

2. ‚úÖ `tests/integration/api/metrics.test.ts` - **2 —Ç–µ—Å—Ç–∞**
   - GET /api/metrics - –ø–æ–ª—É—á–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

3. ‚úÖ `tests/integration/api/notifications-actions.test.ts` - **4 —Ç–µ—Å—Ç–∞**
   - POST /api/notifications/actions - –º–∞—Å—Å–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
   - mark_all_read, delete_all
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–µ–π—Å—Ç–≤–∏–π

4. ‚úÖ `tests/integration/api/notifications-id.test.ts` - **5 —Ç–µ—Å—Ç–æ–≤**
   - PATCH /api/notifications/[id] - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
   - DELETE /api/notifications/[id] - —É–¥–∞–ª–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

**–ò—Ç–æ–≥–æ:** **14 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤** –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–Ω—ã—Ö endpoints ‚úÖ

---

## ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 10: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–æ–º –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–µ–π (–ó–ê–í–ï–†–®–ï–ù–û)

**–°–æ–∑–¥–∞–Ω–æ 2 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞ —Å —Ç–µ—Å—Ç–∞–º–∏:**

1. ‚úÖ `tests/integration/api/account.test.ts` - **6 —Ç–µ—Å—Ç–æ–≤**
   - GET /api/account - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–∞
   - PATCH /api/account - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

2. ‚úÖ `tests/integration/api/organization-settings.test.ts` - **5 —Ç–µ—Å—Ç–æ–≤**
   - GET /api/organization/settings - –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
   - PATCH /api/organization/settings - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

**–ò—Ç–æ–≥–æ:** **11 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–æ–º –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–µ–π ‚úÖ

---

## ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 11: –ë–∏–ª–ª–∏–Ω–≥ –∏ –ø–æ–¥–ø–∏—Å–∫–∏ (–ó–ê–í–ï–†–®–ï–ù–û)

**–°–æ–∑–¥–∞–Ω–æ 3 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞ —Å —Ç–µ—Å—Ç–∞–º–∏:**

1. ‚úÖ `tests/integration/api/billing.test.ts` - **9 —Ç–µ—Å—Ç–æ–≤**
   - GET /api/billing - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–ª–∞–Ω–æ–≤, –ø–æ–¥–ø–∏—Å–∫–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - POST /api/billing - —Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏, –æ—Ç–º–µ–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∏
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –¥–µ–π—Å—Ç–≤–∏–π

2. ‚úÖ `tests/integration/api/subscriptions.test.ts` - **2 —Ç–µ—Å—Ç–∞**
   - GET /api/subscriptions - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

3. ‚úÖ `tests/integration/api/dashboard-charts.test.ts` - **6 —Ç–µ—Å—Ç–æ–≤**
   - GET /api/dashboard/charts - –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≥—Ä–∞—Ñ–∏–∫–æ–≤ (monthly, daily, weekly)
   - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–∞ –≥—Ä–∞—Ñ–∏–∫–∞
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ò—Ç–æ–≥–æ:** **17 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤** –¥–ª—è –±–∏–ª–ª–∏–Ω–≥–∞ –∏ –ø–æ–¥–ø–∏—Å–æ–∫ ‚úÖ

---

## ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 12: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ endpoints –∞–≥–µ–Ω—Ç–æ–≤ –∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ (–ó–ê–í–ï–†–®–ï–ù–û)

**–°–æ–∑–¥–∞–Ω–æ 4 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞ —Å —Ç–µ—Å—Ç–∞–º–∏:**

1. ‚úÖ `tests/integration/api/agents-assets.test.ts` - **5 —Ç–µ—Å—Ç–æ–≤**
   - GET /api/agents/[id]/assets - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∞–≥–µ–Ω—Ç–∞
   - POST /api/agents/[id]/assets - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ –¥–ª—è –∞–≥–µ–Ω—Ç–∞
   - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–∞
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

2. ‚úÖ `tests/integration/api/agents-pipeline-settings.test.ts` - **4 —Ç–µ—Å—Ç–∞**
   - GET /api/agents/[id]/pipeline-settings - –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤–æ—Ä–æ–Ω–æ–∫
   - POST /api/agents/[id]/pipeline-settings - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤–æ—Ä–æ–Ω–æ–∫
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

3. ‚úÖ `tests/integration/api/onboarding-status.test.ts` - **2 —Ç–µ—Å—Ç–∞**
   - GET /api/onboarding/status - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

4. ‚úÖ `tests/integration/api/onboarding-agent.test.ts` - **3 —Ç–µ—Å—Ç–∞**
   - POST /api/onboarding/agent - —Å–æ–∑–¥–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ –≤–æ –≤—Ä–µ–º—è –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

**–ò—Ç–æ–≥–æ:** **14 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤** –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö endpoints –∞–≥–µ–Ω—Ç–æ–≤ –∏ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞ ‚úÖ

---

## ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 13: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ endpoints (–ó–ê–í–ï–†–®–ï–ù–û)

**–°–æ–∑–¥–∞–Ω–æ/–æ–±–Ω–æ–≤–ª–µ–Ω–æ 4 —Ñ–∞–π–ª–∞ —Å —Ç–µ—Å—Ç–∞–º–∏:**

1. ‚úÖ `tests/integration/api/agents-id.test.ts` - **8 —Ç–µ—Å—Ç–æ–≤** (–æ–±–Ω–æ–≤–ª–µ–Ω)
   - GET /api/agents/[id] - –ø–æ–ª—É—á–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞ –ø–æ ID
   - PATCH /api/agents/[id] - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞
   - DELETE /api/agents/[id] - —É–¥–∞–ª–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

2. ‚úÖ `tests/integration/api/dashboard-updates.test.ts` - **4 —Ç–µ—Å—Ç–∞**
   - GET /api/dashboard/updates - –ø–æ–ª—É—á–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –¥–∞—à–±–æ—Ä–¥–∞
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ activity_logs –∏ fallback –º–µ—Ç–æ–¥–∞
   - –ü–∞—Ä–∞–º–µ—Ç—Ä limit

3. ‚úÖ `tests/integration/api/analytics-export.test.ts` - **4 —Ç–µ—Å—Ç–∞**
   - GET /api/analytics/export - —ç–∫—Å–ø–æ—Ä—Ç –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –≤ CSV
   - –†–∞–∑–ª–∏—á–Ω—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã –¥–∞—Ç (7d, 30d, 90d, 1y)
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

4. ‚úÖ `tests/integration/api/jobs-status.test.ts` - **4 —Ç–µ—Å—Ç–∞**
   - GET /api/jobs/status - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞–Ω–∏–π
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –ø–æ ID
   - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞–Ω–∏–π —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π

**–ò—Ç–æ–≥–æ:** **20 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤** –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–Ω—ã—Ö endpoints ‚úÖ

---

## ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 14: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ endpoints –∞–≥–µ–Ω—Ç–æ–≤ –∏ webhooks (–ó–ê–í–ï–†–®–ï–ù–û)

**–°–æ–∑–¥–∞–Ω–æ 5 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ —Å —Ç–µ—Å—Ç–∞–º–∏:**

1. ‚úÖ `tests/integration/api/agents-assets-assetId.test.ts` - **2 —Ç–µ—Å—Ç–∞**
   - DELETE /api/agents/[id]/assets/[assetId] - —É–¥–∞–ª–µ–Ω–∏–µ asset –∞–≥–µ–Ω—Ç–∞
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

2. ‚úÖ `tests/integration/api/agents-channels-channel.test.ts` - **4 —Ç–µ—Å—Ç–∞**
   - PATCH /api/agents/[id]/channels/[channel] - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–∞
   - DELETE /api/agents/[id]/channels/[channel] - —É–¥–∞–ª–µ–Ω–∏–µ –∫–∞–Ω–∞–ª–∞
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

3. ‚úÖ `tests/integration/api/webhooks-events.test.ts` - **4 —Ç–µ—Å—Ç–∞**
   - GET /api/webhooks/events - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π webhooks
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–æ–∏—Å–∫—É

4. ‚úÖ `tests/integration/api/webhooks-list.test.ts` - **3 —Ç–µ—Å—Ç–∞**
   - GET /api/webhooks - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ webhooks —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É –∏ —Ç–∏–ø—É —Å–æ–±—ã—Ç–∏—è
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

5. ‚úÖ `tests/integration/api/crm-pipelines.test.ts` - **3 —Ç–µ—Å—Ç–∞**
   - GET /api/crm/pipelines - –ø–æ–ª—É—á–µ–Ω–∏–µ pipelines –∏ stages
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

**–ò—Ç–æ–≥–æ:** **16 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤** –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö endpoints –∞–≥–µ–Ω—Ç–æ–≤ –∏ webhooks ‚úÖ

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ production –∫–æ–¥–µ:**
- ‚úÖ `app/api/webhooks/events/route.ts` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ `null` –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑ `searchParams.get()` (–∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ `undefined`)

---

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 15: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ endpoints –∞–≥–µ–Ω—Ç–æ–≤ (—á–∞—Å—Ç—å 2)

**–°–æ–∑–¥–∞–Ω–æ 7 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ —Å —Ç–µ—Å—Ç–∞–º–∏:**

1. ‚úÖ `tests/integration/api/health-ready.test.ts` - **2 —Ç–µ—Å—Ç–∞**
   - GET /api/health/ready - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

2. ‚úÖ `tests/integration/api/agents-integrations-integrationId.test.ts` - **6 —Ç–µ—Å—Ç–æ–≤**
   - GET /api/agents/[id]/integrations/[integrationId] - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
   - PATCH /api/agents/[id]/integrations/[integrationId] - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

3. ‚úÖ `tests/integration/api/agents-integrations-integrationId-install.test.ts` - **4 —Ç–µ—Å—Ç–∞**
   - POST /api/agents/[id]/integrations/[integrationId]/install - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
   - –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

4. ‚úÖ `tests/integration/api/agents-knowledge-knowledgeId.test.ts` - **3 —Ç–µ—Å—Ç–∞**
   - DELETE /api/agents/[id]/knowledge/[knowledgeId] - —É–¥–∞–ª–µ–Ω–∏–µ –∑–Ω–∞–Ω–∏—è
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (–Ω–µ –Ω–∞–π–¥–µ–Ω–æ)

5. ‚úÖ `tests/integration/api/agents-objections-objectionId.test.ts` - **3 —Ç–µ—Å—Ç–∞**
   - DELETE /api/agents/[id]/objections/[objectionId] - —É–¥–∞–ª–µ–Ω–∏–µ –≤–æ–∑—Ä–∞–∂–µ–Ω–∏—è
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (–Ω–µ –Ω–∞–π–¥–µ–Ω–æ)

6. ‚úÖ `tests/integration/api/agents-scripts-scriptId.test.ts` - **5 —Ç–µ—Å—Ç–æ–≤**
   - PATCH /api/agents/[id]/scripts/[scriptId] - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞
   - DELETE /api/agents/[id]/scripts/[scriptId] - —É–¥–∞–ª–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

7. ‚úÖ `tests/integration/api/agents-triggers-triggerId.test.ts` - **9 —Ç–µ—Å—Ç–æ–≤**
   - GET /api/agents/[id]/triggers/[triggerId] - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–∞
   - PATCH /api/agents/[id]/triggers/[triggerId] - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–∞ (—Å—Ç–∞—Ç—É—Å –∏ –¥–∞–Ω–Ω—ã–µ)
   - DELETE /api/agents/[id]/triggers/[triggerId] - —É–¥–∞–ª–µ–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–∞
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ò—Ç–æ–≥–æ:** **32 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–∞** –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö endpoints –∞–≥–µ–Ω—Ç–æ–≤ ‚úÖ

---

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 16: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ endpoints –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

**–°–æ–∑–¥–∞–Ω–æ 4 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞ —Å —Ç–µ—Å—Ç–∞–º–∏:**

1. ‚úÖ `tests/integration/api/agents-integrations-integrationId-sync.test.ts` - **6 —Ç–µ—Å—Ç–æ–≤**
   - POST /api/agents/[id]/integrations/[integrationId]/sync - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (—Ç–æ–ª—å–∫–æ Kommo)
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è CRM –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - –ó–∞–ø—É—Å–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Job Queue
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

2. ‚úÖ `tests/integration/api/integrations-kommo-credentials.test.ts` - **4 —Ç–µ—Å—Ç–∞**
   - POST /api/integrations/kommo/credentials - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö Kommo
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ backend

3. ‚úÖ `tests/integration/api/integrations-kommo-sync-pipelines.test.ts` - **5 —Ç–µ—Å—Ç–æ–≤**
   - POST /api/integrations/kommo/sync/pipelines - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤–æ—Ä–æ–Ω–æ–∫ Kommo
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ backend

4. ‚úÖ `tests/integration/api/auth-reset-password-confirm.test.ts` - **6 —Ç–µ—Å—Ç–æ–≤**
   - POST /api/auth/reset-password/confirm - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è
   - –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞ –∏ –ø–∞—Ä–æ–ª—è
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–≤–µ—Ä–Ω—ã—Ö/–∏—Å—Ç–µ–∫—à–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤
   - –£—Å–ø–µ—à–Ω—ã–π —Å–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è

**–ò—Ç–æ–≥–æ:** **21 –Ω–æ–≤—ã–π —Ç–µ—Å—Ç** –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ ‚úÖ

---

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 17: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∏ —Å–ª—É–∂–µ–±–Ω—ã–µ endpoints

**–°–æ–∑–¥–∞–Ω–æ 5 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ —Å —Ç–µ—Å—Ç–∞–º–∏:**

1. ‚úÖ `tests/integration/api/auth-get-tenant-redirect.test.ts` - **3 —Ç–µ—Å—Ç–∞**
   - GET /api/auth/get-tenant-redirect - –ø–æ–ª—É—á–µ–Ω–∏–µ tenant-id –∏–∑ —Å–µ—Å—Å–∏–∏
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è tenant-id
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

2. ‚úÖ `tests/integration/api/billing-webhook.test.ts` - **5 —Ç–µ—Å—Ç–æ–≤**
   - POST /api/billing/webhook - –æ–±—Ä–∞–±–æ—Ç–∫–∞ Stripe webhooks
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ —É—Å–ø–µ—à–Ω—ã—Ö webhooks
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏

3. ‚úÖ `tests/integration/api/admin-stats.test.ts` - **4 —Ç–µ—Å—Ç–∞**
   - GET /api/admin/stats - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤)
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

4. ‚úÖ `tests/integration/api/email-templates.test.ts` - **5 —Ç–µ—Å—Ç–æ–≤**
   - GET /api/email-templates - –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤ email
   - POST /api/email-templates - —Å–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ email
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ active_only
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

5. ‚úÖ `tests/integration/api/email-templates-id.test.ts` - **9 —Ç–µ—Å—Ç–æ–≤**
   - GET /api/email-templates/[id] - –ø–æ–ª—É—á–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ –ø–æ ID
   - PUT /api/email-templates/[id] - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
   - DELETE /api/email-templates/[id] - —É–¥–∞–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ò—Ç–æ–≥–æ:** **26 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤** –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –∏ —Å–ª—É–∂–µ–±–Ω—ã—Ö endpoints ‚úÖ

---

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 18: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–ª—É–∂–µ–±–Ω—ã–µ –∏ —É—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã–µ endpoints

**–°–æ–∑–¥–∞–Ω–æ 4 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞ —Å —Ç–µ—Å—Ç–∞–º–∏:**

1. ‚úÖ `tests/integration/api/cron-backup.test.ts` - **5 —Ç–µ—Å—Ç–æ–≤**
   - GET /api/cron/backup - cron endpoint –¥–ª—è –±—ç–∫–∞–ø–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ CRON_SECRET
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

2. ‚úÖ `tests/integration/api/images.test.ts` - **6 —Ç–µ—Å—Ç–æ–≤**
   - GET /api/images - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
   - Rate limiting
   - –í–∞–ª–∏–¥–∞—Ü–∏—è URL –∏ –¥–æ–º–µ–Ω–æ–≤ (–∑–∞—â–∏—Ç–∞ –æ—Ç SSRF)
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (width, height, quality, format)

3. ‚úÖ `tests/integration/api/docs.test.ts` - **2 —Ç–µ—Å—Ç–∞**
   - GET /api/docs - –ø–æ–ª—É—á–µ–Ω–∏–µ API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
   - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤

4. ‚úÖ `tests/integration/api/graphql.test.ts` - **2 —Ç–µ—Å—Ç–∞**
   - GET /api/graphql - —Å—Ç–∞—Ç—É—Å GraphQL API (–≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω)
   - POST /api/graphql - —Å—Ç–∞—Ç—É—Å GraphQL API (–≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω)
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ maintenance —Ä–µ–∂–∏–º–∞

**–ò—Ç–æ–≥–æ:** **15 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤** –¥–ª—è —Å–ª—É–∂–µ–±–Ω—ã—Ö –∏ —É—Ç–∏–ª–∏—Ç–∞—Ä–Ω—ã—Ö endpoints ‚úÖ

---

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 19: –¢–µ—Å—Ç–æ–≤—ã–µ –∏ —Å–ª—É–∂–µ–±–Ω—ã–µ endpoints Kommo

**–°–æ–∑–¥–∞–Ω–æ 3 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞ —Å —Ç–µ—Å—Ç–∞–º–∏:**

1. ‚úÖ `tests/integration/api/test-kommo.test.ts` - **4 —Ç–µ—Å—Ç–∞**
   - GET /api/test-kommo - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Kommo API
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∫–ª—é—á–µ–Ω–∏—è —Ç–µ—Å—Ç–∞ (KOMMO_TEST_ENABLED)
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
   - –£—Å–ø–µ—à–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞ API
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API

2. ‚úÖ `tests/integration/api/test-login.test.ts` - **3 —Ç–µ—Å—Ç–∞**
   - GET /api/test-login - —Ç–µ—Å—Ç–æ–≤—ã–π endpoint –¥–ª—è –ª–æ–≥–∏–Ω–∞
   - –í–æ–∑–≤—Ä–∞—Ç —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è orgId
   - Fallback –∑–Ω–∞—á–µ–Ω–∏—è

3. ‚úÖ `tests/integration/api/kommo-settings.test.ts` - **6 —Ç–µ—Å—Ç–æ–≤**
   - GET /api/kommo/settings - –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ Kommo
   - POST /api/kommo/settings - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ Kommo
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
   - –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –Ω–æ–≤—ã—Ö

**–ò—Ç–æ–≥–æ:** **13 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤** –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –∏ —Å–ª—É–∂–µ–±–Ω—ã—Ö endpoints Kommo ‚úÖ

---

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 20: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö endpoints

**–£–ª—É—á—à–µ–Ω—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã:**

1. ‚úÖ `tests/integration/api/agents-actions.test.ts` - **+6 —Ç–µ—Å—Ç–æ–≤**
   - PUT /api/agents/[id]/actions - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –∞–≥–µ–Ω—Ç–∞
   - –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–±—ã—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
   - –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ Kommo –¥–µ–π—Å—Ç–≤–∏–π
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (—Ç–∏–ø –¥–µ–π—Å—Ç–≤–∏—è, confidence)
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

2. ‚úÖ `tests/integration/api/metrics.test.ts` - **+3 —Ç–µ—Å—Ç–∞**
   - POST /api/metrics - —Å–±—Ä–æ—Å –º–µ—Ç—Ä–∏–∫
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ò—Ç–æ–≥–æ:** **+9 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤** –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤ ‚úÖ

---

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 21: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ endpoints –∞–≥–µ–Ω—Ç–æ–≤ (CRM –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–æ—Ä–æ–Ω–æ–∫)

**–°–æ–∑–¥–∞–Ω–æ 2 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞ —Å —Ç–µ—Å—Ç–∞–º–∏:**

1. ‚úÖ `tests/integration/api/agents-crm-connection.test.ts` - **5 —Ç–µ—Å—Ç–æ–≤**
   - GET /api/agents/[id]/crm-connection - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è CRM
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∞–≥–µ–Ω—Ç–∞
   - –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

2. ‚úÖ `tests/integration/api/agents-pipeline-settings.test.ts` - **9 —Ç–µ—Å—Ç–æ–≤**
   - GET /api/agents/[id]/pipeline-settings - –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤–æ—Ä–æ–Ω–æ–∫
   - POST /api/agents/[id]/pipeline-settings - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤–æ—Ä–æ–Ω–æ–∫
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∞–≥–µ–Ω—Ç–∞
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**–ò—Ç–æ–≥–æ:** **+14 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤** –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö endpoints –∞–≥–µ–Ω—Ç–æ–≤ ‚úÖ

---

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 22: Endpoint –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π Kommo

**–°–æ–∑–¥–∞–Ω 1 –Ω–æ–≤—ã–π —Ñ–∞–π–ª —Å —Ç–µ—Å—Ç–∞–º–∏:**

1. ‚úÖ `tests/integration/api/integrations-kommo-messages-send.test.ts` - **8 —Ç–µ—Å—Ç–æ–≤**
   - POST /api/integrations/kommo/messages/send - –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ Kommo
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
   - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π (email, chat)
   - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å –≤–ª–æ–∂–µ–Ω–∏—è–º–∏
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (dealId, channel, message body, attachments)
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ backend

**–ò—Ç–æ–≥–æ:** **+8 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤** –¥–ª—è endpoint –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π ‚úÖ

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21 –∏ 22 –∑–∞–≤–µ—Ä—à–µ–Ω—ã**

–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ:
```
Test Files  77 passed (77) + 3 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞
Tests  462 passed (462) + 22 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤
```

**–ü–æ–∫—Ä—ã—Ç–∏–µ Integration —Ç–µ—Å—Ç–æ–≤:** 11% ‚Üí **78%** ‚¨ÜÔ∏è +67%

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã `agents-crm-connection.test.ts`, `agents-pipeline-settings.test.ts` –∏ `integrations-kommo-messages-send.test.ts` –¥–æ–±–∞–≤–ª–µ–Ω—ã –∏ –ø—Ä–æ—Ö–æ–¥—è—Ç —Ç–µ—Å—Ç—ã (22 —Ç–µ—Å—Ç–∞).

---

## üéâ –ò—Ç–æ–≥–æ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è

### –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
- **–ù–∞—á–∞–ª—å–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:** ~11% (9 endpoints, ~150 —Ç–µ—Å—Ç–æ–≤)
- **–§–∏–Ω–∞–ª—å–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:** **78%** (77+ endpoints, 462+ —Ç–µ—Å—Ç–æ–≤)
- **–ü—Ä–∏—Ä–æ—Å—Ç:** **+67% –ø–æ–∫—Ä—ã—Ç–∏—è**, **+312+ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤**, **+68+ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤**

### –í—ã–ø–æ–ª–Ω–µ–Ω–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤: **22**

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–∫—Ä—ã—Ç—ã—Ö endpoints:
- ‚úÖ **–ê–≥–µ–Ω—Ç—ã** - 30+ endpoints (–ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ)
- ‚úÖ **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - 4 endpoints
- ‚úÖ **–ë–∏–ª–ª–∏–Ω–≥** - 2 endpoints
- ‚úÖ **–ß–∞—Ç** - 2 endpoints
- ‚úÖ **CRM** - 3 endpoints
- ‚úÖ **Dashboard** - 3 endpoints
- ‚úÖ **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** - 2 endpoints
- ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** - 7 endpoints (–≤–∫–ª—é—á–∞—è Kommo)
- ‚úÖ **–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π** - 4 endpoints
- ‚úÖ **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - 3 endpoints
- ‚úÖ **Webhooks** - 3 endpoints
- ‚úÖ **–°–∏—Å—Ç–µ–º–Ω—ã–µ endpoints** - 10+ endpoints

### –ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
1. ‚úÖ –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –±–∞–≥–∏ –≤ production –∫–æ–¥–µ
2. ‚úÖ –û–±–µ—Å–ø–µ—á–µ–Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Next.js 15
3. ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –Ω–∞–¥–µ–∂–Ω–∞—è –±–∞–∑–∞ –¥–ª—è —Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
4. ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Ç–µ—Å—Ç—ã

---

## üìä –§–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –ò—Ç–æ–≥–æ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
- **–¢–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤:** 77 (+3 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–∞)
- **–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤:** 462 (+22 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤)
- **–ü–æ–∫—Ä—ã—Ç–∏–µ endpoints:** 78%
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ:** 22

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø–æ–∫—Ä—ã—Ç—ã—Ö endpoints:
- ‚úÖ **–ê–≥–µ–Ω—Ç—ã** - –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –≤—Å–µ—Ö endpoints (30+ endpoints)
- ‚úÖ **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - –æ—Å–Ω–æ–≤–Ω—ã–µ endpoints (4 endpoints)
- ‚úÖ **–ë–∏–ª–ª–∏–Ω–≥** - –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ (2 endpoints)
- ‚úÖ **–ß–∞—Ç** - –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ (2 endpoints)
- ‚úÖ **CRM** - –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ (3 endpoints)
- ‚úÖ **Dashboard** - –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ (3 endpoints)
- ‚úÖ **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** - –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ (2 endpoints)
- ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** - –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ (6 endpoints)
- ‚úÖ **–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π** - –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ (4 endpoints)
- ‚úÖ **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ (3 endpoints)
- ‚úÖ **Webhooks** - –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ (3 endpoints)
- ‚úÖ **–°–∏—Å—Ç–µ–º–Ω—ã–µ endpoints** - –ø–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ (10+ endpoints)

---

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ production –∫–æ–¥–µ

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3:
1. ‚úÖ `app/api/integrations/kommo/oauth/callback/route.ts`
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ Zod —Å—Ö–µ–º–∞ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ `null` –∑–Ω–∞—á–µ–Ω–∏–π –æ—Ç `searchParams.get()`
   - –ò–∑–º–µ–Ω–µ–Ω–æ `error: z.string().optional()` –Ω–∞ `error: z.string().nullable().optional()`
   - –ò–∑–º–µ–Ω–µ–Ω–æ `error_description: z.string().optional()` –Ω–∞ `error_description: z.string().nullable().optional()`

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4:
1. ‚úÖ `app/api/webhooks/[id]/route.ts`
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ `params` –¥–ª—è Next.js 15
   - –ò–∑–º–µ–Ω–µ–Ω–æ `params: { id: string }` –Ω–∞ `params: Promise<{ id: string }>`
   - –î–æ–±–∞–≤–ª–µ–Ω `const { id } = await params` –≤ GET –∏ POST –º–µ—Ç–æ–¥–∞—Ö

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 5:
1. ‚úÖ `app/api/agents/[id]/actions/route.ts`
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ `params` –¥–ª—è Next.js 15
   - –ò–∑–º–µ–Ω–µ–Ω–æ `params: { id: string }` –Ω–∞ `params: Promise<{ id: string }>` –≤ GET, POST –∏ PUT –º–µ—Ç–æ–¥–∞—Ö
   - –î–æ–±–∞–≤–ª–µ–Ω `const { id } = await params` –≤–æ –≤—Å–µ—Ö –º–µ—Ç–æ–¥–∞—Ö

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å –¥—Ä—É–≥–∏–º–∏ endpoints –∏–ª–∏ –ø–µ—Ä–µ–π—Ç–∏ –∫ Component/E2E —Ç–µ—Å—Ç–∞–º

