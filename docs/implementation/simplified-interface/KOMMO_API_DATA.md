# –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–∞–Ω–Ω—ã—Ö –∏ –º–µ—Ç–æ–¥–æ–≤ Kommo CRM API

**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2025-01-26  
**–ò—Å—Ç–æ—á–Ω–∏–∫:** 
- –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Kommo API: https://developers.kommo.com/docs/about-kommo-api
- –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã –≤ `lib/lib/crm/kommo.ts`

---

## üìã –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### 1. **–í–æ—Ä–æ–Ω–∫–∏ –ø—Ä–æ–¥–∞–∂ (Pipelines)**

**Endpoint:** `GET /api/v4/leads/pipelines`

**–î–∞–Ω–Ω—ã–µ:**
- `id` - ID –≤–æ—Ä–æ–Ω–∫–∏
- `name` - –ù–∞–∑–≤–∞–Ω–∏–µ –≤–æ—Ä–æ–Ω–∫–∏
- `sort` - –ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
- `is_main` - –û—Å–Ω–æ–≤–Ω–∞—è –≤–æ—Ä–æ–Ω–∫–∞ (boolean)
- `is_unsorted_on` - –í–∫–ª—é—á–µ–Ω–∞ –ª–∏ –Ω–µ—Ä–∞–∑–æ–±—Ä–∞–Ω–Ω–∞—è –≤–æ—Ä–æ–Ω–∫–∞
- `is_archive` - –ê—Ä—Ö–∏–≤–Ω–∞—è –≤–æ—Ä–æ–Ω–∫–∞ (boolean)
- `account_id` - ID –∞–∫–∫–∞—É–Ω—Ç–∞
- `_embedded.statuses` - –≠—Ç–∞–ø—ã –≤–æ—Ä–æ–Ω–∫–∏:
  - `id` - ID —ç—Ç–∞–ø–∞
  - `name` - –ù–∞–∑–≤–∞–Ω–∏–µ —ç—Ç–∞–ø–∞
  - `sort` - –ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
  - `color` - –¶–≤–µ—Ç —ç—Ç–∞–ø–∞
  - `type` - –¢–∏–ø —ç—Ç–∞–ø–∞ (0-3)
  - `is_editable` - –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–π (boolean)

**–ú–µ—Ç–æ–¥ –≤ –∫–æ–¥–µ:** `getPipelines()`

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –í—ã–±–æ—Ä –≤–æ—Ä–æ–Ω–æ–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã –∞–≥–µ–Ω—Ç–∞
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —ç—Ç–∞–ø–æ–≤ –¥–ª—è —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–¥–µ–ª–æ–∫ –ø–æ –≤–æ—Ä–æ–Ω–∫–∞–º

---

### 2. **–≠—Ç–∞–ø—ã –≤–æ—Ä–æ–Ω–æ–∫ (Pipeline Stages / Statuses)**

**Endpoint:** `GET /api/v4/leads/pipelines/{pipeline_id}`

**–î–∞–Ω–Ω—ã–µ:**
- `id` - ID —ç—Ç–∞–ø–∞
- `name` - –ù–∞–∑–≤–∞–Ω–∏–µ —ç—Ç–∞–ø–∞
- `sort` - –ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
- `color` - –¶–≤–µ—Ç —ç—Ç–∞–ø–∞ (hex)
- `type` - –¢–∏–ø —ç—Ç–∞–ø–∞:
  - `0` - –û–±—ã—á–Ω—ã–π —ç—Ç–∞–ø
  - `1` - –£—Å–ø–µ—à–Ω—ã–π —ç—Ç–∞–ø
  - `2` - –ù–µ—É—Å–ø–µ—à–Ω—ã–π —ç—Ç–∞–ø
  - `3` - –ü–µ—Ä–≤–∏—á–Ω—ã–π —ç—Ç–∞–ø
- `is_editable` - –ú–æ–∂–Ω–æ –ª–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
- `pipeline_id` - ID –≤–æ—Ä–æ–Ω–∫–∏

**–ú–µ—Ç–æ–¥ –≤ –∫–æ–¥–µ:** `getPipelines()` (–≤–ª–æ–∂–µ–Ω–æ –≤ `_embedded.statuses`)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –ø–æ —ç—Ç–∞–ø–∞–º
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —Å–¥–µ–ª–æ–∫
- –£—Å–ª–æ–≤–∏—è –¥–ª—è —Ü–µ–ø–æ—á–µ–∫

---

### 3. **–°–¥–µ–ª–∫–∏ (Leads)**

**Endpoints:**
- `GET /api/v4/leads` - –°–ø–∏—Å–æ–∫ —Å–¥–µ–ª–æ–∫
- `GET /api/v4/leads/{id}` - –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Å–¥–µ–ª–∫–∞
- `POST /api/v4/leads` - –°–æ–∑–¥–∞–Ω–∏–µ —Å–¥–µ–ª–∫–∏
- `PATCH /api/v4/leads` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏

**–î–∞–Ω–Ω—ã–µ:**
- `id` - ID —Å–¥–µ–ª–∫–∏
- `name` - –ù–∞–∑–≤–∞–Ω–∏–µ —Å–¥–µ–ª–∫–∏
- `price` - –°—É–º–º–∞ —Å–¥–µ–ª–∫–∏
- `status_id` - ID —ç—Ç–∞–ø–∞
- `pipeline_id` - ID –≤–æ—Ä–æ–Ω–∫–∏
- `responsible_user_id` - ID –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ
- `created_at` - –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è (timestamp)
- `updated_at` - –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (timestamp)
- `closed_at` - –î–∞—Ç–∞ –∑–∞–∫—Ä—ã—Ç–∏—è (timestamp)
- `closest_task_at` - –ë–ª–∏–∂–∞–π—à–∞—è –∑–∞–¥–∞—á–∞ (timestamp)
- `is_deleted` - –£–¥–∞–ª–µ–Ω–∞ (boolean)
- `score` - –û—Ü–µ–Ω–∫–∞ —Å–¥–µ–ª–∫–∏
- `account_id` - ID –∞–∫–∫–∞—É–Ω—Ç–∞
- `loss_reason_id` - ID –ø—Ä–∏—á–∏–Ω—ã –ø–æ—Ç–µ—Ä–∏
- `custom_fields_values` - –ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø–æ–ª—è:
  - `field_id` - ID –ø–æ–ª—è
  - `field_name` - –ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ–ª—è
  - `values` - –ú–∞—Å—Å–∏–≤ –∑–Ω–∞—á–µ–Ω–∏–π:
    - `value` - –ó–Ω–∞—á–µ–Ω–∏–µ
    - `enum_id` - ID –∑–Ω–∞—á–µ–Ω–∏—è (–¥–ª—è select)
    - `enum_code` - –ö–æ–¥ –∑–Ω–∞—á–µ–Ω–∏—è
- `_embedded.contacts` - –°–≤—è–∑–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã:
  - `id` - ID –∫–æ–Ω—Ç–∞–∫—Ç–∞
  - `is_main` - –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–∞–∫—Ç (boolean)
- `_embedded.companies` - –°–≤—è–∑–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏:
  - `id` - ID –∫–æ–º–ø–∞–Ω–∏–∏
  - `is_main` - –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–º–ø–∞–Ω–∏—è (boolean)
- `_embedded.tags` - –¢–µ–≥–∏:
  - `id` - ID —Ç–µ–≥–∞
  - `name` - –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ–≥–∞

**–ú–µ—Ç–æ–¥—ã –≤ –∫–æ–¥–µ:**
- `getLead(leadId)` - –ü–æ–ª—É—á–∏—Ç—å —Å–¥–µ–ª–∫—É
- `getLeads()` - –°–ø–∏—Å–æ–∫ —Å–¥–µ–ª–æ–∫
- `createLead(lead)` - –°–æ–∑–¥–∞—Ç—å —Å–¥–µ–ª–∫—É
- `updateLead(leadId, lead)` - –û–±–Ω–æ–≤–∏—Ç—å —Å–¥–µ–ª–∫—É
- `searchLeads(query)` - –ü–æ–∏—Å–∫ —Å–¥–µ–ª–æ–∫

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å–¥–µ–ª–∫–∏ –¥–ª—è –∞–≥–µ–Ω—Ç–∞
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π —Å–¥–µ–ª–∫–∏
- –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –ø–æ —ç—Ç–∞–ø–∞–º
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–¥–µ–ª–æ–∫

---

### 4. **–ö–æ–Ω—Ç–∞–∫—Ç—ã (Contacts)**

**Endpoints:**
- `GET /api/v4/contacts` - –°–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
- `GET /api/v4/contacts/{id}` - –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–Ω—Ç–∞–∫—Ç
- `POST /api/v4/contacts` - –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞
- `PATCH /api/v4/contacts` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞

**–î–∞–Ω–Ω—ã–µ:**
- `id` - ID –∫–æ–Ω—Ç–∞–∫—Ç–∞
- `name` - –ò–º—è –∫–æ–Ω—Ç–∞–∫—Ç–∞
- `first_name` - –ò–º—è
- `last_name` - –§–∞–º–∏–ª–∏—è
- `responsible_user_id` - ID –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ
- `created_by` - ID —Å–æ–∑–¥–∞—Ç–µ–ª—è
- `updated_by` - ID –æ–±–Ω–æ–≤–∏–≤—à–µ–≥–æ
- `created_at` - –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è (timestamp)
- `updated_at` - –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (timestamp)
- `is_deleted` - –£–¥–∞–ª–µ–Ω (boolean)
- `account_id` - ID –∞–∫–∫–∞—É–Ω—Ç–∞
- `custom_fields_values` - –ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø–æ–ª—è:
  - `field_id` - ID –ø–æ–ª—è
  - `field_name` - –ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ–ª—è
  - `values` - –ú–∞—Å—Å–∏–≤ –∑–Ω–∞—á–µ–Ω–∏–π:
    - `value` - –ó–Ω–∞—á–µ–Ω–∏–µ
    - `enum_id` - ID –∑–Ω–∞—á–µ–Ω–∏—è (–¥–ª—è select)
    - `enum_code` - –ö–æ–¥ –∑–Ω–∞—á–µ–Ω–∏—è
- `_embedded.companies` - –°–≤—è–∑–∞–Ω–Ω—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏
- `_embedded.leads` - –°–≤—è–∑–∞–Ω–Ω—ã–µ —Å–¥–µ–ª–∫–∏
- `_embedded.tags` - –¢–µ–≥–∏

**–ú–µ—Ç–æ–¥—ã –≤ –∫–æ–¥–µ:**
- `getContact(contactId)` - –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç
- `createContact(contact)` - –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç
- `updateContact(contactId, contact)` - –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç
- `searchContacts(query)` - –ü–æ–∏—Å–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ç–∞–∫—Ç–∞ –¥–ª—è –∞–≥–µ–Ω—Ç–∞
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π –∫–æ–Ω—Ç–∞–∫—Ç–∞
- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤

---

### 5. **–ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø–æ–ª—è (Custom Fields)**

**Endpoint:** `GET /api/v4/custom_fields`

**–î–∞–Ω–Ω—ã–µ:**
- `id` - ID –ø–æ–ª—è
- `name` - –ù–∞–∑–≤–∞–Ω–∏–µ –ø–æ–ª—è
- `type` - –¢–∏–ø –ø–æ–ª—è:
  - `text` - –¢–µ–∫—Å—Ç
  - `numeric` - –ß–∏—Å–ª–æ
  - `checkbox` - –ß–µ–∫–±–æ–∫—Å
  - `select` - –í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫
  - `multiselect` - –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä
  - `date` - –î–∞—Ç–∞
  - `url` - URL
  - `textarea` - –ú–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–π —Ç–µ–∫—Å—Ç
  - `radiobutton` - –†–∞–¥–∏–æ–∫–Ω–æ–ø–∫–∞
  - `streetaddress` - –ê–¥—Ä–µ—Å
  - `smart_address` - –£–º–Ω—ã–π –∞–¥—Ä–µ—Å
  - `birthday` - –î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è
  - `legal_entity` - –Æ—Ä–∏–¥–∏—á–µ—Å–∫–æ–µ –ª–∏—Ü–æ
  - `items` - –¢–æ–≤–∞—Ä—ã
  - `org_legal_name` - –ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
  - `linked_entity` - –°–≤—è–∑–∞–Ω–Ω–∞—è —Å—É—â–Ω–æ—Å—Ç—å
- `element_type` - –¢–∏–ø —Å—É—â–Ω–æ—Å—Ç–∏:
  - `contact` - –ö–æ–Ω—Ç–∞–∫—Ç
  - `lead` - –°–¥–µ–ª–∫–∞
  - `company` - –ö–æ–º–ø–∞–Ω–∏—è
  - `task` - –ó–∞–¥–∞—á–∞
- `sort` - –ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
- `code` - –ö–æ–¥ –ø–æ–ª—è
- `is_required` - –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ (boolean)
- `is_deletable` - –ú–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å (boolean)
- `is_visible` - –í–∏–¥–∏–º–æ–µ (boolean)
- `is_api_only` - –¢–æ–ª—å–∫–æ –¥–ª—è API (boolean)
- `enums` - –ó–Ω–∞—á–µ–Ω–∏—è –¥–ª—è select/multiselect (Record<string, string>)
- `nested` - –í–ª–æ–∂–µ–Ω–Ω—ã–µ –ø–æ–ª—è:
  - `id` - ID –≤–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—è
  - `name` - –ù–∞–∑–≤–∞–Ω–∏–µ
  - `sort` - –ü–æ—Ä—è–¥–æ–∫

**–ú–µ—Ç–æ–¥—ã –≤ –∫–æ–¥–µ:**
- `getCustomFields()` - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø–æ–ª—è
- `createCustomField(field)` - –°–æ–∑–¥–∞—Ç—å –ø–æ–ª–µ

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –í—ã–±–æ—Ä –ø–æ–ª–µ–π –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∞–≥–µ–Ω—Ç–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

---

### 6. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (Users)**

**Endpoint:** `GET /api/v4/users`

**–î–∞–Ω–Ω—ã–µ:**
- `id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `name` - –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `email` - Email
- `lang` - –Ø–∑—ã–∫
- `rights` - –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- `is_active` - –ê–∫—Ç–∏–≤–µ–Ω (boolean)
- `is_admin` - –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (boolean)
- `is_free` - –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π (boolean)
- `group_id` - ID –≥—Ä—É–ø–ø—ã
- `role_id` - ID —Ä–æ–ª–∏

**–ú–µ—Ç–æ–¥—ã –≤ –∫–æ–¥–µ:**
- `getUsers()` - –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã—Ö
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞–º
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

---

### 7. **–ó–∞–¥–∞—á–∏ (Tasks)**

**Endpoints:**
- `GET /api/v4/tasks` - –°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á
- `POST /api/v4/tasks` - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏
- `PATCH /api/v4/tasks` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏

**–î–∞–Ω–Ω—ã–µ:**
- `id` - ID –∑–∞–¥–∞—á–∏
- `text` - –¢–µ–∫—Å—Ç –∑–∞–¥–∞—á–∏
- `complete_till` - –°—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (timestamp)
- `task_type_id` - ID —Ç–∏–ø–∞ –∑–∞–¥–∞—á–∏
- `responsible_user_id` - ID –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ
- `entity_id` - ID —Å—É—â–Ω–æ—Å—Ç–∏ (—Å–¥–µ–ª–∫–∞/–∫–æ–Ω—Ç–∞–∫—Ç/–∫–æ–º–ø–∞–Ω–∏—è)
- `entity_type` - –¢–∏–ø —Å—É—â–Ω–æ—Å—Ç–∏:
  - `leads` - –°–¥–µ–ª–∫–∞
  - `contacts` - –ö–æ–Ω—Ç–∞–∫—Ç
  - `companies` - –ö–æ–º–ø–∞–Ω–∏—è
- `created_by` - ID —Å–æ–∑–¥–∞—Ç–µ–ª—è
- `updated_by` - ID –æ–±–Ω–æ–≤–∏–≤—à–µ–≥–æ
- `created_at` - –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è (timestamp)
- `updated_at` - –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (timestamp)
- `is_completed` - –í—ã–ø–æ–ª–Ω–µ–Ω–∞ (boolean)
- `result` - –†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

**–ú–µ—Ç–æ–¥—ã –≤ –∫–æ–¥–µ:**
- `createTask(task)` - –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
- `updateTask(taskId, task)` - –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–¥–∞—á—É
- `getTasksByEntity(entityId, entityType)` - –ü–æ–ª—É—á–∏—Ç—å –∑–∞–¥–∞—á–∏ –ø–æ —Å—É—â–Ω–æ—Å—Ç–∏

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

---

### 8. **–ü—Ä–∏–º–µ—á–∞–Ω–∏—è (Notes)** ‚≠ê –ö–†–ò–¢–ò–ß–ù–û –î–õ–Ø –†–ê–ë–û–¢–´ –° –ü–ò–°–¨–ú–ê–ú–ò

**Endpoints:**
- `GET /api/v4/{entity_type}/{entity_id}/notes` - –°–ø–∏—Å–æ–∫ –ø—Ä–∏–º–µ—á–∞–Ω–∏–π –ø–æ —Å—É—â–Ω–æ—Å—Ç–∏
- `GET /api/v4/{entity_type}/notes` - –°–ø–∏—Å–æ–∫ –ø—Ä–∏–º–µ—á–∞–Ω–∏–π –ø–æ —Ç–∏–ø—É —Å—É—â–Ω–æ—Å—Ç–∏
- `GET /api/v4/notes/{id}` - –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ
- `POST /api/v4/{entity_type}/{entity_id}/notes` - –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è
- `PATCH /api/v4/notes` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏–π (–º–∞—Å—Å–æ–≤–æ–µ)
- `PATCH /api/v4/notes/{id}` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è

**–î–∞–Ω–Ω—ã–µ:**
- `id` - ID –ø—Ä–∏–º–µ—á–∞–Ω–∏—è
- `entity_id` - ID —Å—É—â–Ω–æ—Å—Ç–∏
- `entity_type` - –¢–∏–ø —Å—É—â–Ω–æ—Å—Ç–∏:
  - `leads` - –°–¥–µ–ª–∫–∞
  - `contacts` - –ö–æ–Ω—Ç–∞–∫—Ç
  - `companies` - –ö–æ–º–ø–∞–Ω–∏—è
- `note_type` - –¢–∏–ø –ø—Ä–∏–º–µ—á–∞–Ω–∏—è:
  - `common` - –û–±—ã—á–Ω–æ–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ
  - `call_in` - –í—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫
  - `call_out` - –ò—Å—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫
  - `meeting` - –í—Å—Ç—Ä–µ—á–∞
  - `mail_message` - **Email —Å–æ–æ–±—â–µ–Ω–∏–µ (–≤—Ö–æ–¥—è—â–µ–µ/–∏—Å—Ö–æ–¥—è—â–µ–µ)**
  - `outgoing_email` - **–ò—Å—Ö–æ–¥—è—â–µ–µ –ø–∏—Å—å–º–æ (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Ç–∏–ø)**
  - `incoming_email` - **–í—Ö–æ–¥—è—â–µ–µ –ø–∏—Å—å–º–æ (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Ç–∏–ø)**
  - `sms_in` - –í—Ö–æ–¥—è—â–µ–µ SMS
  - `sms_out` - –ò—Å—Ö–æ–¥—è—â–µ–µ SMS
  - `whatsapp_message` - WhatsApp —Å–æ–æ–±—â–µ–Ω–∏–µ
- `params` - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–∏–º–µ—á–∞–Ω–∏—è:
  - `text` - –¢–µ–∫—Å—Ç (–¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤)
  - `html` - HTML —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ (–¥–ª—è email)
  - `subject` - –¢–µ–º–∞ –ø–∏—Å—å–º–∞ (–¥–ª—è email)
  - `from` - –û—Ç –∫–æ–≥–æ (–¥–ª—è email/SMS)
  - `to` - –ö–æ–º—É (–¥–ª—è email/SMS)
  - `cc` - –ö–æ–ø–∏—è (–¥–ª—è email)
  - `bcc` - –°–∫—Ä—ã—Ç–∞—è –∫–æ–ø–∏—è (–¥–ª—è email)
  - `status` - –°—Ç–∞—Ç—É—Å (–¥–ª—è email: 1=–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ, 0=—á–µ—Ä–Ω–æ–≤–∏–∫)
  - `duration` - –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–¥–ª—è –∑–≤–æ–Ω–∫–æ–≤, –≤ —Å–µ–∫—É–Ω–¥–∞—Ö)
  - `source` - –ò—Å—Ç–æ—á–Ω–∏–∫
  - `link` - –°—Å—ã–ª–∫–∞
  - `phone` - –¢–µ–ª–µ—Ñ–æ–Ω (–¥–ª—è –∑–≤–æ–Ω–∫–æ–≤/SMS)
  - `uniq` - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
  - `attachments` - –í–ª–æ–∂–µ–Ω–∏—è (–¥–ª—è email)
- `created_by` - ID —Å–æ–∑–¥–∞—Ç–µ–ª—è
- `updated_by` - ID –æ–±–Ω–æ–≤–∏–≤—à–µ–≥–æ
- `created_at` - –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è (timestamp)
- `updated_at` - –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (timestamp)

**–ú–µ—Ç–æ–¥—ã –≤ –∫–æ–¥–µ:**
- `createNote(note)` - –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ
- `getNotesByEntity(entityId, entityType)` - –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–∏–º–µ—á–∞–Ω–∏—è –ø–æ —Å—É—â–Ω–æ—Å—Ç–∏
- `sendEmailFromLead(leadId, emailData)` - **–û—Ç–ø—Ä–∞–≤–∏—Ç—å email —á–µ—Ä–µ–∑ —Å–¥–µ–ª–∫—É**
- `createCallNote(entityId, entityType, callData)` - –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ –æ –∑–≤–æ–Ω–∫–µ
- `createMeetingNote(entityId, entityType, meetingData)` - –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ –æ –≤—Å—Ç—Ä–µ—á–µ

**üìß –†–∞–±–æ—Ç–∞ —Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–º–∏ –ø–∏—Å—å–º–∞–º–∏:**

**–û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å—å–º–∞:**
```typescript
// –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å—å–º–∞ –∫–ª–∏–µ–Ω—Ç—É —á–µ—Ä–µ–∑ —Å–¥–µ–ª–∫—É
await kommoApi.sendEmailFromLead(leadId, {
  to: ['client@example.com'],
  subject: '–û—Ç–≤–µ—Ç –Ω–∞ –≤–∞—à –≤–æ–ø—Ä–æ—Å',
  html: '<p>–¢–µ–∫—Å—Ç –ø–∏—Å—å–º–∞ –≤ HTML</p>',
  text: '–¢–µ–∫—Å—Ç –ø–∏—Å—å–º–∞ –≤ plain text',
  from: 'agent@company.com',
  cc: ['manager@company.com'],
  bcc: []
})
```

**–ß—Ç–µ–Ω–∏–µ –ø–∏—Å–µ–º –∏–∑ —Å–¥–µ–ª–∫–∏:**
```typescript
// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è (–≤–∫–ª—é—á–∞—è –ø–∏—Å—å–º–∞) –ø–æ —Å–¥–µ–ª–∫–µ
const notes = await kommoApi.getNotesByEntity(leadId, 'leads')

// –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø–∏—Å—å–º–∞
const emails = notes.filter(note => 
  note.note_type === 'mail_message' || 
  note.note_type === 'outgoing_email' || 
  note.note_type === 'incoming_email'
)

// –ü–æ–ª—É—á–∏—Ç—å –≤—Ö–æ–¥—è—â–∏–µ –ø–∏—Å—å–º–∞
const incomingEmails = emails.filter(email => 
  email.params.from && !email.params.to?.includes(agentEmail)
)

// –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ö–æ–¥—è—â–∏–µ –ø–∏—Å—å–º–∞
const outgoingEmails = emails.filter(email => 
  email.params.to && email.params.status === 1
)
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- ‚úÖ **–û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å–µ–º –∫–ª–∏–µ–Ω—Ç–∞–º —á–µ—Ä–µ–∑ AI-–∞–≥–µ–Ω—Ç–∞**
- ‚úÖ **–ß—Ç–µ–Ω–∏–µ –≤—Ö–æ–¥—è—â–∏—Ö –ø–∏—Å–µ–º –∏–∑ —Å–¥–µ–ª–∫–∏**
- ‚úÖ **–ò—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ–ø–∏—Å–∫–∏ –≤ —Å–¥–µ–ª–∫–µ**
- ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π**
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –ø–∏—Å—å–º–∞**

---

### 9. **–ö–æ–º–ø–∞–Ω–∏–∏ (Companies)**

**Endpoints:**
- `GET /api/v4/companies` - –°–ø–∏—Å–æ–∫ –∫–æ–º–ø–∞–Ω–∏–π
- `GET /api/v4/companies/{id}` - –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –∫–æ–º–ø–∞–Ω–∏—è
- `POST /api/v4/companies` - –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏
- `PATCH /api/v4/companies` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏

**–î–∞–Ω–Ω—ã–µ:**
- `id` - ID –∫–æ–º–ø–∞–Ω–∏–∏
- `name` - –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏
- `responsible_user_id` - ID –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ
- `created_at` - –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è (timestamp)
- `updated_at` - –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (timestamp)
- `custom_fields_values` - –ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø–æ–ª—è
- `_embedded.contacts` - –°–≤—è–∑–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã
- `_embedded.leads` - –°–≤—è–∑–∞–Ω–Ω—ã–µ —Å–¥–µ–ª–∫–∏
- `_embedded.tags` - –¢–µ–≥–∏

**–ú–µ—Ç–æ–¥—ã –≤ –∫–æ–¥–µ:** (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, –Ω–æ –¥–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ API)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –†–∞–±–æ—Ç–∞ —Å –∫–æ–º–ø–∞–Ω–∏—è–º–∏
- –°–≤—è–∑—ã–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –∏ —Å–¥–µ–ª–æ–∫

---

### 10. **–¢–µ–≥–∏ (Tags)**

**Endpoint:** `GET /api/v4/tags`

**–î–∞–Ω–Ω—ã–µ:**
- `id` - ID —Ç–µ–≥–∞
- `name` - –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–µ–≥–∞
- `color` - –¶–≤–µ—Ç —Ç–µ–≥–∞

**–ú–µ—Ç–æ–¥—ã –≤ –∫–æ–¥–µ:** (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, –Ω–æ –¥–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ API)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Å–¥–µ–ª–æ–∫/–∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è

---

### 11. **–ê–∫–∫–∞—É–Ω—Ç (Account)**

**Endpoint:** `GET /api/v4/account`

**–î–∞–Ω–Ω—ã–µ:**
- `id` - ID –∞–∫–∫–∞—É–Ω—Ç–∞
- `name` - –ù–∞–∑–≤–∞–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞
- `subdomain` - –ü–æ–¥–¥–æ–º–µ–Ω
- `created_at` - –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è (timestamp)
- `currency` - –í–∞–ª—é—Ç–∞
- `timezone` - –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å
- `timezone_offset` - –°–º–µ—â–µ–Ω–∏–µ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞

**–ú–µ—Ç–æ–¥—ã –≤ –∫–æ–¥–µ:** (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, –Ω–æ –¥–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ API)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∞–∫–∫–∞—É–Ω—Ç–∞

---

### 12. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (Stats)**

**–ú–µ—Ç–æ–¥—ã –≤ –∫–æ–¥–µ:**
- `getLeadsStats()` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å–¥–µ–ª–∫–∞–º:
  - `total` - –í—Å–µ–≥–æ —Å–¥–µ–ª–æ–∫
  - `by_status` - –ü–æ —ç—Ç–∞–ø–∞–º (Record<status_id, count>)
  - `by_pipeline` - –ü–æ –≤–æ—Ä–æ–Ω–∫–∞–º (Record<pipeline_id, count>)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
- –û—Ç—á–µ—Ç—ã
- Dashboard

---

### 13. **–í—Ö–æ–¥—è—â–∏–µ –ª–∏–¥—ã (Incoming Leads)**

**Endpoints:**
- `GET /api/v4/incoming_leads` - –°–ø–∏—Å–æ–∫ –≤—Ö–æ–¥—è—â–∏—Ö –ª–∏–¥–æ–≤
- `GET /api/v4/incoming_leads/{uid}` - –ü–æ–ª—É—á–∏—Ç—å –≤—Ö–æ–¥—è—â–∏–π –ª–∏–¥ –ø–æ UID
- `POST /api/v4/incoming_leads` - –î–æ–±–∞–≤–∏—Ç—å –≤—Ö–æ–¥—è—â–∏–π –ª–∏–¥
- `POST /api/v4/incoming_leads/sip` - –î–æ–±–∞–≤–∏—Ç—å –≤—Ö–æ–¥—è—â–∏–π –ª–∏–¥ –∏–∑ –∑–≤–æ–Ω–∫–∞
- `POST /api/v4/incoming_leads/form` - –î–æ–±–∞–≤–∏—Ç—å –≤—Ö–æ–¥—è—â–∏–π –ª–∏–¥ –∏–∑ —Ñ–æ—Ä–º—ã
- `POST /api/v4/incoming_leads/{uid}/accept` - –ü—Ä–∏–Ω—è—Ç—å –≤—Ö–æ–¥—è—â–∏–π –ª–∏–¥
- `POST /api/v4/incoming_leads/{uid}/decline` - –û—Ç–∫–ª–æ–Ω–∏—Ç—å –≤—Ö–æ–¥—è—â–∏–π –ª–∏–¥
- `POST /api/v4/incoming_leads/{uid}/link` - –ü—Ä–∏–≤—è–∑–∞—Ç—å –≤—Ö–æ–¥—è—â–∏–π –ª–∏–¥ –∫ —Å–¥–µ–ª–∫–µ/–∫–æ–Ω—Ç–∞–∫—Ç—É

**–î–∞–Ω–Ω—ã–µ:**
- `uid` - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤—Ö–æ–¥—è—â–µ–≥–æ –ª–∏–¥–∞
- `source_uid` - UID –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- `source_type` - –¢–∏–ø –∏—Å—Ç–æ—á–Ω–∏–∫–∞ (form, sip, etc.)
- `pipeline_id` - ID –≤–æ—Ä–æ–Ω–∫–∏
- `status_id` - ID —ç—Ç–∞–ø–∞
- `created_at` - –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
- `metadata` - –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ª–∏–¥–∞

**–ú–µ—Ç–æ–¥—ã –≤ –∫–æ–¥–µ:** (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, –Ω–æ –¥–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ API)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–∏—Ö –∑–∞—è–≤–æ–∫
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–¥–µ–ª–æ–∫
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ–æ—Ä–º–∞–º–∏ –∏ –∑–≤–æ–Ω–∫–∞–º–∏

---

### 14. **–ò—Å—Ç–æ—á–Ω–∏–∫–∏ (Sources)**

**Endpoints:**
- `GET /api/v4/leads/sources` - –°–ø–∏—Å–æ–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- `GET /api/v4/leads/sources/{id}` - –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫ –ø–æ ID
- `POST /api/v4/leads/sources` - –î–æ–±–∞–≤–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫
- `PATCH /api/v4/leads/sources` - –û–±–Ω–æ–≤–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏ (–º–∞—Å—Å–æ–≤–æ)
- `PATCH /api/v4/leads/sources/{id}` - –û–±–Ω–æ–≤–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫
- `DELETE /api/v4/leads/sources` - –£–¥–∞–ª–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏ (–º–∞—Å—Å–æ–≤–æ)
- `DELETE /api/v4/leads/sources/{id}` - –£–¥–∞–ª–∏—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫

**–î–∞–Ω–Ω—ã–µ:**
- `id` - ID –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- `name` - –ù–∞–∑–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- `type` - –¢–∏–ø –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- `external_id` - –í–Ω–µ—à–Ω–∏–π ID

**–ú–µ—Ç–æ–¥—ã –≤ –∫–æ–¥–µ:** (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, –Ω–æ –¥–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ API)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Å–¥–µ–ª–æ–∫
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞–Ω–∞–ª–æ–≤

---

### 15. **–®–∞–±–ª–æ–Ω—ã (Templates)**

**Endpoints:**
- `GET /api/v4/templates` - –°–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω–æ–≤
- `GET /api/v4/templates/{id}` - –ü–æ–ª—É—á–∏—Ç—å —à–∞–±–ª–æ–Ω –ø–æ ID
- `POST /api/v4/templates` - –î–æ–±–∞–≤–∏—Ç—å —à–∞–±–ª–æ–Ω
- `PATCH /api/v4/templates` - –û–±–Ω–æ–≤–∏—Ç—å —à–∞–±–ª–æ–Ω—ã (–º–∞—Å—Å–æ–≤–æ)
- `PATCH /api/v4/templates/{id}` - –û–±–Ω–æ–≤–∏—Ç—å —à–∞–±–ª–æ–Ω
- `POST /api/v4/templates/{id}/submit` - –û—Ç–ø—Ä–∞–≤–∏—Ç—å WhatsApp —à–∞–±–ª–æ–Ω –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é
- `PATCH /api/v4/templates/{id}/status` - –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å WhatsApp —à–∞–±–ª–æ–Ω–∞
- `DELETE /api/v4/templates` - –£–¥–∞–ª–∏—Ç—å —à–∞–±–ª–æ–Ω—ã (–º–∞—Å—Å–æ–≤–æ)
- `DELETE /api/v4/templates/{id}` - –£–¥–∞–ª–∏—Ç—å —à–∞–±–ª–æ–Ω

**–î–∞–Ω–Ω—ã–µ:**
- `id` - ID —à–∞–±–ª–æ–Ω–∞
- `name` - –ù–∞–∑–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞
- `type` - –¢–∏–ø —à–∞–±–ª–æ–Ω–∞ (email, sms, whatsapp)
- `subject` - –¢–µ–º–∞ (–¥–ª—è email)
- `text` - –¢–µ–∫—Å—Ç —à–∞–±–ª–æ–Ω–∞
- `html` - HTML —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
- `status` - –°—Ç–∞—Ç—É—Å (–¥–ª—è WhatsApp)

**–ú–µ—Ç–æ–¥—ã –≤ –∫–æ–¥–µ:**
- `getEmailTemplates()` - –ü–æ–ª—É—á–∏—Ç—å —à–∞–±–ª–æ–Ω—ã –ø–∏—Å–µ–º (–∑–∞–≥–ª—É—à–∫–∞, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –®–∞–±–ª–æ–Ω—ã –ø–∏—Å–µ–º –¥–ª—è –∞–≥–µ–Ω—Ç–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç–≤–µ—Ç—ã
- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π

---

### 16. **–†–∞–∑–≥–æ–≤–æ—Ä—ã (Conversations)**

**Endpoints:**
- `GET /api/v4/conversations/{id}` - –ü–æ–ª—É—á–∏—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä –ø–æ ID
- `POST /api/v4/conversations/{id}/close` - –ó–∞–∫—Ä—ã—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä

**–î–∞–Ω–Ω—ã–µ:**
- `id` - ID —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
- `entity_id` - ID —Å—É—â–Ω–æ—Å—Ç–∏
- `entity_type` - –¢–∏–ø —Å—É—â–Ω–æ—Å—Ç–∏
- `channel` - –ö–∞–Ω–∞–ª —Å–≤—è–∑–∏
- `status` - –°—Ç–∞—Ç—É—Å —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
- `messages` - –°–æ–æ–±—â–µ–Ω–∏—è –≤ —Ä–∞–∑–≥–æ–≤–æ—Ä–µ

**–ú–µ—Ç–æ–¥—ã –≤ –∫–æ–¥–µ:** (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, –Ω–æ –¥–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ API)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞–º–∏
- –ó–∞–∫—Ä—ã—Ç–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤
- –ò—Å—Ç–æ—Ä–∏—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π

---

### 17. **–°–æ–±—ã—Ç–∏—è (Events)**

**Endpoints:**
- `GET /api/v4/events` - –°–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π
- `GET /api/v4/events/{id}` - –ü–æ–ª—É—á–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ –ø–æ ID
- `GET /api/v4/events/types` - –ü–æ–ª—É—á–∏—Ç—å —Ç–∏–ø—ã —Å–æ–±—ã—Ç–∏–π

**–î–∞–Ω–Ω—ã–µ:**
- `id` - ID —Å–æ–±—ã—Ç–∏—è
- `type` - –¢–∏–ø —Å–æ–±—ã—Ç–∏—è
- `entity_id` - ID —Å—É—â–Ω–æ—Å—Ç–∏
- `entity_type` - –¢–∏–ø —Å—É—â–Ω–æ—Å—Ç–∏
- `created_at` - –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
- `user_id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ú–µ—Ç–æ–¥—ã –≤ –∫–æ–¥–µ:** (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, –Ω–æ –¥–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ API)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –≤ CRM
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–µ–π—Å—Ç–≤–∏–π
- –ê—É–¥–∏—Ç —Å–∏—Å—Ç–µ–º—ã

---

### 18. **–°–ø–∏—Å–∫–∏ (Lists)**

**Endpoints:**
- `GET /api/v4/lists` - –°–ø–∏—Å–æ–∫ —Å–ø–∏—Å–∫–æ–≤
- `GET /api/v4/lists/{id}` - –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫
- `POST /api/v4/lists` - –î–æ–±–∞–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫
- `PATCH /api/v4/lists` - –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–∫–∏ (–º–∞—Å—Å–æ–≤–æ)
- `PATCH /api/v4/lists/{id}` - –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫
- `GET /api/v4/lists/{id}/elements` - –ü–æ–ª—É—á–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã —Å–ø–∏—Å–∫–∞
- `GET /api/v4/lists/{id}/elements/{element_id}` - –ü–æ–ª—É—á–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞
- `POST /api/v4/lists/{id}/elements` - –î–æ–±–∞–≤–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã –≤ —Å–ø–∏—Å–æ–∫
- `PATCH /api/v4/lists/{id}/elements` - –û–±–Ω–æ–≤–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã (–º–∞—Å—Å–æ–≤–æ)
- `PATCH /api/v4/lists/{id}/elements/{element_id}` - –û–±–Ω–æ–≤–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç

**–î–∞–Ω–Ω—ã–µ:**
- `id` - ID —Å–ø–∏—Å–∫–∞
- `name` - –ù–∞–∑–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–∞
- `type` - –¢–∏–ø —Å–ø–∏—Å–∫–∞
- `elements` - –≠–ª–µ–º–µ–Ω—Ç—ã —Å–ø–∏—Å–∫–∞

**–ú–µ—Ç–æ–¥—ã –≤ –∫–æ–¥–µ:** (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, –Ω–æ –¥–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ API)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –†–∞–±–æ—Ç–∞ —Å–æ —Å–ø–∏—Å–∫–∞–º–∏ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
- –°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤
- –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

---

### 19. **–°–≤—è–∑–∏ –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏ (Links)**

**Endpoints:**
- `GET /api/v4/{entity_type}/{entity_id}/links` - –°–ø–∏—Å–æ–∫ —Å–≤—è–∑–µ–π —Å—É—â–Ω–æ—Å—Ç–∏
- `POST /api/v4/{entity_type}/{entity_id}/links` - –°–æ–∑–¥–∞—Ç—å —Å–≤—è–∑—å
- `DELETE /api/v4/{entity_type}/{entity_id}/links` - –£–¥–∞–ª–∏—Ç—å —Å–≤—è–∑—å

**–î–∞–Ω–Ω—ã–µ:**
- `to_entity_id` - ID —Å–≤—è–∑–∞–Ω–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏
- `to_entity_type` - –¢–∏–ø —Å–≤—è–∑–∞–Ω–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏

**–ú–µ—Ç–æ–¥—ã –≤ –∫–æ–¥–µ:** (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, –Ω–æ –¥–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ API)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –°–≤—è–∑—ã–≤–∞–Ω–∏–µ —Å–¥–µ–ª–æ–∫ —Å –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏
- –°–≤—è–∑—ã–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–π —Å –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏
- –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å–≤—è–∑–µ–π –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏

---

### 20. **–†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (Roles)**

**Endpoints:**
- `GET /api/v4/users/roles` - –°–ø–∏—Å–æ–∫ —Ä–æ–ª–µ–π
- `GET /api/v4/users/roles/{id}` - –ü–æ–ª—É—á–∏—Ç—å —Ä–æ–ª—å –ø–æ ID
- `POST /api/v4/users/roles` - –î–æ–±–∞–≤–∏—Ç—å —Ä–æ–ª—å
- `PATCH /api/v4/users/roles/{id}` - –û–±–Ω–æ–≤–∏—Ç—å —Ä–æ–ª—å
- `DELETE /api/v4/users/roles/{id}` - –£–¥–∞–ª–∏—Ç—å —Ä–æ–ª—å

**–î–∞–Ω–Ω—ã–µ:**
- `id` - ID —Ä–æ–ª–∏
- `name` - –ù–∞–∑–≤–∞–Ω–∏–µ —Ä–æ–ª–∏
- `rights` - –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

**–ú–µ—Ç–æ–¥—ã –≤ –∫–æ–¥–µ:** (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, –Ω–æ –¥–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ API)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞
- –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

---

### 21. **–í–∏–¥–∂–µ—Ç—ã (Widgets)**

**Endpoints:**
- `GET /api/v4/widgets` - –°–ø–∏—Å–æ–∫ –≤–∏–¥–∂–µ—Ç–æ–≤
- `GET /api/v4/widgets/{code}` - –ü–æ–ª—É—á–∏—Ç—å –≤–∏–¥–∂–µ—Ç –ø–æ –∫–æ–¥—É
- `POST /api/v4/widgets/{code}/install` - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤–∏–¥–∂–µ—Ç –≤ –∞–∫–∫–∞—É–Ω—Ç
- `POST /api/v4/widgets/{code}/uninstall` - –£–¥–∞–ª–∏—Ç—å –≤–∏–¥–∂–µ—Ç –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞

**–î–∞–Ω–Ω—ã–µ:**
- `code` - –ö–æ–¥ –≤–∏–¥–∂–µ—Ç–∞
- `name` - –ù–∞–∑–≤–∞–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–∞
- `version` - –í–µ—Ä—Å–∏—è –≤–∏–¥–∂–µ—Ç–∞
- `settings` - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∏–¥–∂–µ—Ç–∞

**–ú–µ—Ç–æ–¥—ã –≤ –∫–æ–¥–µ:** (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, –Ω–æ –¥–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ API)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤–∏–¥–∂–µ—Ç–æ–≤
- –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

---

### 22. **Salesbot**

**Endpoints:**
- `POST /api/v4/salesbot/launch` - –ó–∞–ø—É—Å—Ç–∏—Ç—å Salesbot

**–î–∞–Ω–Ω—ã–µ:**
- `bot_id` - ID –±–æ—Ç–∞
- `entity_id` - ID —Å—É—â–Ω–æ—Å—Ç–∏
- `entity_type` - –¢–∏–ø —Å—É—â–Ω–æ—Å—Ç–∏

**–ú–µ—Ç–æ–¥—ã –≤ –∫–æ–¥–µ:** (–Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, –Ω–æ –¥–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ API)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–æ–¥–∞–∂
- –ß–∞—Ç-–±–æ—Ç—ã

---

## üîÑ Webhooks (–í—Ö–æ–¥—è—â–∏–µ —Å–æ–±—ã—Ç–∏—è)

**Endpoint:** `POST /api/crm/webhook` (–Ω–∞—à endpoint)

**–¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π:**
- `leads` - –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å–¥–µ–ª–∫–∞—Ö
- `contacts` - –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–Ω—Ç–∞–∫—Ç–∞—Ö
- `customers` - –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–ª–∏–µ–Ω—Ç–∞—Ö
- `tasks` - –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∑–∞–¥–∞—á–∞—Ö
- `messages` - –°–æ–æ–±—â–µ–Ω–∏—è
- `calls` - –ó–≤–æ–Ω–∫–∏
- `companies` - –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–º–ø–∞–Ω–∏—è—Ö

**–§–æ—Ä–º–∞—Ç:**
```json
{
  "account": {
    "base_domain": "subdomain.kommo.com"
  },
  "leads": {
    "status": [{ "id": 123, "status_id": 456, ... }],
    "add": [{ "id": 123, ... }],
    "update": [{ "id": 123, ... }],
    "delete": [{ "id": 123 }]
  }
}
```

**–ú–µ—Ç–æ–¥—ã –≤ –∫–æ–¥–µ:**
- `KommoAPI.parseWebhook(payload)` - –ü–∞—Ä—Å–∏–Ω–≥ webhook

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π
- –¢—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

---

## üìä –ö–∞–Ω–∞–ª—ã —Å–≤—è–∑–∏ (Channels)

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ö–∞–Ω–∞–ª—ã –Ω–µ –∏–º–µ—é—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ API endpoint, –Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑:
- –¢–∏–ø—ã –ø—Ä–∏–º–µ—á–∞–Ω–∏–π (`note_type`):
  - `mail_message` - Email
  - `sms_in` / `sms_out` - SMS
  - `whatsapp_message` - WhatsApp
  - `call_in` / `call_out` - –ó–≤–æ–Ω–∫–∏
- –ò—Å—Ç–æ—á–Ω–∏–∫–∏ —Å–¥–µ–ª–æ–∫ (`source` –≤ custom fields)
- Webhooks –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–∞–Ω–∞–ª–æ–≤ –¥–ª—è –∞–≥–µ–Ω—Ç–∞
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–∞–Ω–∞–ª–∞–º
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∫–∞–Ω–∞–ª–∞–º

---

## üéØ –î–µ–π—Å—Ç–≤–∏—è (Actions)

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è —á–µ—Ä–µ–∑ API:**

1. **–°–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–¥–µ–ª–æ–∫:**
   - `createLead()` - –°–æ–∑–¥–∞—Ç—å —Å–¥–µ–ª–∫—É
   - `updateLead()` - –û–±–Ω–æ–≤–∏—Ç—å —Å–¥–µ–ª–∫—É
   - –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –ø–æ —ç—Ç–∞–ø–∞–º (—á–µ—Ä–µ–∑ `updateLead` —Å `status_id`)

2. **–°–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤:**
   - `createContact()` - –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç
   - `updateContact()` - –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç

3. **–†–∞–±–æ—Ç–∞ —Å –∑–∞–¥–∞—á–∞–º–∏:**
   - `createTask()` - –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
   - `updateTask()` - –û–±–Ω–æ–≤–∏—Ç—å –∑–∞–¥–∞—á—É

4. **–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π:**
   - `sendEmailFromLead()` - –û—Ç–ø—Ä–∞–≤–∏—Ç—å email
   - `createNote()` - –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ (–ª—é–±–æ–≥–æ —Ç–∏–ø–∞)

5. **–†–∞–±–æ—Ç–∞ —Å –∑–≤–æ–Ω–∫–∞–º–∏:**
   - `createCallNote()` - –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ –æ –∑–≤–æ–Ω–∫–µ

6. **–†–∞–±–æ—Ç–∞ —Å–æ –≤—Å—Ç—Ä–µ—á–∞–º–∏:**
   - `createMeetingNote()` - –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ –æ –≤—Å—Ç—Ä–µ—á–µ

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –¥–µ–π—Å—Ç–≤–∏–π
- –¶–µ–ø–æ—á–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π

---

## üìù –†–µ–∑—é–º–µ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

### –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å (—Ç–æ–ª—å–∫–æ –ø–æ –∫–Ω–æ–ø–∫–µ):

1. **–í–æ—Ä–æ–Ω–∫–∏ (Pipelines)** - `getPipelines()`
2. **–≠—Ç–∞–ø—ã (Stages)** - –≤–ª–æ–∂–µ–Ω—ã –≤ `getPipelines()`
3. **–ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø–æ–ª—è —Å–¥–µ–ª–æ–∫** - `getCustomFields()` —Å `element_type: 'lead'`
4. **–ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø–æ–ª—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤** - `getCustomFields()` —Å `element_type: 'contact'`
5. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** - `getUsers()`
6. **–ö–∞–Ω–∞–ª—ã** - –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ —Ç–∏–ø—ã –ø—Ä–∏–º–µ—á–∞–Ω–∏–π –∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∏

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (—á–µ—Ä–µ–∑ webhooks):

- –°–æ–±—ã—Ç–∏—è –ø–æ —Å–¥–µ–ª–∫–∞–º
- –°–æ–±—ã—Ç–∏—è –ø–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º
- –°–æ–æ–±—â–µ–Ω–∏—è
- –ó–≤–æ–Ω–∫–∏
- –ó–∞–¥–∞—á–∏

---

## üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫—ç—à–∞

```typescript
interface KommoSyncCache {
  pipelines: Array<{
    id: number
    name: string
    stages: Array<{
      id: number
      name: string
      sort: number
      color: string
      type: number
    }>
  }>
  dealFields: Array<{
    id: number
    name: string
    type: string
    enums?: Record<string, string>
  }>
  contactFields: Array<{
    id: number
    name: string
    type: string
    enums?: Record<string, string>
  }>
  users: Array<{
    id: number
    name: string
    email: string
  }>
  channels: Array<{
    id: string
    name: string
    type: string
  }>
}
```

### 2. API endpoints –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

```
POST /api/kommo/sync                    # –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
GET  /api/kommo/sync/status             # –°—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
GET  /api/kommo/pipelines               # –ü–æ–ª—É—á–∏—Ç—å –≤–æ—Ä–æ–Ω–∫–∏ (–∏–∑ –∫—ç—à–∞)
GET  /api/kommo/stages                   # –ü–æ–ª—É—á–∏—Ç—å —ç—Ç–∞–ø—ã (–∏–∑ –∫—ç—à–∞)
GET  /api/kommo/deal-fields              # –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—è —Å–¥–µ–ª–æ–∫ (–∏–∑ –∫—ç—à–∞)
GET  /api/kommo/contact-fields           # –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ (–∏–∑ –∫—ç—à–∞)
GET  /api/kommo/users                    # –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∏–∑ –∫—ç—à–∞)
GET  /api/kommo/channels                 # –ü–æ–ª—É—á–∏—Ç—å –∫–∞–Ω–∞–ª—ã (–∏–∑ –∫—ç—à–∞)
```

### 3. –î–µ–π—Å—Ç–≤–∏—è –¥–ª—è —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤/—Ü–µ–ø–æ—á–µ–∫

```typescript
type KommoAction = 
  | { type: 'create_task', task: KommoTask }
  | { type: 'update_lead', leadId: number, data: Partial<KommoLead> }
  | { type: 'update_contact', contactId: number, data: Partial<KommoContact> }
  | { type: 'move_lead', leadId: number, statusId: number }
  | { type: 'send_email', leadId: number, email: KommoEmailMessage }
  | { type: 'create_note', note: KommoNote }
```

---

## üéØ –ß—Ç–æ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å —á–µ—Ä–µ–∑ –Ω–∞—à –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –ø—Ä–æ–µ–∫—Ç–µ

#### 1. **–†–∞–±–æ—Ç–∞ —Å –ø–∏—Å—å–º–∞–º–∏ (Email)**

**–û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å–µ–º:**
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å–µ–º –∫–ª–∏–µ–Ω—Ç–∞–º —á–µ—Ä–µ–∑ AI-–∞–≥–µ–Ω—Ç–∞
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è —Ç–∏–ø–∞ `mail_message` –∏–ª–∏ `outgoing_email`
- ‚úÖ Kommo —Ä–µ–∞–ª—å–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–∏—Å—å–º–æ –∫–ª–∏–µ–Ω—Ç—É —á–µ—Ä–µ–∑ —Å–≤–æ—é email-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é
- ‚úÖ –ü–∏—Å—å–º–æ –¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ email –∞–¥—Ä–µ—Å –∫–ª–∏–µ–Ω—Ç–∞
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ —Å–¥–µ–ª–∫–µ

**–ß—Ç–µ–Ω–∏–µ –ø–∏—Å–µ–º:**
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–∏–º–µ—á–∞–Ω–∏–π –ø–æ —Å–¥–µ–ª–∫–µ (–≤–∫–ª—é—á–∞—è –ø–∏—Å—å–º–∞)
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É `mail_message`, `outgoing_email`, `incoming_email`
- ‚úÖ –ß—Ç–µ–Ω–∏–µ –≤—Ö–æ–¥—è—â–∏—Ö –ø–∏—Å–µ–º –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –ø–µ—Ä–µ–ø–∏—Å–∫–∏

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```typescript
// –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å—å–º–∞
await kommoApi.sendEmailFromLead(leadId, {
  to: ['client@example.com'],
  subject: '–û—Ç–≤–µ—Ç –Ω–∞ –≤–∞—à –≤–æ–ø—Ä–æ—Å',
  html: '<p>–¢–µ–∫—Å—Ç –ø–∏—Å—å–º–∞</p>',
  text: '–¢–µ–∫—Å—Ç –ø–∏—Å—å–º–∞',
  from: 'agent@company.com'
})

// –ß—Ç–µ–Ω–∏–µ –ø–∏—Å–µ–º
const notes = await kommoApi.getNotesByEntity(leadId, 'leads')
const emails = notes.filter(note => 
  note.note_type === 'mail_message' || 
  note.note_type === 'outgoing_email' || 
  note.note_type === 'incoming_email'
)
```

#### 2. **–†–∞–±–æ—Ç–∞ —Å–æ —Å–¥–µ–ª–∫–∞–º–∏**

- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å–¥–µ–ª–∫–∏ (`getLead()`)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Å–¥–µ–ª–∫–∏ (`createLead()`)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–¥–µ–ª–∫–∏ (`updateLead()`)
- ‚úÖ –ü–æ–∏—Å–∫ —Å–¥–µ–ª–æ–∫ (`searchLeads()`)
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å–¥–µ–ª–æ–∫ (`getLeads()`)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π —Å–¥–µ–ª–∫–∏
- ‚úÖ –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –ø–æ —ç—Ç–∞–ø–∞–º (—á–µ—Ä–µ–∑ `updateLead` —Å `status_id`)

#### 3. **–†–∞–±–æ—Ç–∞ —Å –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏**

- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞ (`getContact()`)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞ (`createContact()`)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞ (`updateContact()`)
- ‚úÖ –ü–æ–∏—Å–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ (`searchContacts()`)

#### 4. **–†–∞–±–æ—Ç–∞ —Å –≤–æ—Ä–æ–Ω–∫–∞–º–∏ –∏ —ç—Ç–∞–ø–∞–º–∏**

- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–æ—Ä–æ–Ω–æ–∫ (`getPipelines()`)
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —ç—Ç–∞–ø–æ–≤ (–≤–ª–æ–∂–µ–Ω–æ –≤ `getPipelines()`)
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤–æ—Ä–æ–Ω–æ–∫ –∏ —ç—Ç–∞–ø–æ–≤

#### 5. **–†–∞–±–æ—Ç–∞ —Å –∑–∞–¥–∞—á–∞–º–∏**

- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ (`createTask()`)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ (`updateTask()`)
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–¥–∞—á –ø–æ —Å—É—â–Ω–æ—Å—Ç–∏ (`getTasksByEntity()`)

#### 6. **–†–∞–±–æ—Ç–∞ —Å –ø—Ä–∏–º–µ—á–∞–Ω–∏—è–º–∏**

- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è (`createNote()`)
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏–π –ø–æ —Å—É—â–Ω–æ—Å—Ç–∏ (`getNotesByEntity()`)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è –æ –∑–≤–æ–Ω–∫–µ (`createCallNote()`)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è –æ –≤—Å—Ç—Ä–µ—á–µ (`createMeetingNote()`)

#### 7. **–†–∞–±–æ—Ç–∞ —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –ø–æ–ª—è–º–∏**

- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª–µ–π (`getCustomFields()`)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—è (`createCustomField()`)
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É —Å—É—â–Ω–æ—Å—Ç–∏ (`element_type`)

#### 8. **–†–∞–±–æ—Ç–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏**

- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (`getUsers()`)

#### 9. **Webhooks**

- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–∏—Ö webhooks (`KommoAPI.parseWebhook()`)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π –ø–æ —Å–¥–µ–ª–∫–∞–º, –∫–æ–Ω—Ç–∞–∫—Ç–∞–º, –∑–∞–¥–∞—á–∞–º, —Å–æ–æ–±—â–µ–Ω–∏—è–º

---

### ‚ö†Ô∏è –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, –Ω–æ –¥–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ API

#### 1. **–ö–æ–º–ø–∞–Ω–∏–∏ (Companies)**
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫–æ–º–ø–∞–Ω–∏–π
- –°–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–π
- –°–≤—è–∑—ã–≤–∞–Ω–∏–µ —Å –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏ –∏ —Å–¥–µ–ª–∫–∞–º–∏

#### 2. **–¢–µ–≥–∏ (Tags)**
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–≥–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–≥–æ–≤ –¥–ª—è —Å—É—â–Ω–æ—Å—Ç–µ–π

#### 3. **–ê–∫–∫–∞—É–Ω—Ç (Account)**
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∞–∫–∫–∞—É–Ω—Ç–µ
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

#### 4. **–í—Ö–æ–¥—è—â–∏–µ –ª–∏–¥—ã (Incoming Leads)**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥—è—â–∏—Ö –∑–∞—è–≤–æ–∫
- –ü—Ä–∏–Ω—è—Ç–∏–µ/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –ª–∏–¥–æ–≤
- –ü—Ä–∏–≤—è–∑–∫–∞ –∫ —Å–¥–µ–ª–∫–∞–º

#### 5. **–ò—Å—Ç–æ—á–Ω–∏–∫–∏ (Sources)**
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ —Å–¥–µ–ª–æ–∫
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º

#### 6. **–®–∞–±–ª–æ–Ω—ã (Templates)**
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞–º–∏ –ø–∏—Å–µ–º
- WhatsApp —à–∞–±–ª–æ–Ω—ã

#### 7. **–†–∞–∑–≥–æ–≤–æ—Ä—ã (Conversations)**
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞–º–∏
- –ó–∞–∫—Ä—ã—Ç–∏–µ —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤

#### 8. **–°–æ–±—ã—Ç–∏—è (Events)**
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–µ–π—Å—Ç–≤–∏–π

#### 9. **–°–ø–∏—Å–∫–∏ (Lists)**
- –†–∞–±–æ—Ç–∞ —Å–æ —Å–ø–∏—Å–∫–∞–º–∏ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
- –°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è

#### 10. **–°–≤—è–∑–∏ –º–µ–∂–¥—É —Å—É—â–Ω–æ—Å—Ç—è–º–∏ (Links)**
- –°–≤—è–∑—ã–≤–∞–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π
- –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å–≤—è–∑–µ–π

#### 11. **–†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (Roles)**
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏
- –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

#### 12. **–í–∏–¥–∂–µ—Ç—ã (Widgets)**
- –£—Å—Ç–∞–Ω–æ–≤–∫–∞/—É–¥–∞–ª–µ–Ω–∏–µ –≤–∏–¥–∂–µ—Ç–æ–≤

#### 13. **Salesbot**
- –ó–∞–ø—É—Å–∫ Salesbot

---

## üìß –î–µ—Ç–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–º–∏ –ø–∏—Å—å–º–∞–º–∏

### –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–∏—Å—å–º–∞ —á–µ—Ä–µ–∑ –Ω–∞—à –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

**–ß–µ—Ä–µ–∑ AI-–∞–≥–µ–Ω—Ç–∞:**
1. –ê–≥–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –≤—Ö–æ–¥—è—â–µ–µ –ø–∏—Å—å–º–æ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞
2. –ê–≥–µ–Ω—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–∏—Å—å–º–æ –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç
3. –ê–≥–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–≤–µ—Ç —á–µ—Ä–µ–∑ `sendEmailFromLead()`
4. Kommo —Ä–µ–∞–ª—å–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–∏—Å—å–º–æ –∫–ª–∏–µ–Ω—Ç—É
5. –ü–∏—Å—å–º–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏–∏ —Å–¥–µ–ª–∫–∏ –∫–∞–∫ –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ

**–ß–µ—Ä–µ–∑ —Ç—Ä–∏–≥–≥–µ—Ä—ã/—Ü–µ–ø–æ—á–∫–∏:**
1. –°–¥–µ–ª–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —ç—Ç–∞–ø
2. –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç—Ä–∏–≥–≥–µ—Ä
3. –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–µ–π—Å—Ç–≤–∏–µ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–∏—Å—å–º–æ"
4. –ü–∏—Å—å–º–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `sendEmailFromLead()`
5. –ü–∏—Å—å–º–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏–∏

**–ß–µ—Ä–µ–∑ –Ω–∞—à API:**
```typescript
POST /api/integrations/kommo/messages/send
{
  "orgId": "uuid",
  "dealId": "123",
  "channel": "email",
  "message": {
    "subject": "–û—Ç–≤–µ—Ç –Ω–∞ –≤–∞—à –≤–æ–ø—Ä–æ—Å",
    "body": "–¢–µ–∫—Å—Ç –ø–∏—Å—å–º–∞",
    "attachments": [
      { "url": "https://...", "name": "file.pdf" }
    ]
  }
}
```

### –ß—Ç–µ–Ω–∏–µ –ø–∏—Å–µ–º —á–µ—Ä–µ–∑ –Ω–∞—à –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

**–ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–∏—Å–µ–º –ø–æ —Å–¥–µ–ª–∫–µ:**
```typescript
// –ß–µ—Ä–µ–∑ –Ω–∞—à API
GET /api/crm/kommo?action=lead&id=123
// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–¥–µ–ª–∫—É —Å–æ –≤—Å–µ–º–∏ –¥–∞–Ω–Ω—ã–º–∏

// –ó–∞—Ç–µ–º –ø–æ–ª—É—á–∞–µ–º –ø—Ä–∏–º–µ—á–∞–Ω–∏—è
const notes = await kommoApi.getNotesByEntity(leadId, 'leads')
const emails = notes.filter(note => 
  note.note_type === 'mail_message' || 
  note.note_type === 'outgoing_email' || 
  note.note_type === 'incoming_email'
)
```

**–ß–µ—Ä–µ–∑ webhooks:**
- Kommo –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç webhook –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–∏—Å—å–º–∞
- –ù–∞—à —Å–µ—Ä–≤–∏—Å –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç webhook
- –ü–∏—Å—å–º–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –∏—Å—Ç–æ—Ä–∏—é —Å–¥–µ–ª–∫–∏
- –ê–≥–µ–Ω—Ç –º–æ–∂–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –ø–∏—Å—å–º–æ

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∏—Å—å–º–∞ –≤ –ø—Ä–∏–º–µ—á–∞–Ω–∏–∏:**
```typescript
{
  id: 12345,
  entity_id: 67890, // ID —Å–¥–µ–ª–∫–∏
  entity_type: 'leads',
  note_type: 'mail_message', // –∏–ª–∏ 'outgoing_email', 'incoming_email'
  params: {
    text: '–¢–µ–∫—Å—Ç –ø–∏—Å—å–º–∞ –≤ plain text',
    html: '<p>–¢–µ–∫—Å—Ç –ø–∏—Å—å–º–∞ –≤ HTML</p>',
    subject: '–¢–µ–º–∞ –ø–∏—Å—å–º–∞',
    from: 'client@example.com',
    to: 'agent@company.com',
    status: 1, // 1 = –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ, 0 = —á–µ—Ä–Ω–æ–≤–∏–∫
    attachments: [] // –í–ª–æ–∂–µ–Ω–∏—è
  },
  created_at: 1234567890,
  created_by: 123
}
```

---

## üîß –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –º–µ—Ç–æ–¥–æ–≤ API (–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)

–°–æ–≥–ª–∞—Å–Ω–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Kommo API (https://developers.kommo.com/docs/about-kommo-api), –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –º–µ—Ç–æ–¥—ã:

### Account
- ‚úÖ Get the account information

### Leads
- ‚úÖ Get a leads list
- ‚úÖ Get a single lead
- ‚úÖ Add leads
- ‚úÖ Update a lead
- ‚úÖ Update a bunch of leads
- ‚úÖ Complex addition leads (with contacts and companies)

### Pipelines and Stages
- ‚úÖ Get a pipelines list
- ‚úÖ Get a single pipeline
- ‚úÖ Add pipelines
- ‚úÖ Edit a pipeline
- ‚úÖ Delete a pipeline
- ‚úÖ Get a pipeline stages list
- ‚úÖ Get a single pipeline stage
- ‚úÖ Add stages
- ‚úÖ Edit stages
- ‚úÖ Delete a stage
- ‚úÖ Stage colors codes

### Contacts
- ‚úÖ Get a contacts list
- ‚úÖ Get a contact
- ‚úÖ Add contacts
- ‚úÖ Update a contact
- ‚úÖ Update a bunch of contacts

### Users and roles
- ‚úÖ Get a users list
- ‚úÖ Get a user
- ‚úÖ Add users
- ‚úÖ Get a user roles list
- ‚úÖ Get a role
- ‚úÖ Add roles
- ‚úÖ Edit a role
- ‚úÖ Delete a role

### Tags
- ‚ö†Ô∏è Get a list of entity tags
- ‚ö†Ô∏è Add tags for a particular entity type
- ‚ö†Ô∏è Update tags of a single entity
- ‚ö†Ô∏è Update tags of multiple entities

### Custom fields
- ‚úÖ Get a custom fields list
- ‚úÖ Get an entity custom field by ID
- ‚úÖ Add custom fields

### Incoming leads
- ‚ö†Ô∏è Incoming leads list
- ‚ö†Ô∏è Getting an incoming lead by its UID
- ‚ö†Ô∏è Adding incoming leads from the type sip (call)
- ‚ö†Ô∏è Adding incoming leads from the type form
- ‚ö†Ô∏è Accepting incoming leads
- ‚ö†Ô∏è Declining incoming leads
- ‚ö†Ô∏è Linking incoming leads
- ‚ö†Ô∏è Incoming leads summary information
- ‚ö†Ô∏è Metadata objects description

### Tasks
- ‚úÖ Tasks List
- ‚úÖ Getting a task by its ID
- ‚úÖ Adding tasks
- ‚úÖ Editing tasks
- ‚úÖ Editing a single task

### Sources
- ‚ö†Ô∏è Get a list of sources
- ‚ö†Ô∏è Get a source by its ID
- ‚ö†Ô∏è Add sources
- ‚ö†Ô∏è Update a source
- ‚ö†Ô∏è Update sources
- ‚ö†Ô∏è Delete a source
- ‚ö†Ô∏è Delete sources
- ‚ö†Ô∏è Get Website chat button objects
- ‚ö†Ô∏è Get a Website chat button
- ‚ö†Ô∏è Add Website chat button
- ‚ö†Ô∏è Connect online chat to Website chat button
- ‚ö†Ô∏è Update Website chat button

### Salesbot
- ‚ö†Ô∏è Launch Salesbot

### Companies
- ‚ö†Ô∏è Companies list
- ‚ö†Ô∏è Getting a company by its ID
- ‚ö†Ô∏è Add companies
- ‚ö†Ô∏è Updating companies
- ‚ö†Ô∏è Updating a company

### Templates
- ‚ö†Ô∏è Get a list of templates
- ‚ö†Ô∏è Get a template by ID
- ‚ö†Ô∏è Add templates
- ‚ö†Ô∏è Edit templates
- ‚ö†Ô∏è Submit a WhatsApp template for moderation
- ‚ö†Ô∏è Edit a WhatsApp template status
- ‚ö†Ô∏è Delete templates
- ‚ö†Ô∏è Delete a template

### Webhooks
- ‚úÖ List of webhooks
- ‚úÖ Adding a webhook
- ‚úÖ Deleting a webhook
- ‚úÖ Webhook events

### Conversations
- ‚ö†Ô∏è Get a conversation by ID
- ‚ö†Ô∏è Close a conversation by ID

### Widgets
- ‚ö†Ô∏è Widgets List
- ‚ö†Ô∏è Getting the widget info by its code
- ‚ö†Ô∏è Installing the widget into the account
- ‚ö†Ô∏è Uninstalling widget

### Lists
- ‚ö†Ô∏è Get a list of lists
- ‚ö†Ô∏è Get a list
- ‚ö†Ô∏è Adding lists
- ‚ö†Ô∏è Editing lists
- ‚ö†Ô∏è Editing a list
- ‚ö†Ô∏è Get list elements
- ‚ö†Ô∏è Get a list element
- ‚ö†Ô∏è Adding list elements
- ‚ö†Ô∏è Editing list elements
- ‚ö†Ô∏è Editing a list element

### Events
- ‚ö†Ô∏è Events list
- ‚ö†Ô∏è Getting an event by its ID
- ‚ö†Ô∏è Getting events types
- ‚ö†Ô∏è Events types

### Notes ‚≠ê –ö–†–ò–¢–ò–ß–ù–û
- ‚úÖ Getting a particular entity's notes list by the entity ID
- ‚úÖ Notes list by the entity type
- ‚úÖ Get a note by its ID
- ‚úÖ Adding notes
- ‚úÖ Editing notes
- ‚úÖ Editing a note
- ‚úÖ Notes types

### Calls
- ‚úÖ Add calls

### OAuth 2.0
- ‚úÖ Get/renew an access token

### Links between entities
- ‚ö†Ô∏è Linked entities list
- ‚ö†Ô∏è Linking entities
- ‚ö†Ô∏è Unlinking entities

**–õ–µ–≥–µ–Ω–¥–∞:**
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –ø—Ä–æ–µ–∫—Ç–µ
- ‚ö†Ô∏è –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, –Ω–æ –¥–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ API

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-01-26  
**–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:** https://developers.kommo.com/docs/about-kommo-api

