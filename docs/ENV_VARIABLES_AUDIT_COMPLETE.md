# üîç –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** 2025-01-26  
**–ü—Ä–æ–µ–∫—Ç:** T11 Platform (gpt-agent-kwid)

---

## üìä –°–≤–æ–¥–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏

### ‚úÖ Vercel (Frontend/API)
- **–ù–∞–π–¥–µ–Ω–æ:** 16 –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- **–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:** 6 –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- **–õ–∏—à–Ω–∏—Ö:** 0

### ‚úÖ Railway (Worker Service)
- **–ù–∞–π–¥–µ–Ω–æ:** 11 –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (8 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö + 3 —Å–∏—Å—Ç–µ–º–Ω—ã—Ö Railway)
- **–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:** 0 (–≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç)
- **–õ–∏—à–Ω–∏—Ö:** 0 (—Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ Railway –Ω–µ —É–¥–∞–ª—è–µ–º)

---

## üî¥ VERCEL - –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç)

### –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã (‚ö†Ô∏è –°–ï–ö–†–ï–¢–ù–û - –¥–æ–±–∞–≤–∏—Ç—å –≤ Secrets):

1. **`JWT_SECRET`**
   - –û–ø–∏—Å–∞–Ω–∏–µ: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–µ–∫—Ä–µ—Ç –¥–ª—è JWT —Ç–æ–∫–µ–Ω–æ–≤
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è: `openssl rand -base64 32`
   - –ì–¥–µ –¥–æ–±–∞–≤–∏—Ç—å: Vercel Secrets (Production)

2. **`UPSTASH_REDIS_REST_TOKEN`**
   - –û–ø–∏—Å–∞–Ω–∏–µ: REST —Ç–æ–∫–µ–Ω –¥–ª—è Upstash Redis
   - –ì–¥–µ –¥–æ–±–∞–≤–∏—Ç—å: Vercel Secrets (Production)
   - **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –£–∂–µ –µ—Å—Ç—å –≤ Railway, –º–æ–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—Ç—É–¥–∞

3. **`OPENROUTER_API_KEY`**
   - –û–ø–∏—Å–∞–Ω–∏–µ: API –∫–ª—é—á –¥–ª—è OpenRouter (—Ñ–æ—Ä–º–∞—Ç: `sk-or-v1-...`)
   - –ì–¥–µ –¥–æ–±–∞–≤–∏—Ç—å: Vercel Secrets (Production)
   - **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –£–∂–µ –µ—Å—Ç—å –≤ Railway, –º–æ–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—Ç—É–¥–∞

4. **`ENCRYPTION_KEY`**
   - –û–ø–∏—Å–∞–Ω–∏–µ: –ö–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (32 –±–∞–π—Ç–∞ –≤ base64)
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è: `openssl rand -base64 32`
   - –ì–¥–µ –¥–æ–±–∞–≤–∏—Ç—å: Vercel Secrets (Production)
   - **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –£–∂–µ –µ—Å—Ç—å –≤ Railway, –º–æ–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—Ç—É–¥–∞

### –ü—É–±–ª–∏—á–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

5. **`NEXT_PUBLIC_SUPABASE_ANON_KEY`**
   - –û–ø–∏—Å–∞–Ω–∏–µ: –ü—É–±–ª–∏—á–Ω—ã–π –∞–Ω–æ–Ω–∏–º–Ω—ã–π –∫–ª—é—á Supabase –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
   - –ì–¥–µ –¥–æ–±–∞–≤–∏—Ç—å: Vercel Environment Variables (Production)
   - **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –î–æ–ª–∂–µ–Ω —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å `SUPABASE_ANON_KEY` –∏–ª–∏ –±—ã—Ç—å –¥—Ä—É–≥–∏–º –ø—É–±–ª–∏—á–Ω—ã–º –∫–ª—é—á–æ–º

6. **`UPSTASH_REDIS_REST_URL`**
   - –û–ø–∏—Å–∞–Ω–∏–µ: REST URL –¥–ª—è Upstash Redis
   - –ì–¥–µ –¥–æ–±–∞–≤–∏—Ç—å: Vercel Environment Variables (Production)
   - **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –£–∂–µ –µ—Å—Ç—å –≤ Railway, –º–æ–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—Ç—É–¥–∞

---

## ‚úÖ VERCEL - –¢–µ–∫—É—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–≤—Å–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ)

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:
- ‚úÖ `NEXTAUTH_SECRET` (Production)
- ‚úÖ `NEXTAUTH_URL` (Production)

### Supabase:
- ‚úÖ `SUPABASE_URL` (Production)
- ‚úÖ `SUPABASE_ANON_KEY` (Production)
- ‚úÖ `SUPABASE_SERVICE_ROLE_KEY` (Production)
- ‚úÖ `NEXT_PUBLIC_SUPABASE_URL` (Production)

### Kommo Integration:
- ‚úÖ `KOMMO_WEBHOOK_SECRET` (All Environments)
- ‚úÖ `KOMMO_OAUTH_REDIRECT_BASE` (Production)

### SMTP:
- ‚úÖ `SMTP_HOST` (All Environments)
- ‚úÖ `SMTP_PORT` (All Environments)
- ‚úÖ `SMTP_USER` (All Environments)
- ‚úÖ `SMTP_PASS` (All Environments)
- ‚úÖ `FROM_EMAIL` (All Environments)

### Cron:
- ‚úÖ `CRON_SECRET` (All Environments)

### Sentry:
- ‚úÖ `SENTRY_DSN` (Development, Preview, Production)
- ‚úÖ `NEXT_PUBLIC_SENTRY_DSN` (Development, Preview, Production)

---

## ‚úÖ RAILWAY - –¢–µ–∫—É—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–≤—Å–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ)

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (8):
1. ‚úÖ `SUPABASE_URL`
2. ‚úÖ `SUPABASE_SERVICE_ROLE_KEY`
3. ‚úÖ `ENCRYPTION_KEY`
4. ‚úÖ `OPENROUTER_API_KEY`
5. ‚úÖ `JOB_QUEUE_NAME`
6. ‚úÖ `JOB_CONCURRENCY`
7. ‚úÖ `UPSTASH_REDIS_REST_TOKEN`
8. ‚úÖ `UPSTASH_REDIS_REST_URL`

### –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ Railway (3):
- ‚úÖ `REDIS_URL` (—Å–∏—Å—Ç–µ–º–Ω–∞—è Railway - –Ω–µ —É–¥–∞–ª—è—Ç—å)
- ‚úÖ `PORT` (—Å–∏—Å—Ç–µ–º–Ω–∞—è Railway - –Ω–µ —É–¥–∞–ª—è—Ç—å)
- ‚úÖ `RAILWAY_TOKEN` (—Å–∏—Å—Ç–µ–º–Ω–∞—è Railway - –Ω–µ —É–¥–∞–ª—è—Ç—å)

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ Railway –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è –¥–ª—è worker, –Ω–æ –∏—Ö –Ω–µ –Ω—É–∂–Ω–æ —É–¥–∞–ª—è—Ç—å.

---

## üìã –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å env.production.example

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ env.production.example:

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | Vercel | Railway | –°—Ç–∞—Ç—É—Å |
|------------|--------|---------|--------|
| `NEXTAUTH_SECRET` | ‚úÖ | ‚ùå | ‚úÖ Vercel |
| `NEXTAUTH_URL` | ‚úÖ | ‚ùå | ‚úÖ Vercel |
| `JWT_SECRET` | ‚ùå | ‚ùå | üî¥ –û–¢–°–£–¢–°–¢–í–£–ï–¢ |
| `SUPABASE_URL` | ‚úÖ | ‚úÖ | ‚úÖ –û–±–∞ |
| `SUPABASE_ANON_KEY` | ‚úÖ | ‚ùå | ‚úÖ Vercel |
| `SUPABASE_SERVICE_ROLE_KEY` | ‚úÖ | ‚úÖ | ‚úÖ –û–±–∞ |
| `NEXT_PUBLIC_SUPABASE_URL` | ‚úÖ | ‚ùå | ‚úÖ Vercel |
| `NEXT_PUBLIC_SUPABASE_ANON_KEY` | ‚ùå | ‚ùå | üî¥ –û–¢–°–£–¢–°–¢–í–£–ï–¢ |
| `SUPABASE_DEFAULT_ORGANIZATION_ID` | ‚ùå | ‚ùå | ‚ö†Ô∏è –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ |
| `UPSTASH_REDIS_REST_URL` | ‚ùå | ‚úÖ | üî¥ –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ Vercel |
| `UPSTASH_REDIS_REST_TOKEN` | ‚ùå | ‚úÖ | üî¥ –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ Vercel |
| `OPENROUTER_API_KEY` | ‚ùå | ‚úÖ | üî¥ –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ Vercel |
| `ENCRYPTION_KEY` | ‚ùå | ‚úÖ | üî¥ –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ Vercel |

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è Vercel:

1. **–î–æ–±–∞–≤–∏—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —Å–µ–∫—Ä–µ—Ç—ã:**
   - –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏–∑ Railway: `UPSTASH_REDIS_REST_URL`, `UPSTASH_REDIS_REST_TOKEN`, `OPENROUTER_API_KEY`, `ENCRYPTION_KEY`
   - –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ: `JWT_SECRET`
   - –î–æ–±–∞–≤–∏—Ç—å –ø—É–±–ª–∏—á–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é: `NEXT_PUBLIC_SUPABASE_ANON_KEY`

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   - –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ –≤ Production
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è All Environments (–≥–¥–µ —ç—Ç–æ —É–º–µ—Å—Ç–Ω–æ)

3. **–£–¥–∞–ª–∏—Ç—å –ª–∏—à–Ω–µ–µ:**
   - –õ–∏—à–Ω–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ ‚úÖ

### –î–ª—è Railway:

1. **–í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ —É–∂–µ –µ—Å—Ç—å ‚úÖ**
   - –í—Å–µ 8 –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–ª—è worker –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
   - –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ Railway –Ω–µ —É–¥–∞–ª—è–µ–º

2. **–£–¥–∞–ª–∏—Ç—å –ª–∏—à–Ω–µ–µ:**
   - –õ–∏—à–Ω–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ ‚úÖ

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ **Vercel:** –î–æ–±–∞–≤–∏—Ç—å 6 –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
   - 4 —Å–µ–∫—Ä–µ—Ç–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏–∑ Railway
   - 1 —Å–µ–∫—Ä–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å (`JWT_SECRET`)
   - 1 –ø—É–±–ª–∏—á–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –¥–æ–±–∞–≤–∏—Ç—å (`NEXT_PUBLIC_SUPABASE_ANON_KEY`)

2. ‚úÖ **Railway:** –ù–∏—á–µ–≥–æ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è - –≤—Å–µ –≤ –ø–æ—Ä—è–¥–∫–µ

3. ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞:** –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ Vercel, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üîê –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- ‚úÖ –í—Å–µ —Å–µ–∫—Ä–µ—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ (–Ω–µ –≤ Git)
- ‚úÖ Vercel Secrets –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Å–µ–∫—Ä–µ—Ç–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- ‚úÖ Railway –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞—â–∏—â–µ–Ω—ã

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:
- ‚úÖ –û–±—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (Supabase, Redis, OpenRouter, Encryption) –¥–æ–ª–∂–Ω—ã —Å–æ–≤–ø–∞–¥–∞—Ç—å –º–µ–∂–¥—É Vercel –∏ Railway
- ‚úÖ –°–µ–∫—Ä–µ—Ç—ã –º–æ–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏–∑ Railway –≤ Vercel

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- ‚úÖ `env.production.example` - –∞–∫—Ç—É–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
- ‚úÖ `docs/SECRETS.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Å–µ–∫—Ä–µ—Ç–∞–º
- ‚úÖ `services/worker/src/lib/env.ts` - —Å—Ö–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–ª—è worker

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-01-26  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –æ—Ç—á–µ—Ç –≥–æ—Ç–æ–≤

