# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ GPT Agent Platform –∫ –≤–Ω–µ—à–Ω–∏–º —Å–∏—Å—Ç–µ–º–∞–º –∏ —Å–µ—Ä–≤–∏—Å–∞–º.

## –û–±–∑–æ—Ä

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç AI-–∞–≥–µ–Ω—Ç–∞–º:
- üìä –ü–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ CRM —Å–∏—Å—Ç–µ–º
- üìß –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- üìÖ –°–æ–∑–¥–∞–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ
- üí¨ –†–∞–±–æ—Ç–∞—Ç—å –≤ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞—Ö
- üîî –ü–æ–ª—É—á–∞—Ç—å webhook —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## –î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### CRM —Å–∏—Å—Ç–µ–º—ã

#### Kommo (amoCRM)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- OAuth 2.0 –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –∏ —Å–¥–µ–ª–æ–∫
- Webhook —Å–æ–±—ã—Ç–∏—è (–Ω–æ–≤—ã–µ –ª–∏–¥—ã, –∏–∑–º–µ–Ω–µ–Ω–∏—è)
- –°–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–¥–µ–ª–æ–∫ –∏–∑ —á–∞—Ç–∞
- –î–æ—Å—Ç—É–ø –∞–≥–µ–Ω—Ç–∞ –∫ –¥–∞–Ω–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–∞

[–ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ ‚Üí](/docs/ru/integrations/kommo)

#### HubSpot
**–°—Ç–∞—Ç—É—Å:** üöß –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

**–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è:**
- OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è CRM –¥–∞–Ω–Ω—ã—Ö
- Workflow –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

#### Salesforce
**–°—Ç–∞—Ç—É—Å:** üìã –í –ø–ª–∞–Ω–∞—Ö

### –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä—ã

#### Telegram
**–°—Ç–∞—Ç—É—Å:** üöß –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –ë–æ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- –û—Ç–≤–µ—Ç—ã –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
- –ò–Ω–ª–∞–π–Ω —Ä–µ–∂–∏–º

#### WhatsApp Business
**–°—Ç–∞—Ç—É—Å:** üìã –í –ø–ª–∞–Ω–∞—Ö

### Email

#### SendGrid
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –î–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ API

```typescript
// –û—Ç–ø—Ä–∞–≤–∫–∞ email –∏–∑ –∞–≥–µ–Ω—Ç–∞
await sendEmail({
  to: '[email protected]',
  subject: '–í–∞—à –∑–∞–ø—Ä–æ—Å –æ–±—Ä–∞–±–æ—Ç–∞–Ω',
  body: '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ...'
})
```

#### Mailgun
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –î–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ API

### –ö–∞–ª–µ–Ω–¥–∞—Ä–∏

#### Google Calendar
**–°—Ç–∞—Ç—É—Å:** üöß –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

**–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è:**
- –°–æ–∑–¥–∞–Ω–∏–µ –≤—Å—Ç—Ä–µ—á
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
- –û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π

### Analytics

#### Google Analytics
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–æ

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç—Ä–µ–∫–∏–Ω–≥:
- –ó–∞–ø—Ä–æ—Å—ã –∫ –∞–≥–µ–Ω—Ç–∞–º
- –ö–æ–Ω–≤–µ—Ä—Å–∏–∏
- User journey

#### Mixpanel
**–°—Ç–∞—Ç—É—Å:** üìã –í –ø–ª–∞–Ω–∞—Ö

## –¢–∏–ø—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

### 1. OAuth –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ OAuth 2.0:

**–ü—Ä–æ—Ü–µ—Å—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
1. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ CRM
2. –ü–æ–ª—É—á–∏—Ç–µ Client ID –∏ Client Secret
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Redirect URI
4. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ –≤ GPT Agent Platform
5. –ü—Ä–æ–π–¥–∏—Ç–µ OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –¢–æ–∫–µ–Ω—ã —à–∏—Ñ—Ä—É—é—Ç—Å—è AES-256-GCM
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (refresh)
- –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∑–∞—â–∏—â–µ–Ω–Ω–æ–π –ë–î

### 2. Webhook –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–∏—Å—Ç–µ–º:

```
External System  ‚Üí  Webhook  ‚Üí  GPT Platform  ‚Üí  AI Agent
```

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Å–æ–±—ã—Ç–∏—è:**
- –ù–æ–≤—ã–π –ª–∏–¥ –≤ CRM ‚Üí –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
- –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Üí –û—Ç–≤–µ—Ç–∏—Ç—å –∞–≥–µ–Ω—Ç–æ–º
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ ‚Üí –£–≤–µ–¥–æ–º–∏—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- HMAC signature verification
- IP whitelist (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- Rate limiting (50 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω)

### 3. API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

–ü—Ä—è–º—ã–µ API –≤—ã–∑–æ–≤—ã:

```typescript
// –í –ø—Ä–æ–º–ø—Ç–µ –∞–≥–µ–Ω—Ç–∞
"–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ –∏—Å–ø–æ–ª—å–∑—É–π —Ñ—É–Ω–∫—Ü–∏—é getBalance(userId)"

// –ê–≥–µ–Ω—Ç –≤—ã–∑–æ–≤–µ—Ç
const balance = await api.getBalance('user_123')
// –í–µ—Ä–Ω–µ—Ç: { balance: 1500, currency: 'USD' }
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

### –û–±—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å

1. **–í—ã–±–µ—Ä–∏—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
   - –í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π —Å–µ—Ä–≤–∏—Å

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ credentials**
   - API –∫–ª—é—á–∏
   - OAuth –¥–∞–Ω–Ω—ã–µ
   - Webhook URLs

3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤—è–∑–∏
   - –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å

4. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –∫ –∞–≥–µ–Ω—Ç—É**
   - –í—ã–±–µ—Ä–∏—Ç–µ –∞–≥–µ–Ω—Ç–∞
   - –í–∫–ª—é—á–∏—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Kommo

```bash
# 1. –ü–æ–ª—É—á–∏—Ç–µ credentials –≤ Kommo
Client ID: abc123...
Client Secret: xyz789...
Redirect URI: https://your-domain.com/api/crm/callback

# 2. –î–æ–±–∞–≤—å—Ç–µ –≤ GPT Platform
Settings ‚Üí Integrations ‚Üí Kommo ‚Üí Connect
‚îî‚îÄ –í–≤–µ–¥–∏—Ç–µ Client ID, Secret, URI
‚îî‚îÄ –ù–∞–∂–º–∏—Ç–µ "Authorize"
‚îî‚îÄ –ü—Ä–æ–π–¥–∏—Ç–µ OAuth –≤ Kommo
‚îî‚îÄ ‚úÖ –ì–æ—Ç–æ–≤–æ!

# 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≥–µ–Ω—Ç–∞
Agents ‚Üí [–í–∞—à –∞–≥–µ–Ω—Ç] ‚Üí Integrations
‚îî‚îÄ Enable Kommo ‚úÖ
‚îî‚îÄ Permissions:
    ‚úÖ Read contacts
    ‚úÖ Read leads
    ‚úÖ Create leads
    ‚ùå Delete (–æ–±—ã—á–Ω–æ –Ω–µ –Ω—É–∂–Ω–æ)
```

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Kommo](/docs/ru/integrations/kommo)

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ AI-–∞–≥–µ–Ω—Ç–∞—Ö

### –î–æ—Å—Ç—É–ø –∫ CRM –¥–∞–Ω–Ω—ã–º

```typescript
// –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –∞–≥–µ–Ω—Ç–∞
"–£ —Ç–µ–±—è –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ CRM –¥–∞–Ω–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–∞.

–ò—Å–ø–æ–ª—å–∑—É–π —Ñ—É–Ω–∫—Ü–∏—é getContact(email) –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è:
- –ò–º—è –∫–ª–∏–µ–Ω—Ç–∞
- –ò—Å—Ç–æ—Ä–∏—è –ø–æ–∫—É–ø–æ–∫
- –û—Ç–∫—Ä—ã—Ç—ã–µ —Å–¥–µ–ª–∫–∏
- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–±—Ä–∞—â–µ–Ω–∏—è

–ü—Ä–∏–º–µ—Ä:
const contact = await getContact('[email protected]')
// { name: '–ò–≤–∞–Ω', purchases: 3, openDeals: 1 }

–û–±—Ä–∞—â–∞–π—Å—è –∫ –∫–ª–∏–µ–Ω—Ç—É –ø–æ –∏–º–µ–Ω–∏!"
```

### –°–æ–∑–¥–∞–Ω–∏–µ —Å–¥–µ–ª–æ–∫

```typescript
// –ü—Ä–æ–º–ø—Ç
"–ö–æ–≥–¥–∞ –∫–ª–∏–µ–Ω—Ç –≥–æ—Ç–æ–≤ –∫—É–ø–∏—Ç—å, —Å–æ–∑–¥–∞–π —Å–¥–µ–ª–∫—É –≤ CRM:

await createDeal({
  title: '–ü–æ–∫—É–ø–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–∞ X',
  contact: contactId,
  value: 1000,
  stage: 'new'
})

–°–æ–æ–±—â–∏ –∫–ª–∏–µ–Ω—Ç—É —á—Ç–æ –º–µ–Ω–µ–¥–∂–µ—Ä —Å–≤—è–∂–µ—Ç—Å—è."
```

### –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

```typescript
// –ü—Ä–æ–º–ø—Ç
"–ü—Ä–∏ —ç—Å–∫–∞–ª–∞—Ü–∏–∏ —Å–ª–æ–∂–Ω–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞:

await sendNotification({
  type: 'email',
  to: '[email protected]',
  subject: '–¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–º–æ—â—å',
  body: '–ö–ª–∏–µ–Ω—Ç —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø—Ä–æ...'
})"
```

## Webhook –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ webhook

1. **–ü–æ–ª—É—á–∏—Ç–µ URL**
   ```
   https://your-domain.com/api/crm/webhook
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤ CRM**
   - URL: `https://your-domain.com/api/crm/webhook`
   - Method: POST
   - Events: –Ω–æ–≤—ã–µ –ª–∏–¥—ã, —Å–æ–æ–±—â–µ–Ω–∏—è

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫**
   ```typescript
   // –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ —Å–æ–±—ã—Ç–∏–∏
   ON webhook.lead.created:
     - –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∞–≥–µ–Ω—Ç–æ–º
     - –ö–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ª–∏–¥
     - –ù–∞–∑–Ω–∞—á–∏—Ç—å –º–µ–Ω–µ–¥–∂–µ—Ä—É
   ```

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å webhooks

```typescript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ signature
const signature = request.headers['x-webhook-signature']
const isValid = verifyHMAC(request.body, signature, SECRET)

if (!isValid) {
  return Response.json({ error: 'Invalid signature' }, { status: 401 })
}
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- ‚úÖ –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ signature
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ rate (50/–º–∏–Ω)
- ‚úÖ –õ–æ–≥–∏—Ä—É–π—Ç–µ –≤—Å–µ —Å–æ–±—ã—Ç–∏—è
- ‚ùå –ù–µ –¥–æ–≤–µ—Ä—è–π—Ç–µ –¥–∞–Ω–Ω—ã–º –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

### –ú–µ—Ç—Ä–∏–∫–∏

**–°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
```
Kommo: ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω
Last sync: 2 –º–∏–Ω—É—Ç—ã –Ω–∞–∑–∞–¥
Status: OK

HubSpot: ‚ùå –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
Last error: Token expired
Action: –ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç–µ
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```
Kommo API –≤—ã–∑–æ–≤—ã (—Å–µ–≥–æ–¥–Ω—è):
- –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤: 450
- –°–æ–∑–¥–∞–Ω–∏–µ —Å–¥–µ–ª–æ–∫: 12
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 23
–õ–∏–º–∏—Ç: 1000/–¥–µ–Ω—å (–æ—Å—Ç–∞–ª–æ—Å—å 515)
```

**Webhook —Å–æ–±—ã—Ç–∏—è:**
```
–ü–æ–ª—É—á–µ–Ω–æ —Å–µ–≥–æ–¥–Ω—è: 89 webhook
- lead.created: 45
- message.new: 44
–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: 89 (100%)
–û—à–∏–±–æ–∫: 0
```

### –õ–æ–≥–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

```
[2025-01-16 10:30:15] INFO  Kommo: New lead received
  leadId: 12345
  email: [email protected]

[2025-01-16 10:30:16] INFO  Agent: Processing lead
  agentId: support-agent
  action: send-welcome

[2025-01-16 10:30:17] SUCCESS Message sent
  messageId: msg_abc123
  tokens: 145
```

–î–æ—Å—Ç—É–ø –∫ –ª–æ–≥–∞–º: Settings ‚Üí Integrations ‚Üí [Integration] ‚Üí Logs

## Best Practices

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

‚úÖ **DO:**
- –ö—ç—à–∏—Ä—É–π—Ç–µ —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ (5-10 –º–∏–Ω—É—Ç)
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ batch –∑–∞–ø—Ä–æ—Å—ã –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ API –ª–∏–º–∏—Ç—ã

‚ùå **DON'T:**
- –ù–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–π—Ç–µ –æ–¥–Ω–∏ –¥–∞–Ω–Ω—ã–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ
- –ù–µ –¥–µ–ª–∞–π—Ç–µ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –≤—ã–∑–æ–≤—ã –≤ —Ü–∏–∫–ª–µ
- –ù–µ –∏–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ rate limits

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚úÖ **DO:**
- –®–∏—Ñ—Ä—É–π—Ç–µ –≤—Å–µ —Ç–æ–∫–µ–Ω—ã
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ permissions
- –†–µ–≥—É–ª—è—Ä–Ω–æ —Ä–æ—Ç–∏—Ä—É–π—Ç–µ –∫–ª—é—á–∏
- –õ–æ–≥–∏—Ä—É–π—Ç–µ –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

‚ùå **DON'T:**
- –ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω—ã –≤ plain text
- –ù–µ –¥–∞–≤–∞–π—Ç–µ –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –ø—Ä–∞–≤–∞
- –ù–µ –∏–≥–Ω–æ—Ä–∏—Ä—É–π—Ç–µ –æ—à–∏–±–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å

‚úÖ **DO:**
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –æ—à–∏–±–∫–∏ gracefully
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ retry —Å exponential backoff
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
- –ò–º–µ–π—Ç–µ fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏—é

```typescript
// Retry logic
async function callAPI(endpoint, retries = 3) {
  for (let i = 0; i < retries; i++) {
    try {
      return await fetch(endpoint)
    } catch (error) {
      if (i === retries - 1) throw error
      await sleep(2 ** i * 1000) // 1s, 2s, 4s
    }
  }
}
```

## Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–°–∏–º–ø—Ç–æ–º—ã:**
```
Error: Invalid redirect_uri
```

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Redirect URI —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Ç–æ—á–Ω–æ:
   ```
   –í CRM: https://your-domain.com/api/crm/callback
   –í –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ: https://your-domain.com/api/crm/callback
   ```
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ HTTPS (–Ω–µ HTTP)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –¥–æ–º–µ–Ω –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ

### –ü—Ä–æ–±–ª–µ–º–∞: –¢–æ–∫–µ–Ω —É—Å—Ç–∞—Ä–µ–ª

**–°–∏–º–ø—Ç–æ–º—ã:**
```
Error: Access token expired
```

**–†–µ—à–µ–Ω–∏–µ:**
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ –µ—Å–ª–∏ –Ω–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `refresh_token` —Å–æ—Ö—Ä–∞–Ω–µ–Ω
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤
3. –í –∫—Ä–∞–π–Ω–µ–º —Å–ª—É—á–∞–µ: –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é

### –ü—Ä–æ–±–ª–µ–º–∞: API –ª–∏–º–∏—Ç –ø—Ä–µ–≤—ã—à–µ–Ω

**–°–∏–º–ø—Ç–æ–º—ã:**
```
Error: Rate limit exceeded (429)
```

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ–∫—É—â–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ
2. –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ —á–∞—Å—Ç–æ—Ç—É –∑–∞–ø—Ä–æ—Å–æ–≤:
   - –£–≤–µ–ª–∏—á—å—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ batch –∑–∞–ø—Ä–æ—Å—ã
   - –£–º–µ–Ω—å—à–∏—Ç–µ —á–∞—Å—Ç–æ—Ç—É —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
3. –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ upgrade –ø–ª–∞–Ω–∞ –≤ CRM

### –ü—Ä–æ–±–ª–µ–º–∞: Webhook –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç

**–ß–µ–∫-–ª–∏—Å—Ç:**
1. ‚úÖ URL –¥–æ—Å—Ç—É–ø–µ–Ω –ø—É–±–ª–∏—á–Ω–æ (–Ω–µ localhost)
2. ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è HTTPS
3. ‚úÖ Endpoint –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 200 OK
4. ‚úÖ –í CRM –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
5. ‚úÖ –ù–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ firewall/WAF

**–û—Ç–ª–∞–¥–∫–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ endpoint
curl -X POST https://your-domain.com/api/crm/webhook \
  -H "Content-Type: application/json" \
  -d '{"test": true}'

# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: 200 OK
```

## –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

```typescript
// lib/integrations/custom-crm.ts
import { Integration } from '@/types/integration'

export class CustomCRMIntegration implements Integration {
  async connect(credentials: OAuthCredentials) {
    // OAuth flow
    const token = await this.oauth.getToken(credentials)
    return token
  }

  async getContact(id: string) {
    // –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞
    return await this.api.get(`/contacts/${id}`)
  }

  async createDeal(data: DealData) {
    // –°–æ–∑–¥–∞–Ω–∏–µ —Å–¥–µ–ª–∫–∏
    return await this.api.post('/deals', data)
  }

  async handleWebhook(event: WebhookEvent) {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ webhook
    if (event.type === 'lead.created') {
      // ...
    }
  }
}
```

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

```typescript
// lib/integrations/registry.ts
import { CustomCRMIntegration } from './custom-crm'

export const integrations = {
  kommo: KommoIntegration,
  customCrm: CustomCRMIntegration, // –í–∞—à–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
}
```

## API Reference

### –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏

```typescript
GET /api/integrations

Response:
{
  "integrations": [
    {
      "id": "int_123",
      "provider": "kommo",
      "status": "connected",
      "connectedAt": "2025-01-15T10:00:00Z",
      "lastSync": "2025-01-16T10:30:00Z"
    }
  ]
}
```

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

```typescript
POST /api/integrations/connect

Body:
{
  "provider": "kommo",
  "credentials": {
    "clientId": "...",
    "clientSecret": "...",
    "redirectUri": "..."
  }
}

Response:
{
  "authUrl": "https://kommo.com/oauth/authorize?..."
}
```

### –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

```typescript
POST /api/integrations/{provider}/call

Body:
{
  "function": "getContact",
  "params": {
    "email": "[email protected]"
  }
}

Response:
{
  "data": {
    "id": "123",
    "name": "–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤",
    "email": "[email protected]"
  }
}
```

## Roadmap

### –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ (Q1 2025)
- ‚úÖ Kommo (–∑–∞–≤–µ—Ä—à–µ–Ω–æ)
- üöß Telegram Bot
- üöß HubSpot

### –ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è (Q2 2025)
- WhatsApp Business
- Google Calendar
- Salesforce
- Zapier webhooks

### –ë—É–¥—É—â–µ–µ (Q3+ 2025)
- Slack
- Microsoft Teams
- Zendesk
- Custom webhook builder (no-code)

## –ü–æ–ª—É—á–∏—Ç—å –ø–æ–º–æ—â—å

- üìñ [Kommo –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è](/docs/ru/integrations/kommo)
- üí¨ [–û–±—Å—É–¥–∏—Ç—å –Ω–æ–≤—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é](https://github.com/worldwideservice/gpt-agent-platform/discussions)
- üêõ [–°–æ–æ–±—â–∏—Ç—å –æ –ø—Ä–æ–±–ª–µ–º–µ](https://github.com/worldwideservice/gpt-agent-platform/issues)
