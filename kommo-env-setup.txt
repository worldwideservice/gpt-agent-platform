# Настройка переменных окружения для тестирования Kommo API

Для настройки тестирования Kommo CRM вам нужно:

1. Создать файл .env.local в корне проекта со следующим содержимым:

```
# === KOMMO CRM TESTING (DEV ONLY) ===
KOMMO_TEST_ENABLED=1
KOMMO_TEST_DOMAIN=ваш-домен-kommo
KOMMO_TEST_CLIENT_ID=ваш-client-id
KOMMO_TEST_CLIENT_SECRET=ваш-client-secret
KOMMO_TEST_REDIRECT_URI=http://localhost:3000/api/auth/kommo/callback
KOMMO_TEST_ACCESS_TOKEN=ваш-access-token
KOMMO_TEST_REFRESH_TOKEN=ваш-refresh-token
```

2. Получить значения для переменных:

## Шаг 1: Зарегистрироваться в Kommo
- Перейдите на https://www.kommo.com/
- Создайте аккаунт или войдите в существующий

## Шаг 2: Создать интеграцию
- В настройках аккаунта перейдите в "Интеграции"
- Создайте новое приложение для интеграции
- Получите CLIENT_ID и CLIENT_SECRET

## Шаг 3: Настроить домен
- Ваш KOMMO_TEST_DOMAIN - это поддомен вашего аккаунта (например: "mycompany")
- Полный URL будет: https://mycompany.amocrm.ru

## Шаг 4: Получить токены доступа
- Используйте OAuth 2.0 flow для получения ACCESS_TOKEN и REFRESH_TOKEN
- Или используйте existing токены из вашего аккаунта

## Шаг 5: Тестирование
После настройки переменных запустите:
```
npx tsx test-kommo.ts
```

Это проверит подключение к Kommo API.
