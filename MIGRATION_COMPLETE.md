# ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é –º–∏–≥—Ä–∞—Ü–∏–π –ë–î

## üéØ –ë—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–± (2 –º–∏–Ω—É—Ç—ã):

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª –º–∏–≥—Ä–∞—Ü–∏–∏:
```bash
open scripts/apply-all-setup.sql
# –∏–ª–∏
code scripts/apply-all-setup.sql
```

### 2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–µ—Å—å —Ñ–∞–π–ª:
- –ù–∞–∂–º–∏—Ç–µ `Ctrl+A` (–∏–ª–∏ `Cmd+A` –Ω–∞ Mac)
- –ù–∞–∂–º–∏—Ç–µ `Ctrl+C` (–∏–ª–∏ `Cmd+C`)

### 3. –û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard:
- https://supabase.com/dashboard/project/rpzchsgutabxeabbnwas/sql/new
- –ò–ª–∏: https://supabase.com/dashboard ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç ‚Üí SQL Editor ‚Üí New query

### 4. –í—Å—Ç–∞–≤—å—Ç–µ SQL:
- –í—Å—Ç–∞–≤—å—Ç–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ (Ctrl+V / Cmd+V)
- –ù–∞–∂–º–∏—Ç–µ **Run** (–∏–ª–∏ Ctrl+Enter / Cmd+Enter)

### 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- –î–æ–ª–∂–Ω—ã –≤–µ—Ä–Ω—É—Ç—å—Å—è **5 —Ç–∞–±–ª–∏—Ü** (–≤ –ø–µ—Ä–≤–æ–º SELECT)
- –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è **1 bucket** (–≤–æ –≤—Ç–æ—Ä–æ–º SELECT)

---

## ‚úÖ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã:

### –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç:
```bash
bash scripts/execute-migration.sh
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç:
- –û—Ç–∫—Ä–æ–µ—Ç —Ñ–∞–π–ª SQL –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
- –û—Ç–∫—Ä–æ–µ—Ç Supabase Dashboard –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- –ü–æ–∫–∞–∂–µ—Ç –ø–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

---

## üìã –ß—Ç–æ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–æ:

### –¢–∞–±–ª–∏—Ü—ã:
1. ‚úÖ `company_knowledge` - –∑–Ω–∞–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–∏
2. ‚úÖ `sales_scripts` - —Å–∫—Ä–∏–ø—Ç—ã –ø—Ä–æ–¥–∞–∂
3. ‚úÖ `objection_responses` - –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–∑—Ä–∞–∂–µ–Ω–∏—è
4. ‚úÖ `agent_memory` - –ø–∞–º—è—Ç—å –∞–≥–µ–Ω—Ç–∞
5. ‚úÖ `agent_pipeline_settings` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–æ—Ä–æ–Ω–æ–∫

### Storage:
- ‚úÖ Bucket `agent-assets` (50 MB –ª–∏–º–∏—Ç, –ø—Ä–∏–≤–∞—Ç–Ω—ã–π)

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
- ‚úÖ –¢—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `updated_at`
- ‚úÖ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è bucket

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ Supabase SQL Editor:

```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∞–±–ª–∏—Ü
SELECT table_name 
FROM information_schema.tables 
WHERE table_schema = 'public' 
AND table_name IN (
  'agent_pipeline_settings',
  'company_knowledge',
  'sales_scripts',
  'objection_responses',
  'agent_memory'
)
ORDER BY table_name;

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ bucket
SELECT id, name, public, file_size_limit 
FROM storage.buckets 
WHERE id = 'agent-assets';
```

–î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è: **5 —Å—Ç—Ä–æ–∫** –≤ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ, **1 —Å—Ç—Ä–æ–∫–∞** –≤–æ –≤—Ç–æ—Ä–æ–º.

---

## ‚ö†Ô∏è –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:

### –û—à–∏–±–∫–∞: "relation already exists"
- –¢–∞–±–ª–∏—Ü–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ
- –°–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `CREATE TABLE IF NOT EXISTS`

### –û—à–∏–±–∫–∞: "bucket already exists"
- Bucket —É–∂–µ —Å–æ–∑–¥–∞–Ω - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ
- –°–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `ON CONFLICT DO NOTHING`

### –û—à–∏–±–∫–∞: "permission denied"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Service Role Key
- –ò–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —á–µ—Ä–µ–∑ Supabase Dashboard (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞)

---

**–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π –ø—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∑–∞–ø—É—Å–∫—É! üöÄ**

